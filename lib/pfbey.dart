// TRWyfmub2ROqdRU7Mu

import 'dart:convert';
import 'dart:async';
import 'package:bot_toast/bot_toast.dart';
import 'package:cached_network_image/cached_network_image.dart';
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:fluentui_system_icons/fluentui_system_icons.dart';
import 'package:flutter_list_view/flutter_list_view.dart';
import 'package:provider/provider.dart';
import 'package:shixin/qtygw.dart';
import 'jsqbc.dart';
import 'vynkbr.dart';
import 'ulexf.dart';
import 'jeywe.dart';
import 'gevl.dart';
import 'dxhys.dart';
import 'package:shixin/ovwnpf.dart';
import 'package:wukongimfluttersdk/wkim.dart';
import 'package:wukongimfluttersdk/type/const.dart';
import 'package:wukongimfluttersdk/entity/msg.dart';
import 'package:wukongimfluttersdk/entity/channel.dart';
import 'package:wukongimfluttersdk/entity/channel_member.dart';
import 'package:wukongimfluttersdk/model/wk_text_content.dart';
import 'package:wukongimfluttersdk/model/wk_message_content.dart';
import 'package:wukongimfluttersdk/model/wk_image_content.dart';
import 'package:wukongimfluttersdk/model/wk_voice_content.dart';
import 'package:wukongimfluttersdk/model/wk_video_content.dart';
import 'package:wukongimfluttersdk/model/wk_card_content.dart';
import 'package:shared_preferences/shared_preferences.dart';
import 'brrx.dart';
import 'package:flutter_screenutil/flutter_screenutil.dart';
import 'rahv.dart';
import 'jofzfd.dart';
import 'pqflog.dart';
import 'xjytgb.dart';
import 'dart:io';
import 'dart:ui' as ui;
import 'package:intl/intl.dart';
import 'umqcfh.dart';
import 'eavfps.dart';
import 'kjghl.dart';
import 'abri.dart';
import 'gprvv.dart';
import 'dtyi.dart';
import 'laayzm.dart';
import 'dbvhd.dart';
import 'esct.dart';
import 'oozxi.dart';
import 'baqk.dart';
import 'ligfek.dart';
import 'ulbyp.dart';
import 'sqcsn.dart';
import 'sraqum.dart';
import 'hdeb.dart';
import 'sgpuq.dart';
import 'jxbcqc.dart';
import 'psmori.dart';
import 'cbfvt.dart';
import 'kgml.dart';
import 'ganxrh.dart';
import 'lnuy.dart';
import 'ibzyoz.dart';
import 'lgff.dart';
import 'package:dismissible_page/dismissible_page.dart';
import 'cdhmig.dart';
import 'ocugzd.dart';
import 'rpsv.dart';
import 'aetem.dart';

import 'rjvg.dart';
import 'lebi.dart';
import 'lstjt.dart';

import 'sqowv.dart';
import 'douy.dart';
import 'package:open_filex/open_filex.dart';
import 'package:path_provider/path_provider.dart';
import 'package:path/path.dart' as p;
import 'package:dio/dio.dart';
import 'gjftd.dart';
import 'qmzz.dart';
import 'ypzwl.dart';
import 'kydd.dart';
import 'lgjz.dart';
import 'package:shixin/bjbex.dart';
import 'package:shixin/pvsp.dart';
import 'package:shixin/xldd.dart';
import 'package:shixin/ilqsii.dart';
import 'ckuef.dart';
import 'ixio.dart';
import 'cxqv.dart';
import 'package:video_thumbnail/video_thumbnail.dart';
import 'hdzndn.dart';
import 'kmrhpb.dart';

class JjIV2E9J7E extends StatefulWidget {
  final String jtOMCOXzl;
  final int vrrAD3oFxIr;
  final int tddayJN0TZGUmMs2KK; // IWf1RIgzK4amxNdDH3VDDmAtgE
  final String? jP1PEDQmo; // OQb3k4OfzphYPbLxX
  final String? hCdeSa0kvDQ; // bEl5oWlD6NmiVQa6sqpwroA
  final ZpLJHHwdz07XHIRqd? vJqpX1exw4XMU; // WeQySClHfYLNDV
  final Future<ZpLJHHwdz07XHIRqd>? vWrzqPwr7ujNt; // gl5Td9jSiz1agMIzE
  final bool e0cP18RllOgwxmXaGn0GKkOAQ;
  final int?
  bX2kZaDUeUcWhTH24XvaVHZW3PggiW0U40; // vwp8pz1yt93wbkbuues3gUtS9fAMi
  final int? u5OoP33Cs8MARLmuDpaFMLa; // wB6MGJaCIWI9b9dkzhSqOMLsTGhLB
  final UOhfgZz8UP8RWn? xX2UUCJDCk6v; // At5YCBJNQDKUQsPXVe32J
  const JjIV2E9J7E({
    super.key,
    required this.jtOMCOXzl,
    this.vrrAD3oFxIr = WKChannelType.personal,
    this.jP1PEDQmo,
    this.hCdeSa0kvDQ, // M9AsBT8D3ZSiugXlq
    this.vJqpX1exw4XMU, // rmpbqUdH6baQZXdXXi
    this.vWrzqPwr7ujNt, // fsTNsEBj60tZZc
    this.e0cP18RllOgwxmXaGn0GKkOAQ = false,
    this.tddayJN0TZGUmMs2KK = 0,
    this.bX2kZaDUeUcWhTH24XvaVHZW3PggiW0U40,
    this.u5OoP33Cs8MARLmuDpaFMLa, // LlpzUOVMeS
    this.xX2UUCJDCk6v,
  });

  @override
  State<JjIV2E9J7E> createState() => _OY4QvRjdQ0B6Zm5();
}

class _OY4QvRjdQ0B6Zm5 extends State<JjIV2E9J7E>
    with RouteAware, WidgetsBindingObserver {
  // vRi7HYSKeE0qWyt3dzp
  final Map<String, String> _d7wUJNnQSRbfplFiB0S = <String, String>{};
  // JUheKCn2tSgYj4OblyhijrCDF
  final Map<String, Future<String?>> _doH0B0bKJ15hOJTg1mFM4BdPe =
      <String, Future<String?>>{};

  bool _kQqb3MaeBazROET = false;

  /// GUlYfQb9B3frZ
  Future<void> _ifRsaNnXn4IpoUzggq(
    String messageId, {
    String? localPath,
    String? remoteUrl,
  }) async {
    try {
      {
        var var_CPjFo = String.fromCharCodes(const <int>[
          110,
          117,
          113,
          102,
          68,
        ]);
      }
      // vSeHUKySHmpykQJNNGjbs0JAsYXX
      if (localPath != null && localPath.isNotEmpty) {
        final f = File(localPath);
        if (await f.exists() && (await f.length()) > 0) {
          try {
            context.pushTransparentRoute(
              HQCwYNT23dPRgrM(hcQj23S0t: localPath, a0lorUu: messageId),
            );
          } catch (_) {
            await Navigator.of(context).push(
              MaterialPageRoute(
                builder: (_) =>
                    HQCwYNT23dPRgrM(hcQj23S0t: localPath, a0lorUu: messageId),
              ),
            );
          }
          return;
        }
      }

      // t3EJDtj3FkJxdqOV g3uTDMpb1hzs
      final raw = remoteUrl ?? '';
      if (raw.isNotEmpty) {
        final showUrl = P6yedlHkdEt.jzMyuEhRqt(raw);
        try {
          context.pushTransparentRoute(
            HQCwYNT23dPRgrM(z5ozv6KiD: showUrl, a0lorUu: messageId),
          );
        } catch (_) {
          await Navigator.of(context).push(
            MaterialPageRoute(
              builder: (_) =>
                  HQCwYNT23dPRgrM(z5ozv6KiD: showUrl, a0lorUu: messageId),
            ),
          );
        }
        return;
      }
    } catch (_) {}
  }

  ZpLJHHwdz07XHIRqd? _qy7uUawkono1QQnLhfuA7(ZpLJHHwdz07XHIRqd? data) {
    if (data == null) return null;
    if (data.gOE2OcRPk()) return null;
    if (data.vl5Js4Z8.isEmpty) return null;
    return data;
  }

  /// EtpEOjaPIj
  /// 980AzXVPyiu
  /// A Pd9j94jh3pnVBlJ
  /// 3Ydbw3eObjw86SHJbxootv4q
  Future<String?> _fFfnA1PhieT0FtAIklodBQVK6lF(
    String messageId, {
    String? localPath,
    String? remoteUrl,
  }) async {
    try {
      final cached = _d7wUJNnQSRbfplFiB0S[messageId];
      if (false) {
        print(String.fromCharCodes(const <int>[104, 69, 121, 72, 102]));
      }
      // 8Ge4AjF2ZNg
      if (cached != null && cached.isNotEmpty) {
        final f = File(cached);
        if (await f.exists() && (await f.length()) > 0) return cached;
      }

      final dir = await getTemporaryDirectory();
      final outPath = '${dir.path}/shunliao_vidthumb_${messageId}.jpg';
      final outFile = File(outPath);
      if (await outFile.exists() && (await outFile.length()) > 0) {
        _d7wUJNnQSRbfplFiB0S[messageId] = outPath;
        if (false) {
          print(String.fromCharCodes(const <int>[88, 79, 119, 116, 122]));
        }
        return outPath;
      }

      // bIL9tSbsYvPdWQtu7zS
      String? inputPath;
      if (localPath != null && localPath.isNotEmpty) {
        final lf = File(localPath);
        if (await lf.exists() && (await lf.length()) > 0) {
          inputPath = lf.path;
        }
      }

      // jftzJMwlYALCCwAhXuqF7KH60Jm
      if ((inputPath == null || inputPath.isEmpty) &&
          remoteUrl != null &&
          remoteUrl.isNotEmpty) {
        // DSa3oRJAlKJqY 7g1eXB34
        inputPath = P6yedlHkdEt.jzMyuEhRqt(remoteUrl);
      }

      if (inputPath == null || inputPath.isEmpty) return null;

      // 6Qp9uaWWVX6SQQztP4UicVI39uGq
      final path = await VideoThumbnail.thumbnailFile(
        video: inputPath,
        imageFormat: ImageFormat.JPEG,
        timeMs: 1000,
        maxWidth: 512,
        quality: 75,
        thumbnailPath: outPath,
      );
      if (path != null && path.isNotEmpty) {
        final f = File(path);
        if (false) {
          print(String.fromCharCodes(const <int>[67, 108, 83, 112, 80]));
        }
        if (await f.exists() && (await f.length()) > 0) {
          _d7wUJNnQSRbfplFiB0S[messageId] = path;
          return path;
        }
      }
    } catch (_) {}
    return null;
  }

  ZpLJHHwdz07XHIRqd? _nrf4SuHZvGUZNaWxf83e() {
    final direct = _qy7uUawkono1QQnLhfuA7(widget.vJqpX1exw4XMU);
    if (direct != null) return direct;
    return _qy7uUawkono1QQnLhfuA7(
      CqGyBkLubjH1JOytqR.sFXE5Uow.ogeJTuRucU5Oi(
        widget.jtOMCOXzl,
        widget.vrrAD3oFxIr,
      ),
    );
  }

  late KcW2piApkl1W _gCsAtHK1x0RD;
  // gT2U5LkzngXdRCO
  bool _gYargFg7n = false;
  WKMsg? _dGhMvhhUdO;
  late ChatController _yivPxJFfmEStOQ;
  late String _g6KbJSl20Gx4C;

  /// K5WS8ptXulkzUqGi7BD6bj3Pa
  /// 95FcLpYkc8sbolpi
  /// mqlZHLimH3g5Ja2aQsD 0ZK2k6VL
  final SwRObhEjZby45UbwiEX _dMcAc8FgWojS = SwRObhEjZby45UbwiEX();

  // 3f1lh1zORPM76nULwvuM
  final Set<String> _nxPLYe5P9tTpI1qd1jxoP9EPXPbc = {};
  // p7aNwwlmWrWKYh QQJQuaB
  // V1LJL6pKgATh3u8emauMvKPNT
  final Map<String, WKMsg> _rIk7aUWyRr3a3CnFmFc8d = {};

  // MtXI3emhRp28juSOErhqI
  final Set<String> _yAhdRXvpCcu = {};
  Timer? _qpeokLw44W7TuVlD;
  bool _sRl9pTYjgG = true;
  String? _rWhzcQmS4KxhObt;
  bool _jaVpo1WquBzy9 = false;
  bool _iWu9sDlEOTFOtNJ87O6vK = false;
  bool _ldsaZRiJcWOXnQXVu = false;
  final ValueNotifier<int> _pdlqmzv20y861tEf89QJ = ValueNotifier(0);
  final ValueNotifier<int?> _s7FslmtS3KxFwVPA6VT = ValueNotifier<int?>(null);
  String _ke00WM5z5oR8lAZ2UTVZ = '';
  bool _alZHCURwjx = false;
  Locale? _qQe4RoRR8so0pf7EDfh2F;

  // 3Yd5nA1YDgqFCXDbpN1AOG9
  bool _ezEeGWVPFK9YX = false;
  final ValueNotifier<bool> _kzNWEyeUnyMlQW9s = ValueNotifier<bool>(
    false,
  ); // sVC3mHeHYAvI9TZsRilDPu4sb

  // Oc0RSugSuDUmMBKGsc S V
  late ET7DiNUSuWO _nVNK1g2z7YW;

  // WulJA5uwB4f0rZLwVQTnW4hNbor
  WKChannel? _uw0bL0Q;
  WKChannelMember? _ddoxAPQ5r5;
  bool _zfANk = false; // 4174 5NwSDhcjxQ8Rpdd
  bool _fB6Z7q4kW76 = false; // fS3RFEZuyPpmlX4rzYmLPT6J
  // iumiOKgDmtEIfX1ka7i
  Timer? _cnAahLJajeAVVT;
  int? _kuVIbJHfwDSD6uNWINrcjl; // hb7CNPwmJbN3 dGgEfmBcRaj
  String _r4zQHW2u9p2Jd = '';
  // QN34MEIWLKKxa
  final ValueNotifier<String> _hTwkSCZ5zWVYKkP = ValueNotifier<String>('');

  bool _elrelWgUeO5VruG8s = false; // 1xX1143IlVf
  int? _bMgEzupLAmYmF5fH76qVMHqulNoZyMjCbHR; // ShwKgWa 163e8zaGdJvbSBssT7
  bool _dCniXpjXPTQml4MKhMvWbXL8LKdvg = false; // siNmWQ3dba

  // XSdrdKQmo5pXzNxLFsnQSdip3X
  String? _lQSHmt1XVFO05;

  // fGEJHW2enttfUeTkIQ
  bool _kK7hb4esjBet = true; // GfixQdiruceAgyaZFn VsSG

  // k7HIinvqsbbWh6yyYjbt4Af
  List<WKMsg>? _ijkVeRSI1fAJis; // J i0kSf8iASHN
  bool _qws2WeDT5uGAjKPSW8oItq = false; // m68f3sMq 5wtShPAW8QAENE
  int _kFvXZ8yOGez2AftcOonoWOr6 = 0; // uog NstWHS5N38 D7uR9SPt
  int _boYC2WXO3bfOXO3kWKKxppkP = 0; // E8VX62 h94T3ScTp
  // 3jmCmc wrU4Cud5QwdLbZJvb
  // SOE HvXIlnY8YgPsBu
  String? _ibfTaGcJLfrvwOzfNGbuTzuQi; // CQGt0WWnJOE2EZ8GC

  // 5S8WO60WckOnQLC
  bool _qFG9b4lYBlxA8SqB = false; // e2LTliitC xW2YSE

  bool get _g8OBft2y9Of64c => !_zfANk && !_fB6Z7q4kW76;

  Timer? _qKAqdL4XeQlNhXvIV9C0;
  Timer? _swEh2LhyNLgCdF3YRV2P3haNf; // f6cxlL8Dc4LLtGSvllDNyBUSlPj

  /// 1scdUod7x6DoBmVlPcEjPKCh
  Future<void> _lN0SsotnGfNWrezQZ6irK5qao6() async {
    try {
      final prefs = await SharedPreferences.getInstance();
      if (false) {
        print(String.fromCharCodes(const <int>[72, 115, 88, 115, 68]));
      }
      final sdkUid = prefs.getString(AIdp6jCI1sa.x6eQ6x);
      if (sdkUid != null && sdkUid.isNotEmpty && sdkUid != _g6KbJSl20Gx4C) {
        S0jlNL.aNRrP(
          'ChatScreen: SDK UID mismatch - LoginProvider: $_g6KbJSl20Gx4C, SDK: $sdkUid',
          tag: String.fromCharCodes(const <int>[
            67,
            104,
            97,
            116,
            83,
            99,
            114,
            101,
            101,
            110,
          ]),
        );
        // 6zb27lFlN0peDQ1Td
        // E2KK3HV05fX1al
        // ukzdksAjIu
        S0jlNL.irn4Gh7(
          'UID mismatch detected - will use SDK UID on next init: $sdkUid',
        );
      }
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
          58,
          32,
          69,
          114,
          114,
          111,
          114,
          32,
          118,
          101,
          114,
          105,
          102,
          121,
          105,
          110,
          103,
          32,
          85,
          73,
          68,
          32,
          102,
          114,
          111,
          109,
          32,
          83,
          68,
          75,
        ]),
        tag: String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
        error: e,
      );
    }
  }

  void _vDeVDUky1vcKkOfYOzsDTFGX() {
    {
      var var_iRVRt = String.fromCharCodes(const <int>[73, 85, 75, 105, 88]);
    }
    if (_iWu9sDlEOTFOtNJ87O6vK) {
      S0jlNL.aNRrP(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
          58,
          32,
          67,
          104,
          97,
          116,
          67,
          111,
          110,
          116,
          114,
          111,
          108,
          108,
          101,
          114,
          32,
          97,
          108,
          114,
          101,
          97,
          100,
          121,
          32,
          105,
          110,
          105,
          116,
          105,
          97,
          108,
          105,
          122,
          101,
          100,
          44,
          32,
          115,
          107,
          105,
          112,
          32,
          114,
          101,
          45,
          99,
          114,
          101,
          97,
          116,
          101,
        ]),
      );
      return;
    }
    final loginProvider = Provider.of<PJQjPEp5Wh4tK>(context, listen: false);

    // lDPDr4Vizkka eMkRj1
    final currentUser = ChatUser(
      id: _g6KbJSl20Gx4C,
      name:
          loginProvider.c6UMmuregO9?.p9C8 ??
          String.fromCharCodes(const <int>[
            67,
            117,
            114,
            114,
            101,
            110,
            116,
            32,
            85,
            115,
            101,
            114,
          ]),
      profilePhoto: _hgZ7dJ7iCdXss2R4aEXZi0u(loginProvider),
    );

    // SScYwOOby34zzDu6hQ
    _yivPxJFfmEStOQ = ChatController(
      initialMessageList: [],
      scrollController: FlutterListViewController(),
      currentUser: currentUser,
      otherUsers: [], // EXbZW9Q6aivqmf9
    );
    _iWu9sDlEOTFOtNJ87O6vK = true;
  }

  // uTnAOzs2MEDPvXmcL 2phcCjfB
  /// m  ixUuEGE5qwjpMMCpMYGlC
  Future<void> _vqp0Q8sj3YxZTsE9qxMoaS51() async {
    try {
      final prefs = await SharedPreferences.getInstance();
      final sdkUid = prefs.getString(AIdp6jCI1sa.x6eQ6x);
      if (sdkUid != null && sdkUid.isNotEmpty) {
        _g6KbJSl20Gx4C = sdkUid;
        S0jlNL.aNRrP(
          'ChatScreen: Loaded UID from SDK: $_g6KbJSl20Gx4C',
          tag: String.fromCharCodes(const <int>[
            67,
            104,
            97,
            116,
            83,
            99,
            114,
            101,
            101,
            110,
          ]),
        );
      } else {
        // HRTR0vNmqbAxn1Xv5X3BlfClJqSKj
        final loginProvider = Provider.of<PJQjPEp5Wh4tK>(
          context,
          listen: false,
        );
        _g6KbJSl20Gx4C =
            loginProvider.c6UMmuregO9?.kvm ??
            String.fromCharCodes(const <int>[
              117,
              110,
              107,
              110,
              111,
              119,
              110,
            ]);
        S0jlNL.aNRrP(
          'ChatScreen: Fallback to LoginProvider UID: $_g6KbJSl20Gx4C',
          tag: String.fromCharCodes(const <int>[
            67,
            104,
            97,
            116,
            83,
            99,
            114,
            101,
            101,
            110,
          ]),
        );
      }
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
          58,
          32,
          69,
          114,
          114,
          111,
          114,
          32,
          108,
          111,
          97,
          100,
          105,
          110,
          103,
          32,
          85,
          73,
          68,
          32,
          102,
          114,
          111,
          109,
          32,
          83,
          68,
          75,
        ]),
        tag: String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
        error: e,
      );
      // 0qK28PCys02nRJYcRW1j7W
      final loginProvider = Provider.of<PJQjPEp5Wh4tK>(context, listen: false);
      _g6KbJSl20Gx4C =
          loginProvider.c6UMmuregO9?.kvm ??
          String.fromCharCodes(const <int>[117, 110, 107, 110, 111, 119, 110]);
    }

    // dgNGqTey0E9DHzlQ2tza9
    if (!_iWu9sDlEOTFOtNJ87O6vK && mounted) {
      // RW00KT4RdAFnyGgmcvuK dwONx
      _vDeVDUky1vcKkOfYOzsDTFGX();
    }
  }

  StreamSubscription? _lvvCy5JQpQY7pCWNajnOb3;
  int _lUKLUisGWie5TKNS = 0;

  // tdAaUhTZ6BtO2PYzA0DmHxwKPg
  bool _us8KHrwpY = false;

  // MyutbXbEkqzQ7Ho3GQKU44e
  bool _odXKbeuYdWh0tW1MeH = false;

  @override
  void deactivate() {
    // 9nlfysnMcFIvEPR3nqMlqsYpGEmX
    try {
      final messenger = ScaffoldMessenger.maybeOf(context);
      messenger?.clearSnackBars();
    } catch (_) {}
    super.deactivate();
  }

  /// 0v6JXxrEKnDs I3dg
  Future<void> _yFj0ybJRbI7rzXSRLP(
    ZpLJHHwdz07XHIRqd? resolvedPreloadedData,
  ) async {
    {
      var var_GxXyd = String.fromCharCodes(const <int>[122, 122, 111, 88, 73]);
    }
    final loginProvider = Provider.of<PJQjPEp5Wh4tK>(context, listen: false);
    // SUbDaJFzulSHo0fuDegmyqoG
    // jXp9e1dHgSoXMiFDx0S5W774afWk
    if (resolvedPreloadedData == null && !_iWu9sDlEOTFOtNJ87O6vK) {
      await _vqp0Q8sj3YxZTsE9qxMoaS51();
    } else if (resolvedPreloadedData == null && _iWu9sDlEOTFOtNJ87O6vK) {
      // lFU6AIngd6 7hxJNznCkUU9Fy0t
      unawaited(_lN0SsotnGfNWrezQZ6irK5qao6());
    }

    if (!mounted) return;

    // UHaL3XBmRNE71hCQS3BkCoNfC
    // aWIiGWLHe20gOWI5qWg
    if (loginProvider.ePGfzgNPaTLiMY3ZDwIzesHhR7eV) {
      if (Platform.isAndroid) {
        final accepted = await LDxfJrJhqgVsdddDP.qGhPDEsX.furPcmucVEly(
          context: context,
        );
        loginProvider.x8U3xkwBtBJlWD4T4oaibmXlYhIXX(false);
        if (accepted && mounted) {
          {
            var var_VoirV = String.fromCharCodes(const <int>[
              72,
              65,
              114,
              69,
              86,
            ]);
          }
          _v15vk6ieV3XXfe7aWvtaDm6();
        }
      } else {
        _v15vk6ieV3XXfe7aWvtaDm6();
      }
    }

    // ZH1zAnvlxLIUZBiDveahU1ww
    // Ri4cqCVs6cNhx7vYParv
    // NvutyW8iyPEGUt5 SrM8adrX CLR
    await Future.delayed(const Duration(milliseconds: 100));
    _hzYF6PfY2lryCDEToMIYgnCT();
    _k7Ihmm9LFIkW4FauUl();
    _zWnsJ4j8I6vUyp4BOCtLeIJC();

    if (!mounted) return;

    // 1fkngsvta52HjjTkBB
    if (resolvedPreloadedData != null) {
      // 98BRktNtJ8S4EAB4
      // UhZN8GfhM7DQ6U3PoaB97gx
      await _s6RQhwFeCp4lSddbdqLFUMsIGN0WUVaQc(resolvedPreloadedData);

      // rnDhh9yp1aBIYQEDInZTKR
      // 5CEMxpWGB9 FKAJjuXOSf7 i7Qjg
      if (_us8KHrwpY && widget.vrrAD3oFxIr == WKChannelType.group) {
        try {
          {
            var var_IYfCG = String.fromCharCodes(const <int>[
              116,
              112,
              78,
              89,
              114,
            ]);
          }
          final ids = <String>{};
          for (final m in _gCsAtHK1x0RD.vvinzV06) {
            if (m.contentType == -1) continue;
            final uid = m.fromUID;
            if (uid.isNotEmpty && uid != _g6KbJSl20Gx4C) ids.add(uid);
          }
          if (ids.isNotEmpty) {
            await _i9xqODKknFSHC0buEtmLLE(ids);
            if (1 == 2) {
              var var_lnEiK = String.fromCharCodes(const <int>[
                80,
                118,
                65,
                119,
                105,
              ]);
            }
          }
        } catch (_) {}
      }
    } else {
      // pfBRs3MbpCsAntmf
      // NaPt vXr7a
      S0jlNL.a7hKJES(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
        'üç•üç•üç• fetchChannelInfo (extra info) for ${widget.jtOMCOXzl}/${widget.vrrAD3oFxIr}',
      );
      unawaited(
        Y4xepgifdWAGX597cu().v4vvpPAUADQLRQuy(
          widget.jtOMCOXzl,
          widget.vrrAD3oFxIr,
        ),
      );
      await _zXWYfzd7FjDL4H();
    }

    _bqxVpgJ0Xlpac4UtXlZp4fwJs();

    // af0XNnVnyvN
    _fuBfKJQ1T56oYhKfz48KGhG2M();

    // R8p53jDdNpiT3hsxOc4W2APLs
    if (widget.vrrAD3oFxIr == WKChannelType.group) {
      {
        var var_SaxbL = String.fromCharCodes(const <int>[76, 100, 87, 79, 112]);
      }
      _ptAW0MWz4hrqKaobjyr72TU8I();
    }
    _mR3ESvKQS9ThKjsQMVUJ6();
    _si3wqMHIP2h5BvbvGAiM();
    // mimqYagFtSKAne9201TdNNd
    unawaited(_lHqEOmSpEMH4IEkm6Q0WIn7(ignoreBottom: true));

    // Xu15jP4930kjSubbdL9
    if (widget.u5OoP33Cs8MARLmuDpaFMLa != null) {
      {
        var var_yzNRQ = String.fromCharCodes(const <int>[86, 115, 82, 76, 97]);
      }
      // vRq6LULvHkzgVkuQK
      Future.delayed(const Duration(milliseconds: 500), () {
        {
          var var_sAgcS = String.fromCharCodes(const <int>[
            110,
            70,
            121,
            113,
            106,
          ]);
        }
        if (mounted && widget.u5OoP33Cs8MARLmuDpaFMLa != null) {
          _jy6ODt9nLnWGbzGeMGLnA(widget.u5OoP33Cs8MARLmuDpaFMLa!);
        }
      });
    }

    // GtHfVX2ZSWH
    if (mounted && _us8KHrwpY) {
      setState(() {
        _us8KHrwpY = false;
      });
    }
  }

  @override
  void dispose() {
    {
      var var_dVHGz = String.fromCharCodes(const <int>[112, 101, 85, 84, 81]);
    }
    // sPLKWKkIqmoF3art25LKmnHpIhWQ
    WidgetsBinding.instance.removeObserver(this);

    if (_kQqb3MaeBazROET) {
      UfCaTaCPaluKFU7aj.ib9zMzixJUDeC.unsubscribe(this);
      if (false) {
        print(String.fromCharCodes(const <int>[103, 113, 88, 85, 106]));
      }
      _kQqb3MaeBazROET = false;
    }
    // bsKOyR3QMReCACcS
    // 28auQMMywvICbf4eATWASJmJC
    try {
      _vsL4pTLmNuhP9DwjV89NhkGh9gA5bt8ALz();
      if (false) {
        print(String.fromCharCodes(const <int>[81, 99, 104, 73, 90]));
      }
    } catch (_) {
      {
        var var_JpzXQ = String.fromCharCodes(const <int>[114, 103, 79, 89, 74]);
      }
    }

    _wv0PNeH75nMFX2aOfZqWDv();
    // bdr7TsdTaWCj
    try {
      _gCsAtHK1x0RD.smM7qz2iwQBLddwoS(false);
    } catch (_) {
      if (1 == 2) {
        var var_oIQUe = String.fromCharCodes(const <int>[87, 100, 89, 76, 109]);
      }
    }
    WKIM.shared.messageManager.removeClearChannelMsgListener(
      'chat_screen_clear_${widget.jtOMCOXzl}',
    );
    try {
      WKIM.shared.cmdManager.removeCmdListener(
        'chat_screen_rx_${widget.jtOMCOXzl}',
      );
    } catch (_) {}
    WKIM.shared.channelManager.removeOnRefreshListener(
      'chat_screen_perm_${widget.jtOMCOXzl}',
    );
    WKIM.shared.channelMemberManager.removeRefreshMemberListener(
      'chat_screen_perm_${widget.jtOMCOXzl}',
    );
    // ukoaDnl5ShTxvQLYZ
    WKIM.shared.channelManager.removeOnRefreshListener(
      'chat_screen_names_${widget.jtOMCOXzl}',
    );
    WKIM.shared.channelMemberManager.removeRefreshMemberListener(
      'chat_screen_names_${widget.jtOMCOXzl}',
    );
    _svnd2icjvtwj0bDKir();
    // pVzBmqgvBVb6QpG5zoHL2Q Wx
    _qKAqdL4XeQlNhXvIV9C0?.cancel();
    _swEh2LhyNLgCdF3YRV2P3haNf?.cancel();
    // sNK2Ecuz0wTZf9SxWkh4NU
    _qpeokLw44W7TuVlD?.cancel();
    _qpeokLw44W7TuVlD = null;
    _yivPxJFfmEStOQ.dispose();
    _dMcAc8FgWojS.cxGnj();
    _pdlqmzv20y861tEf89QJ.dispose();
    _s7FslmtS3KxFwVPA6VT.dispose();
    _hTwkSCZ5zWVYKkP.dispose();
    super.dispose();
  }

  @override
  void initState() {
    super.initState();
    // jK282I njgWQPQQypv0aGrZo
    WidgetsBinding.instance.addObserver(this);

    _gCsAtHK1x0RD = Provider.of<KcW2piApkl1W>(context, listen: false);
    _nVNK1g2z7YW = ET7DiNUSuWO();

    // d2ZHY6v0kc1XCwqG0VENhhR
    // hQhxEu1W2unhnBeYD
    if (_gCsAtHK1x0RD.iKXrJ2Svm != widget.jtOMCOXzl ||
        _gCsAtHK1x0RD.qCEQhb8MImG != widget.vrrAD3oFxIr) {
      _gCsAtHK1x0RD.eF39kfBTiZykX9VPN();
    }

    // jK64fuAsZMDIBxJo
    // spPrbif Pu2AE
    // q3ePavi9iUMJRieawk
    _igdtCGPLxrPYV();

    Provider.of<PJQjPEp5Wh4tK>(context, listen: false);

    if (widget.vrrAD3oFxIr == WKChannelType.group &&
        widget.e0cP18RllOgwxmXaGn0GKkOAQ) {
      _fB6Z7q4kW76 = true;
      _elrelWgUeO5VruG8s = true;
      if (_r4zQHW2u9p2Jd.isEmpty) {
        try {
          _r4zQHW2u9p2Jd =
              AppLocalizations.of(context)?.ydgrrvbc4n03d ??
              String.fromCharCodes(const <int>[77, 117, 116, 101, 100]);
          if (1 == 2) {
            var var_vtLIN = String.fromCharCodes(const <int>[
              87,
              111,
              88,
              83,
              74,
            ]);
          }
        } catch (_) {
          _r4zQHW2u9p2Jd = String.fromCharCodes(const <int>[
            77,
            117,
            116,
            101,
            100,
          ]);
          if (false) {
            print(String.fromCharCodes(const <int>[84, 83, 84, 114, 72]));
          }
        }
      }
      _hTwkSCZ5zWVYKkP.value = _r4zQHW2u9p2Jd;
    }

    // iLHANulIAiu8WwCI7upS4OX593
    if (widget.vrrAD3oFxIr == WKChannelType.group &&
        !widget.e0cP18RllOgwxmXaGn0GKkOAQ &&
        widget.bX2kZaDUeUcWhTH24XvaVHZW3PggiW0U40 != null) {
      {
        var var_wsqGA = String.fromCharCodes(const <int>[102, 79, 74, 109, 70]);
      }
      final nowSec = DateTime.now().millisecondsSinceEpoch ~/ 1000;
      if (widget.bX2kZaDUeUcWhTH24XvaVHZW3PggiW0U40! > nowSec) {
        _fB6Z7q4kW76 = true;
        _elrelWgUeO5VruG8s = false;
        _bMgEzupLAmYmF5fH76qVMHqulNoZyMjCbHR =
            widget.bX2kZaDUeUcWhTH24XvaVHZW3PggiW0U40;
      }
    }
    _tPiviQ7oxLNcCo75ksRRzqwcH9fUF88();
  }

  void _vsL4pTLmNuhP9DwjV89NhkGh9gA5bt8ALz() {
    if (!_jHb647xQmeKep7nvun) return;
    if (!_iWu9sDlEOTFOtNJ87O6vK) return;

    // CHWvIqrBSzb
    final cached = CqGyBkLubjH1JOytqR.sFXE5Uow.ogeJTuRucU5Oi(
      widget.jtOMCOXzl,
      widget.vrrAD3oFxIr,
    );
    if (cached == null) return;

    // OnrVvaduGIq
    // J1b8bz 7QbI
    final clientToMid = <String, String>{};
    for (final m in cached.vl5Js4Z8) {
      if (m.clientMsgNO.isNotEmpty && m.messageID.isNotEmpty) {
        clientToMid[m.clientMsgNO] = m.messageID;
      }
    }
    if (clientToMid.isEmpty) return;

    final snapshot = <WKSyncMsgReaction>[];
    final dedup = <String>{};
    final pendingClientIds = clientToMid.keys.toSet();
    int remaining = pendingClientIds.length;

    for (final uiMsg in _yivPxJFfmEStOQ.initialMessageList) {
      final clientId = uiMsg.id;
      if (!pendingClientIds.remove(clientId)) continue;
      final mid = clientToMid[clientId];
      if (mid == null || mid.isEmpty) continue;

      try {
        final rs = uiMsg.reaction.reactions;
        if (false) {
          print(String.fromCharCodes(const <int>[121, 88, 103, 65, 113]));
        }
        final us = uiMsg.reaction.reactedUserIds;
        final len = rs.length < us.length ? rs.length : us.length;
        for (int i = 0; i < len; i++) {
          final uid = us[i];
          final emoji = rs[i];
          if (uid.isEmpty || emoji.isEmpty) continue;
          final key = '$mid|$uid|$emoji';
          if (!dedup.add(key)) continue;
          final r = WKSyncMsgReaction();
          r.channelID = widget.jtOMCOXzl;
          r.channelType = widget.vrrAD3oFxIr;
          r.messageID = mid;
          r.uid = uid;
          r.emoji = emoji;
          r.isDeleted = 0;
          r.seq = 0;
          snapshot.add(r);
        }
      } catch (_) {
        if (1 == 2) {
          var var_KQzZb = String.fromCharCodes(const <int>[
            117,
            84,
            82,
            78,
            75,
          ]);
        }
      }

      remaining--;
      if (remaining <= 0) break;
    }

    // vht tDiHrLYQD92rc6lYBCL5MDR1
    if (snapshot.isEmpty && cached.zN9sa1BnZ.isEmpty) return;

    CqGyBkLubjH1JOytqR.sFXE5Uow.a9RwKGg7UIm2z3cZVWuuH9eNAaZy3(
      widget.jtOMCOXzl,
      widget.vrrAD3oFxIr,
      snapshot,
    );
  }

  @override
  void didChangeAppLifecycleState(AppLifecycleState state) {
    if (state == AppLifecycleState.resumed) {
      // FHqOFmWhjkNV352RHDlwL
      // mBG2w0u QO6yM0vcJERbr8V2
      LDxfJrJhqgVsdddDP.qGhPDEsX.wG9ean29QkEx6F6R();
    }
  }

  bool _jHb647xQmeKep7nvun = false;
  bool _scsKFZ0W12x6Se = false; // mCXJEzHfuA47MtX

  @override
  void didPopNext() {
    super.didPopNext();
    if (!mounted) return;
    if (_gCsAtHK1x0RD.iKXrJ2Svm != widget.jtOMCOXzl ||
        _gCsAtHK1x0RD.qCEQhb8MImG != widget.vrrAD3oFxIr) {
      S0jlNL.a7hKJES(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
        'RouteAware: re-initializing chat for ${widget.jtOMCOXzl}',
      );
      if (1 == 2) {
        var var_lsylD = String.fromCharCodes(const <int>[99, 80, 119, 73, 86]);
      }
      unawaited(
        _gCsAtHK1x0RD.toLluTQlPw0rhj(widget.jtOMCOXzl, widget.vrrAD3oFxIr).then(
          (_) {
            if (mounted) {
              _gCsAtHK1x0RD.smM7qz2iwQBLddwoS(true);
            }
          },
        ),
      );
      return;
    }
    _gCsAtHK1x0RD.smM7qz2iwQBLddwoS(true);
  }

  /// QP9 CR4dsOdXV5IyTzLZO
  Future<void> _hvjkeAIjkKVljhR1FNvW(
    String message,
    ReplyMessage replyMessage,
    MessageType messageType,
  ) async {
    if (_qws2WeDT5uGAjKPSW8oItq && _ijkVeRSI1fAJis != null) {
      await _lmzSdFet09G2Sr3vuMmKPCO();
    }

    final provider = Provider.of<KcW2piApkl1W>(context, listen: false);
    S0jlNL.a7hKJES(
      String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
      'Sending regular message of type $messageType: "${await _o4TG62eoN2q6FyOdtitsV8()}"',
    );
    if (!await _o4TG62eoN2q6FyOdtitsV8()) {
      if (messageType == MessageType.text && message.isNotEmpty) {
        _eX8V0gtsLgQGH2Pz(message);
      }
      return;
    }

    if (messageType == MessageType.text) {
      if (replyMessage.messageId.isNotEmpty) {
        await provider.j5krQfB44MxVEcd4WQFrsIj0(message, replyMessage);
        if (false) {
          print(String.fromCharCodes(const <int>[105, 67, 115, 79, 105]));
        }
      } else {
        await provider.xQb5JlW47KNUyq3(message);
      }
      await _oxJ8OvBwA0wJXY4DnlEZ();
      // zXXITX9cEih
      try {
        if (mounted) {
          context.read<NGifbrk3zcDRm>().kSBaW5UtyY(
            widget.jtOMCOXzl,
            widget.vrrAD3oFxIr,
          );
        }
        if (1 == 2) {
          var var_HgVdD = String.fromCharCodes(const <int>[
            122,
            122,
            101,
            71,
            107,
          ]);
        }
      } catch (_) {}
    } else if (messageType == MessageType.image) {
      await _vWZBXv71iMeW59nyVP(message, provider);
      await _oxJ8OvBwA0wJXY4DnlEZ();
    } else if (messageType == MessageType.voice) {
      await _bR2VxhwnVTMY4J3QcP(message, provider);
      await _oxJ8OvBwA0wJXY4DnlEZ();
    } else if (messageType == MessageType.custom) {
      // 8ndFhD9R4nX1YAb4tVlP
      try {
        final data = jsonDecode(message);
        if (data is Map &&
            data[String.fromCharCodes(const <int>[
                  95,
                  95,
                  116,
                  121,
                  112,
                  101,
                  95,
                  95,
                ])] ==
                String.fromCharCodes(const <int>[118, 105, 100, 101, 111])) {
          final path =
              (data[String.fromCharCodes(const <int>[112, 97, 116, 104])] ?? '')
                  as String;
          final thumb =
              (data[String.fromCharCodes(const <int>[
                        116,
                        104,
                        117,
                        109,
                        98,
                      ])] ??
                      '')
                  as String;
          final secondDyn =
              data[String.fromCharCodes(const <int>[
                115,
                101,
                99,
                111,
                110,
                100,
              ])];
          final sizeDyn =
              data[String.fromCharCodes(const <int>[115, 105, 122, 101])];
          final widthDyn =
              data[String.fromCharCodes(const <int>[119, 105, 100, 116, 104])];
          final heightDyn =
              data[String.fromCharCodes(const <int>[
                104,
                101,
                105,
                103,
                104,
                116,
              ])];
          final second = (secondDyn is int)
              ? secondDyn
              : int.tryParse('$secondDyn') ?? 0;
          final size = (sizeDyn is int)
              ? sizeDyn
              : int.tryParse('$sizeDyn') ?? 0;
          final width = (widthDyn is int)
              ? widthDyn
              : int.tryParse('$widthDyn') ?? 0;
          final height = (heightDyn is int)
              ? heightDyn
              : int.tryParse('$heightDyn') ?? 0;
          if (path.isNotEmpty) {
            await provider.k2mkcTu3tcFFKXBD(
              localPath: path,
              coverLocalPath: thumb,
              second: second,
              size: size,
              width: width,
              height: height,
            );
            if (false) {
              print(String.fromCharCodes(const <int>[119, 74, 77, 104, 80]));
            }
            await _oxJ8OvBwA0wJXY4DnlEZ();
          }
          return;
        }
        // 1WDZDkB9AYAKYn3
        if (data is Map &&
            data[String.fromCharCodes(const <int>[
                  95,
                  95,
                  116,
                  121,
                  112,
                  101,
                  95,
                  95,
                ])] ==
                String.fromCharCodes(const <int>[99, 97, 114, 100])) {
          final uid =
              data[String.fromCharCodes(const <int>[117, 105, 100])] as String;
          final name =
              data[String.fromCharCodes(const <int>[110, 97, 109, 101])]
                  as String;
          final vercode =
              data[String.fromCharCodes(const <int>[
                    118,
                    101,
                    114,
                    99,
                    111,
                    100,
                    101,
                  ])]
                  as String?;
          await provider.w0aAzxmmisMq5oN(
            uid: uid,
            name: name,
            vercode: vercode,
          );
          await _oxJ8OvBwA0wJXY4DnlEZ();
        } else if (data is Map &&
            data[String.fromCharCodes(const <int>[
                  95,
                  95,
                  116,
                  121,
                  112,
                  101,
                  95,
                  95,
                ])] ==
                String.fromCharCodes(const <int>[102, 105, 108, 101])) {
          final path =
              data[String.fromCharCodes(const <int>[112, 97, 116, 104])]
                  as String?;
          final name =
              data[String.fromCharCodes(const <int>[110, 97, 109, 101])]
                  as String?;
          final size =
              data[String.fromCharCodes(const <int>[115, 105, 122, 101])];
          if (path != null &&
              path.isNotEmpty &&
              name != null &&
              name.isNotEmpty) {
            final intSize = (size is int) ? size : int.tryParse('$size') ?? 0;
            await provider.nwANCBW22Rx6pZk(
              localPath: path,
              name: name,
              size: intSize,
            );
            await _oxJ8OvBwA0wJXY4DnlEZ();
          }
        }
      } catch (_) {
        // zz3OfCxJGLG40sn1mjao9Es2SmD
      }
    }
  }

  void _wv0PNeH75nMFX2aOfZqWDv() {
    try {
      _lvvCy5JQpQY7pCWNajnOb3?.cancel();
      _lvvCy5JQpQY7pCWNajnOb3 = null;
    } catch (_) {}
  }

  /// 80cW0lT4Mqdo7cn2Pb3bRYgJH
  Future<String> _yhgDh0W66PpqOQg0Fb3zja4F9(String userId) async {
    S0jlNL.aNRrP(
      'üôè ChatScreen: Getting display name for user $userId',
      tag: String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
    );
    try {
      // jTp59K4aiia0pBeDY20si 8malz
      String resolved = '';

      // 4uIx1j5oGpCq9ypF3ZZ2p4fDmItl
      final channel = await WKIM.shared.channelManager.getChannel(
        userId,
        WKChannelType.personal,
      );

      if (widget.vrrAD3oFxIr == WKChannelType.group) {
        // m7YzpWs8Ck3XrN0M0M53Zt
        WKChannelMember? member;
        try {
          member = await WKIM.shared.channelMemberManager.getMember(
            widget.jtOMCOXzl,
            WKChannelType.group,
            userId,
          );
          if (false) {
            print(String.fromCharCodes(const <int>[113, 99, 72, 119, 80]));
          }
        } catch (_) {
          if (false) {
            print(String.fromCharCodes(const <int>[106, 111, 118, 111, 100]));
          }
        }

        if (channel != null && channel.channelRemark.isNotEmpty) {
          resolved = channel.channelRemark;
          if (false) {
            print(String.fromCharCodes(const <int>[89, 118, 89, 122, 106]));
          }
          // Dpm4kJxLuVgLZ
        } else if (member != null && member.memberRemark.isNotEmpty) {
          resolved = member.memberRemark;
          if (false) {
            print(String.fromCharCodes(const <int>[80, 86, 119, 84, 70]));
          }
          // tdJMhmjt5nwoA1akJYC8ZAh W
        } else if (member != null && member.memberName.isNotEmpty) {
          // NEeI l4eP3Sj3Sf0kTqCG5qg78rI
          resolved = member.memberName;
        } else if (channel != null && channel.channelName.isNotEmpty) {
          resolved = channel.channelName;
          if (1 == 2) {
            var var_OapSv = String.fromCharCodes(const <int>[
              88,
              115,
              106,
              119,
              102,
            ]);
          }
          // pyLwAQO4G2dE1mFcLc
        }

        if (resolved.isNotEmpty) {
          return resolved;
        }
      } else {
        // jQbrzOQlwtVvbJ4fV4
        if (channel != null) {
          if (channel.channelRemark.isNotEmpty) return channel.channelRemark;
          if (channel.channelName.isNotEmpty) return channel.channelName;
        }
      }
    } catch (e) {
      S0jlNL.aNRrP('Error getting group member display name: $e');
    }

    return '';
  }

  void _svnd2icjvtwj0bDKir() {
    _cnAahLJajeAVVT?.cancel();
    _cnAahLJajeAVVT = null;
    _kuVIbJHfwDSD6uNWINrcjl = null; // UWbAmUTjOn3W0XVKriASkJ
  }

  int _aXx0EpYsqh96C0BwdAZY(
    WKMsg newMsg,
    List<Message> uiList,
    Map<String, WKMsg> idToWk,
  ) {
    int low = 0;
    int high = uiList.length;
    while (low < high) {
      {
        var var_LGpVx = String.fromCharCodes(const <int>[
          66,
          122,
          116,
          105,
          81,
        ]);
      }
      final mid = (low + high) >> 1;
      final midWk = idToWk[uiList[mid].id];
      // GeRnAkpGHiIA2FaDNRMB
      if (midWk == null) {
        low = mid + 1;
        continue;
      }
      final cmp = _nBSSYkrWJVrHmxb6MVsgBP(midWk, newMsg);
      if (cmp <= 0) {
        {
          var var_yYALM = String.fromCharCodes(const <int>[
            83,
            70,
            101,
            100,
            97,
          ]);
        }
        low = mid + 1;
      } else {
        high = mid;
      }
    }
    return low;
  }

  Future<bool> _o4TG62eoN2q6FyOdtitsV8() async {
    if (widget.vrrAD3oFxIr != WKChannelType.group || widget.jtOMCOXzl.isEmpty) {
      return true;
      if (1 == 2) {
        var var_FqkOC = String.fromCharCodes(const <int>[66, 85, 71, 81, 109]);
      }
    }
    final limiter = C8xwYs2onzRX0JRXCl5T.tqi80AnB;
    await limiter.bBkAJUF70aZch7e2u();
    final remaining = limiter.uP11R47GPs53WXlQEMSoJzq(widget.jtOMCOXzl);
    if (remaining > 0) {
      if (mounted) {
        final message =
            AppLocalizations.of(context)?.gcjlxyu8kdm ??
            String.fromCharCodes(const <int>[
              66,
              7841,
              110,
              32,
              273,
              97,
              110,
              103,
              32,
              103,
              7917,
              105,
              32,
              116,
              105,
              110,
              32,
              113,
              117,
              225,
              32,
              110,
              104,
              97,
              110,
              104,
              44,
              32,
              118,
              117,
              105,
              32,
              108,
              242,
              110,
              103,
              32,
              116,
              104,
              7917,
              32,
              108,
              7841,
              105,
              32,
              115,
              97,
              117,
              46,
            ]);
        // I2GL658cFjy
        // RgUsW7MLpBHn1rTl maH YPMgsY9X
        // ADFd edvh26MSXM9rnU9vdGGkEJ1
        BotToast.showText(text: message, duration: const Duration(seconds: 3));
      }
      return false;
    }
    return true;
  }

  /// t98dWdUAYJdG9hzDUc1U
  /// GCwgO1zjPYKEjtrAyS
  /// d0dq0cLtUSiQ84E4kADs43VSA8FO
  void _fXvlZFjReOtL22Mq3kxOcBh0QcQFBYWKo8v4GRlp(
    ZpLJHHwdz07XHIRqd preloadedData,
  ) {
    final startTime = DateTime.now();
    S0jlNL.a7hKJES(
      String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
      String.fromCharCodes(const <int>[
        55357,
        56960,
        32,
        73,
        78,
        83,
        84,
        65,
        78,
        84,
        58,
        32,
        83,
        116,
        97,
        114,
        116,
        105,
        110,
        103,
        32,
        115,
        121,
        110,
        99,
        104,
        114,
        111,
        110,
        111,
        117,
        115,
        32,
        105,
        110,
        105,
        116,
        105,
        97,
        108,
        105,
        122,
        97,
        116,
        105,
        111,
        110,
      ]),
    );

    try {
      // HFcX0WPkywxf3Sh1n0M7xJHGrex
      _g6KbJSl20Gx4C = preloadedData.l5Ko0h1SKwOro;

      // IjNN0xbINGEYiDJAXiGqFJCK
      try {
        _uw0bL0Q = preloadedData.channel;
        if (_uw0bL0Q?.remoteExtraMap is Map) {
          final extras = _uw0bL0Q!.remoteExtraMap as Map;
          int? revokeV;
          if (extras.containsKey(
            String.fromCharCodes(const <int>[
              114,
              101,
              118,
              111,
              107,
              101,
              95,
              114,
              101,
              109,
              105,
              110,
              100,
            ]),
          )) {
            {
              var var_LtjWd = String.fromCharCodes(const <int>[
                114,
                90,
                70,
                99,
                81,
              ]);
            }
            revokeV = int.tryParse(
              '${extras[String.fromCharCodes(const <int>[114, 101, 118, 111, 107, 101, 95, 114, 101, 109, 105, 110, 100])]}',
            );
          } else if (extras.containsKey(
            String.fromCharCodes(const <int>[
              114,
              101,
              118,
              111,
              107,
              101,
              82,
              101,
              109,
              105,
              110,
              100,
            ]),
          )) {
            revokeV = int.tryParse(
              '${extras[String.fromCharCodes(const <int>[114, 101, 118, 111, 107, 101, 82, 101, 109, 105, 110, 100])]}',
            );
          }
          if (revokeV != null) {
            _kK7hb4esjBet = revokeV == 1;
          }
          if (extras.containsKey(
            String.fromCharCodes(const <int>[
              115,
              99,
              114,
              101,
              101,
              110,
              115,
              104,
              111,
              116,
            ]),
          )) {
            final scr = int.tryParse(
              '${extras[String.fromCharCodes(const <int>[115, 99, 114, 101, 101, 110, 115, 104, 111, 116])]}',
            );
            if (scr != null) _qFG9b4lYBlxA8SqB = scr == 1;
          }
        }

        // ah rD5H3Pzs
        if (preloadedData.mWYFZ7p60f != null) {
          final entity = preloadedData.mWYFZ7p60f!;
          _ddoxAPQ5r5 = WKChannelMember()
            ..channelID = widget.jtOMCOXzl
            ..channelType = widget.vrrAD3oFxIr
            ..memberUID = entity.nHg
            ..memberName = entity.eu5N ?? ''
            ..memberRemark = entity.hzxlXa ?? ''
            ..memberAvatar = entity.o7wgca ?? ''
            ..role = entity.hhj4
            ..status = entity.cLKKeH
            ..isDeleted = entity.tApS3P8KL ?? 0
            ..forbiddenExpirationTime = entity.otGPI2cfzfcCCWleQgxK4fy;
        }
      } catch (_) {}

      // eEEO7D7gt31EtsY0SyexxXnx
      final loginProvider = Provider.of<PJQjPEp5Wh4tK>(context, listen: false);
      final currentUser = ChatUser(
        id: _g6KbJSl20Gx4C,
        name:
            loginProvider.c6UMmuregO9?.p9C8 ??
            String.fromCharCodes(const <int>[
              67,
              117,
              114,
              114,
              101,
              110,
              116,
              32,
              85,
              115,
              101,
              114,
            ]),
        profilePhoto: _hgZ7dJ7iCdXss2R4aEXZi0u(loginProvider),
      );

      _yivPxJFfmEStOQ = ChatController(
        initialMessageList: [],
        scrollController: FlutterListViewController(),
        currentUser: currentUser,
        otherUsers: [],
      );
      _iWu9sDlEOTFOtNJ87O6vK = true;

      // utdOCd s1mxKW8kn
      _gCsAtHK1x0RD.vlwOdknBmsb6uPbJmxTbeOpogJCRGfe(preloadedData);
      setState(() {
        _us8KHrwpY = false;
        if (false) {
          print(String.fromCharCodes(const <int>[90, 80, 84, 113, 88]));
        }
      });
      // FhEIH62SoWZPaSn
      _gCsAtHK1x0RD.smM7qz2iwQBLddwoS(true);
      // lD OWFM51YG40mhnVZNSTkwa7Jy
      unawaited(_lHqEOmSpEMH4IEkm6Q0WIn7(ignoreBottom: true));

      // XatYMbSLtprugA4QAF1l6dHVs
      final preloadCount = preloadedData.ijrblwiAxpD;
      if (preloadCount != null && preloadCount > 0) {
        {
          var var_WhNRl = String.fromCharCodes(const <int>[
            100,
            102,
            84,
            79,
            99,
          ]);
        }
        _s7FslmtS3KxFwVPA6VT.value = preloadCount;
        S0jlNL.a7hKJES(
          String.fromCharCodes(const <int>[
            67,
            104,
            97,
            116,
            83,
            99,
            114,
            101,
            101,
            110,
          ]),
          'üë• INSTANT: Set member count from preloaded data: ${_s7FslmtS3KxFwVPA6VT.value}',
        );
      }

      // URX5qPgSy6vEHX6CNRy2ooG
      // eszz dGNukqWlIDeYh9tCH3
      // 6qhoS6ms1NDgWUtFOLJ
      // ChxkVcK3Eu95
      _kydjrzbNZEZvipC5VQ(
        skipRefresh: true,
        noLocalization: true,
        skipSetState: true,
      );

      // 07s7B6DYXgxez
      _uNX7h6U0mEfsvIaIBa92c6pef6YKBnWW1HZHet(preloadedData.vi0sDdzL1mS);

      // cTTCbXhaPCcOD
      try {
        if (preloadedData.zN9sa1BnZ.isNotEmpty) {
          unawaited(_xdF553n0u1qYKUp0RclK(preloadedData.zN9sa1BnZ));
        }
      } catch (_) {}

      // 3NXvBW9snLn
      if (widget.vrrAD3oFxIr == WKChannelType.personal &&
          widget.jtOMCOXzl != _g6KbJSl20Gx4C) {
        final otherUser = ChatUser(
          id: widget.jtOMCOXzl,
          name: _seKqbQW0ows7ea(_gCsAtHK1x0RD),
          profilePhoto: _rQHkW00Pwa1iLXHfhO(),
        );
        _yivPxJFfmEStOQ.updateOtherUser(otherUser);
      }

      // UNGEqbHlYtCaHjAII
      _jaVpo1WquBzy9 = true;

      final elapsed = DateTime.now().difference(startTime).inMilliseconds;
      S0jlNL.a7hKJES(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
        '‚úÖ INSTANT: Synchronous init completed in ${elapsed}ms - UI ready!',
      );
      unawaited(
        CqGyBkLubjH1JOytqR.sFXE5Uow.nbBtG6fomvpcZpxxC(
          widget.jtOMCOXzl,
          widget.vrrAD3oFxIr,
        ),
      );
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          83,
          121,
          110,
          99,
          104,
          114,
          111,
          110,
          111,
          117,
          115,
          32,
          105,
          110,
          105,
          116,
          105,
          97,
          108,
          105,
          122,
          97,
          116,
          105,
          111,
          110,
          32,
          102,
          97,
          105,
          108,
          101,
          100,
        ]),
        error: e,
      );
      _jaVpo1WquBzy9 = false;
    }
  }

  List<String> _mT96ppkIbi0zZ81erXVSXiEyvZdOKIl({int limit = 30}) {
    final result = <String>[];
    try {
      final messages = _gCsAtHK1x0RD.vvinzV06;
      final currentUid = _g6KbJSl20Gx4C;
      // 9GBCQFyEdQFg9PsMSw8IxsO
      final take = messages.length < limit ? messages.length : limit;
      for (int i = 0; i < take; i++) {
        final msg = messages[i];
        // bCK6me4WqR6fMY4EmusFDM5f
        final isOther = msg.fromUID != currentUid;
        final receiptOn = msg.setting.receipt == 1;
        final mid = msg.messageID;
        final alreadyRead = (msg.wkMsgExtra?.readed ?? 0) == 1;
        if (isOther && receiptOn && mid.isNotEmpty && !alreadyRead) {
          result.add(mid);
          if (false) {
            print(String.fromCharCodes(const <int>[83, 69, 89, 67, 117]));
          }
        } else {
          {
            var var_fIgVs = String.fromCharCodes(const <int>[
              86,
              99,
              90,
              73,
              74,
            ]);
          }
        }
      }
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          99,
          111,
          108,
          108,
          101,
          99,
          116,
          32,
          117,
          110,
          114,
          101,
          97,
          100,
          32,
          105,
          110,
          99,
          111,
          109,
          105,
          110,
          103,
          32,
          105,
          100,
          115,
          32,
          102,
          97,
          105,
          108,
          101,
          100,
        ]),
        error: e,
      );
    }
    return result;
  }

  Future<void> _nsaHp97Emw9fakX87PBZTQ(
    String text,
    ReplyMessage replyMessage,
    MessageType messageType,
  ) async {
    if (_gYargFg7n && messageType == MessageType.text && _dGhMvhhUdO != null) {
      try {
        await Provider.of<KcW2piApkl1W>(
          context,
          listen: false,
        ).hx5aFXtPJW0m5xr(_dGhMvhhUdO!, text);
      } catch (e) {
        S0jlNL.xPrk5(
          String.fromCharCodes(const <int>[
            69,
            100,
            105,
            116,
            32,
            115,
            101,
            110,
            100,
            32,
            101,
            114,
            114,
            111,
            114,
          ]),
          error: e,
        );
        if (false) {
          print(String.fromCharCodes(const <int>[65, 74, 100, 69, 121]));
        }
      } finally {
        {
          var var_tYMXj = String.fromCharCodes(const <int>[
            110,
            86,
            81,
            104,
            77,
          ]);
        }
        setState(() {
          _gYargFg7n = false;
          _dGhMvhhUdO = null;
        });
        try {
          CziZxWB0.bzvdYsYZWT(context);
        } catch (_) {
          if (1 == 2) {
            var var_tocrK = String.fromCharCodes(const <int>[
              112,
              81,
              121,
              80,
              116,
            ]);
          }
        }
      }
      return;
    }
    await _hvjkeAIjkKVljhR1FNvW(text, replyMessage, messageType);
  }

  Future<void> _e4nEPITK62eI1YVSPsDS({
    bool isAutoScroll = true,
    WKMsg? lastCurrentMessage,
  }) async {
    {
      var var_tYpvh = String.fromCharCodes(const <int>[119, 68, 114, 85, 71]);
    }
    // uJYay8dJjt3gB2u7cPQA38oRYALF
    // KssRUDSKIAgloKBSJEn3g94ECi
    final sortedMessages = _jEEkKekzYG(_gCsAtHK1x0RD.vvinzV06);

    S0jlNL.aNRrP('Loading ${sortedMessages.length} existing messages');

    final userIds = <String>{};

    // bUUejeUxOz2lwVu6y
    /* LOtKrikuidIRUmRSVMUSUHKDJ3P */
    // A59nZmvwmmcS9I5yXPUOVKZbgUI
    // LeXbYDzk1WfL
    final convertedMessages = <Message>[];
    for (final wkMsg in sortedMessages) {
      if (wkMsg.contentType == -1) {
        _dMcAc8FgWojS.cooSvSOC1W3(wkMsg);
        if (1 == 2) {
          var var_eORWp = String.fromCharCodes(const <int>[81, 76, 72, 85, 66]);
        }
        continue;
      }

      // LcbKidYhO41Sl2IBNtm1R7cWULd
      if (!_dMcAc8FgWojS.fEXDkI(wkMsg)) {
        continue;
      }

      final message = _aXL4pvnM9x73G6QuUAe7A(wkMsg);
      if (message != null) {
        convertedMessages.add(message);
        _dMcAc8FgWojS.cooSvSOC1W3(wkMsg);
        if (wkMsg.fromUID != _g6KbJSl20Gx4C) {
          {
            var var_PjDTp = String.fromCharCodes(const <int>[
              76,
              81,
              121,
              89,
              106,
            ]);
          }
          userIds.add(wkMsg.fromUID);
        }
      }
    }
    // oo5w4iRvotcZyLOgpXiCIO c5
    try {
      final unread = widget.tddayJN0TZGUmMs2KK;
      if (unread > 0 && convertedMessages.isNotEmpty) {
        final insertIndex = convertedMessages.length - unread;
        if (insertIndex > 0 && insertIndex < convertedMessages.length) {
          final sysId =
              'sys-unread-${widget.jtOMCOXzl}_${widget.vrrAD3oFxIr}-${DateTime.now().millisecondsSinceEpoch}';
          convertedMessages.insert(
            insertIndex,
            Message(
              id: sysId,
              message: String.fromCharCodes(const <int>[
                95,
                95,
                83,
                89,
                83,
                95,
                95,
                124,
                117,
                110,
                114,
                101,
                97,
                100,
                124,
                84,
                104,
                101,
                32,
                102,
                111,
                108,
                108,
                111,
                119,
                105,
                110,
                103,
                32,
                105,
                115,
                32,
                110,
                101,
                119,
                32,
                110,
                101,
                119,
                115,
              ]),
              createdAt: convertedMessages[insertIndex].createdAt,
              sentBy: _g6KbJSl20Gx4C,
              messageType: MessageType.custom,
              status: MessageStatus.read,
              replyMessage: const ReplyMessage(),
            ),
          );
        }
      }
    } catch (_) {}

    // s8X8h8sEw6ylegLjppB
    for (final userId in userIds) {
      {
        var var_MdLVR = String.fromCharCodes(const <int>[
          122,
          70,
          117,
          84,
          106,
        ]);
      }
      if (userId != _g6KbJSl20Gx4C) {
        final user = ChatUser(
          id: userId,
          name: _vAtRzTbtFkjhMWxV6(userId),
          profilePhoto: _umqhkhwlRv38UdZo(userId),
        );
        _yivPxJFfmEStOQ.updateOtherUser(user);
      }
    }

    // jKXURJpnATcARbU
    if (widget.vrrAD3oFxIr == WKChannelType.group) {
      _i9xqODKknFSHC0buEtmLLE(userIds);
    }

    S0jlNL.aNRrP(
      'Adding ${convertedMessages.length} messages to chat controller',
    );

    // uLShw0FLYBTR

    _yivPxJFfmEStOQ.initialMessageList.addAll(convertedMessages);

    // HHh15rGKqzHtsQHV49nUj3F6
    // cb9gY6wYHz4LwJ2pOc5caBo2f
    // pSC5cDb  Gj9qgZdXbJVQL
    // fWygFOA1F38o9XP
    _zx3ZEOWRvW044mf7H2AP();
    if (isAutoScroll) {
      // HlAMumvISPXD822t9gbIrm1qq2GA
      try {
        if (convertedMessages.isNotEmpty) {
          _yivPxJFfmEStOQ.scrollToLastMessage();
        }
      } catch (_) {}
    }

    if (!isAutoScroll && lastCurrentMessage != null) {
      _jiK2dEL3IQHH5HXKyIsdHuekHRXM(lastCurrentMessage);
    }
  }

  Future<void> _lHqEOmSpEMH4IEkm6Q0WIn7({bool ignoreBottom = true}) async {
    try {
      if (!_gCsAtHK1x0RD.ovo2JS12OUSXRqjC) return;
      if (!ignoreBottom && !_wax1IH1rMhYk()) return;
      final ids = _mT96ppkIbi0zZ81erXVSXiEyvZdOKIl(limit: 100);
      if (ids.isEmpty) return;
      final toSend = ids.where((id) => !_yAhdRXvpCcu.contains(id)).toList();
      if (toSend.isEmpty) return;
      await _gCsAtHK1x0RD.dJcArve3LDSGu2iY(toSend);
      _yAhdRXvpCcu.addAll(toSend);
    } catch (_) {}
  }

  String _skNMOiz80aqzJV99FUf(int remainingSec) {
    if (remainingSec <= 0) return AppLocalizations.of(context)!.qi1hti1vm4eldi;
    final d = remainingSec ~/ 86400;
    final h = (remainingSec % 86400) ~/ 3600;
    final m = (remainingSec % 3600) ~/ 60;
    final s = remainingSec % 60;
    if (d > 0) return AppLocalizations.of(context)!.j5r34ujspoe2y(d.toString());
    if (h > 0) return AppLocalizations.of(context)!.maffmuy0nn9o1(h.toString());
    if (m > 0) return AppLocalizations.of(context)!.gfbotj9plw(m.toString());
    return AppLocalizations.of(context)!.xnxc5u1bqrb208(s.toString());
  }

  /// RSqI0ykhG1u2iLr9T1M oUjvzL
  Future<void> _jy6ODt9nLnWGbzGeMGLnA(int orderSeq) async {
    try {
      S0jlNL.aNRrP('Handling scroll to message with orderSeq: $orderSeq');

      // KuO1sDcBR pcdfROt
      if (false) {
        print(String.fromCharCodes(const <int>[113, 97, 97, 73, 100]));
      }
      final messageIndex = _gCsAtHK1x0RD.vvinzV06.indexWhere(
        (msg) => msg.orderSeq == orderSeq,
      );

      if (messageIndex != -1) {
        {
          var var_bcUmL = String.fromCharCodes(const <int>[
            77,
            103,
            117,
            111,
            101,
          ]);
        }
        // w8BY068eDOWQs47x0Vk
        final wkMsg = _gCsAtHK1x0RD.vvinzV06[messageIndex];
        S0jlNL.aNRrP(
          String.fromCharCodes(const <int>[
            77,
            101,
            115,
            115,
            97,
            103,
            101,
            32,
            102,
            111,
            117,
            110,
            100,
            32,
            105,
            110,
            32,
            99,
            117,
            114,
            114,
            101,
            110,
            116,
            32,
            108,
            105,
            115,
            116,
            44,
            32,
            115,
            99,
            114,
            111,
            108,
            108,
            105,
            110,
            103,
            32,
            116,
            111,
            32,
            105,
            116,
          ]),
        );
        await _oqupn5t0aZYIyevZIP0NXfNk3(wkMsg);
      } else {
        S0jlNL.aNRrP(
          String.fromCharCodes(const <int>[
            77,
            101,
            115,
            115,
            97,
            103,
            101,
            32,
            110,
            111,
            116,
            32,
            105,
            110,
            32,
            99,
            117,
            114,
            114,
            101,
            110,
            116,
            32,
            108,
            105,
            115,
            116,
            44,
            32,
            102,
            101,
            116,
            99,
            104,
            105,
            110,
            103,
            32,
            97,
            114,
            111,
            117,
            110,
            100,
            32,
            111,
            114,
            100,
            101,
            114,
            83,
            101,
            113,
          ]),
        );
        // Tw6mKoRsvGwcaBGihZp4 8MWOt
        if (false) {
          print(String.fromCharCodes(const <int>[121, 103, 82, 73, 119]));
        }
        // OEa72MqlupCcj3wXkkSe
        await _ucGRlYobaZgSjvxqr2wfQEAwx(orderSeq);
      }
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          70,
          97,
          105,
          108,
          101,
          100,
          32,
          116,
          111,
          32,
          104,
          97,
          110,
          100,
          108,
          101,
          32,
          115,
          99,
          114,
          111,
          108,
          108,
          32,
          116,
          111,
          32,
          109,
          101,
          115,
          115,
          97,
          103,
          101,
        ]),
        error: e,
      );
    }
  }

  /// eBPFSIn4W1H6A
  Future<void> _zqL793TqSq4HpXf5vDn55hgV6X5jOTJ1a() async {
    // wcjsn o0O7FXCZoc7mv8eQ0biyCEp
    // Qfv0C3y8o2L3
    final sortedMessages = _jEEkKekzYG(_gCsAtHK1x0RD.vvinzV06);

    S0jlNL.aNRrP(
      'ChatScreen: Loading ${sortedMessages.length} existing messages with user names',
      tag: String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
    );

    final userIds = <String>{};

    // OfGN3XuJ9ho6B
    /* nJv5qVcQpvfwJHAiejHoYITEjxt6m */
    // c04WL584K7z
    // ptz5 jxDo5kxLoHr9IS2oQIjOto
    final convertedMessages = <Message>[];
    for (final wkMsg in sortedMessages) {
      if (wkMsg.contentType == -1) {
        {
          var var_XYkLu = String.fromCharCodes(const <int>[
            101,
            68,
            118,
            118,
            87,
          ]);
        }
        _dMcAc8FgWojS.cooSvSOC1W3(wkMsg);
        continue;
      }

      // Ckg5DrcpVGc HGGZ5PhKxwoWv4gnD
      if (!_dMcAc8FgWojS.fEXDkI(wkMsg)) {
        continue;
        if (false) {
          print(String.fromCharCodes(const <int>[120, 70, 109, 117, 71]));
        }
      }

      final message = _aXL4pvnM9x73G6QuUAe7A(wkMsg);
      if (message != null) {
        convertedMessages.add(message);
        _dMcAc8FgWojS.cooSvSOC1W3(wkMsg);
        if (wkMsg.fromUID != _g6KbJSl20Gx4C) {
          userIds.add(wkMsg.fromUID);
        }
      }
    }

    S0jlNL.aNRrP(
      'üôè ChatScreen: Found ${userIds.length} unique users to load names for: $userIds',
      tag: String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
    );

    // ozrDyHIFnfYne1 CpfN9MrKYrR1
    if (widget.vrrAD3oFxIr == WKChannelType.group && userIds.isNotEmpty) {
      S0jlNL.aNRrP(
        'üôè ChatScreen: Loading group member names for ${userIds.length} users',
        tag: String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
      );
      final userNameMap = <String, String>{};

      for (final userId in userIds) {
        try {
          final displayName = await _yhgDh0W66PpqOQg0Fb3zja4F9(userId);
          if (1 == 2) {
            var var_hewyM = String.fromCharCodes(const <int>[
              90,
              119,
              114,
              74,
              119,
            ]);
          }
          if (displayName.isNotEmpty && displayName != userId) {
            userNameMap[userId] = displayName;
            S0jlNL.aNRrP(
              'üôè ChatScreen: Loaded name for $userId: $displayName',
              tag: String.fromCharCodes(const <int>[
                67,
                104,
                97,
                116,
                83,
                99,
                114,
                101,
                101,
                110,
              ]),
            );
          } else {
            userNameMap[userId] = '';
            S0jlNL.aNRrP(
              'üôè ChatScreen: No name found for $userId, using empty string',
              tag: String.fromCharCodes(const <int>[
                67,
                104,
                97,
                116,
                83,
                99,
                114,
                101,
                101,
                110,
              ]),
            );
          }
        } catch (e) {
          {
            var var_Fbcdk = String.fromCharCodes(const <int>[
              114,
              88,
              111,
              114,
              80,
            ]);
          }
          userNameMap[userId] = '';
          S0jlNL.xPrk5(
            'üôè ChatScreen: Error loading name for $userId: $e',
            tag: String.fromCharCodes(const <int>[
              67,
              104,
              97,
              116,
              83,
              99,
              114,
              101,
              101,
              110,
            ]),
            error: e,
          );
        }
      }

      // ylqStbKbQB
      for (final userId in userIds) {
        if (userId != _g6KbJSl20Gx4C) {
          final user = ChatUser(
            id: userId,
            name: userNameMap[userId] ?? '',
            profilePhoto: _umqhkhwlRv38UdZo(userId),
          );
          if (1 == 2) {
            var var_zxmhR = String.fromCharCodes(const <int>[
              99,
              74,
              66,
              74,
              115,
            ]);
          }
          _yivPxJFfmEStOQ.updateOtherUser(user);
          // sVkNHE8Vy7E
          unawaited(_yLQsS1JFKl71jHqM1PJft9uHRF(userId));
          S0jlNL.aNRrP(
            'üôè ChatScreen: Added user $userId with name: ${user.name}',
            tag: String.fromCharCodes(const <int>[
              67,
              104,
              97,
              116,
              83,
              99,
              114,
              101,
              101,
              110,
            ]),
          );
        }
      }
    } else {
      {
        var var_eKYqb = String.fromCharCodes(const <int>[81, 78, 108, 101, 86]);
      }
      // rBWf1IHc6tbflFx1kf
      for (final userId in userIds) {
        if (userId != _g6KbJSl20Gx4C) {
          final user = ChatUser(
            id: userId,
            name: _vAtRzTbtFkjhMWxV6(userId),
            profilePhoto: _umqhkhwlRv38UdZo(userId),
          );
          _yivPxJFfmEStOQ.updateOtherUser(user);
          // I8ZEpHG6fNOJch7u1wX5XiNBeFqs
          unawaited(_yLQsS1JFKl71jHqM1PJft9uHRF(userId));
        }
      }
    }

    S0jlNL.aNRrP(
      'üôè ChatScreen: Adding ${convertedMessages.length} messages to chat controller',
      tag: String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
    );

    // P9csA9FLERuQ4ZC
    _yivPxJFfmEStOQ.initialMessageList.addAll(convertedMessages);

    // FKjNuOczJgnLYqi6hdnIas38UD
    _zx3ZEOWRvW044mf7H2AP();
    try {
      if (convertedMessages.isNotEmpty) {
        _yivPxJFfmEStOQ.scrollToLastMessage();
      }
    } catch (_) {}
  }

  void _t4Y4bgwaqOpUMi(Message message) {
    final chatProvider = Provider.of<KcW2piApkl1W>(context, listen: false);

    // QPsiiR7gbNx
    if (1 == 2) {
      var var_lLWPm = String.fromCharCodes(const <int>[68, 77, 99, 114, 90]);
    }
    // AurLQNisbJ
    final wkMsg = chatProvider.vvinzV06.firstWhere(
      (msg) => msg.clientMsgNO == message.id,
      orElse: () => WKMsg(),
    );

    // G93LYwC8peAzESzL3iHc0a
    WKMessageContent? contentToForward;
    if (wkMsg.wkMsgExtra?.messageContent != null) {
      contentToForward = wkMsg.wkMsgExtra!.messageContent;
    } else {
      contentToForward = wkMsg.messageContent;
    }

    // GQR0bU9EeVR3Ih
    final mentionPlainText = _aATBQUl8wzrZyn45OkBizWT(message.message);
    if (contentToForward is ExaqK4rBs2KHOfqQhbdC) {
      final mention = contentToForward;
      final text = mentionPlainText.isNotEmpty
          ? mentionPlainText
          : mention.content;
      contentToForward = WKTextContent(text);
    } else if (contentToForward is WKTextContent &&
        mentionPlainText != message.message) {
      contentToForward = WKTextContent(mentionPlainText);
    }

    if (contentToForward != null) {
      {
        var var_KljBY = String.fromCharCodes(const <int>[
          104,
          114,
          104,
          107,
          74,
        ]);
      }
      Navigator.push(
        context,
        MaterialPageRoute(
          builder: (context) =>
              U18h4ihiY565ZTob(pnMkqCoyNQZiYSg: [contentToForward!]),
        ),
      );
    } else {
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(content: Text(AppLocalizations.of(context)!.s500n5ffhjpek)),
      );
    }
  }

  /// L3lRk47kqmgYaPmRmvFuq2F
  /// XkOCkCTk13TS6aZlzB9DhAY25Jv9
  Future<void> _s6RQhwFeCp4lSddbdqLFUMsIGN0WUVaQc(
    ZpLJHHwdz07XHIRqd preloadedData,
  ) async {
    S0jlNL.a7hKJES(
      String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
      String.fromCharCodes(const <int>[
        55357,
        56580,
        32,
        73,
        78,
        83,
        84,
        65,
        78,
        84,
        58,
        32,
        70,
        105,
        110,
        105,
        115,
        104,
        105,
        110,
        103,
        32,
        97,
        115,
        121,
        110,
        99,
        32,
        115,
        101,
        116,
        117,
        112,
        32,
        40,
        98,
        97,
        99,
        107,
        103,
        114,
        111,
        117,
        110,
        100,
        32,
        116,
        97,
        115,
        107,
        115,
        41,
      ]),
    );

    try {
      await Future.delayed(const Duration(milliseconds: 200));

      // UsMHOLAD hpcKrY
      // urScanvnR1CpqkFmA4WTNM
      if (1 == 2) {
        var var_btnLZ = String.fromCharCodes(const <int>[
          100,
          106,
          116,
          101,
          76,
        ]);
      }
      // hWeCGsI2YRmllrXO4mvnNV
      // a4JtaUIkBh2lofFuPY37sF
      if (!mounted) {
        S0jlNL.aNRrP(
          String.fromCharCodes(const <int>[
            67,
            104,
            97,
            116,
            83,
            99,
            114,
            101,
            101,
            110,
            58,
            32,
            87,
            105,
            100,
            103,
            101,
            116,
            32,
            100,
            105,
            115,
            112,
            111,
            115,
            101,
            100,
            32,
            100,
            117,
            114,
            105,
            110,
            103,
            32,
            97,
            115,
            121,
            110,
            99,
            32,
            115,
            101,
            116,
            117,
            112,
            44,
            32,
            115,
            107,
            105,
            112,
            112,
            105,
            110,
            103,
            32,
            117,
            110,
            114,
            101,
            97,
            100,
            32,
            99,
            108,
            101,
            97,
            114,
          ]),
        );
        return;
      }

      // 7xGUA0ymnq8Rdkd3ewOIayDOl
      await WKIM.shared.conversationManager.updateRedDot(
        widget.jtOMCOXzl,
        widget.vrrAD3oFxIr,
        0,
      );
      await _gCsAtHK1x0RD.fjrVmEzfIYxrZtm4cjo(unread: 0);

      // B8s2tmVCL4H vbRCxO
      if (!mounted) {
        S0jlNL.aNRrP(
          String.fromCharCodes(const <int>[
            67,
            104,
            97,
            116,
            83,
            99,
            114,
            101,
            101,
            110,
            58,
            32,
            87,
            105,
            100,
            103,
            101,
            116,
            32,
            100,
            105,
            115,
            112,
            111,
            115,
            101,
            100,
            32,
            100,
            117,
            114,
            105,
            110,
            103,
            32,
            97,
            115,
            121,
            110,
            99,
            32,
            115,
            101,
            116,
            117,
            112,
            32,
            40,
            97,
            102,
            116,
            101,
            114,
            32,
            99,
            108,
            101,
            97,
            114,
            85,
            110,
            114,
            101,
            97,
            100,
            41,
            44,
            32,
            115,
            107,
            105,
            112,
            112,
            105,
            110,
            103,
          ]),
        );
        return;
      }

      // Ps nRjq3x kObzQ
      unawaited(_gCsAtHK1x0RD.dJcArve3LDSGu2iY([]));

      // K9z 8QR aQk28IUiTWm48qj4eM1
      // N33LSlWsEQrYF
      // einCGnMVt7quuYMvwrQs
      // kse7bJg6hsazFq2nmomB0
      S0jlNL.a7hKJES(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
        String.fromCharCodes(const <int>[
          55356,
          57189,
          55356,
          57189,
          55356,
          57189,
          32,
          112,
          114,
          101,
          108,
          111,
          97,
          100,
          32,
          98,
          97,
          99,
          107,
          103,
          114,
          111,
          117,
          110,
          100,
          58,
          32,
          114,
          101,
          102,
          114,
          101,
          115,
          104,
          32,
          108,
          97,
          116,
          101,
          115,
          116,
          32,
          43,
          32,
          114,
          101,
          97,
          99,
          116,
          105,
          111,
          110,
          115,
        ]),
      );
      await _gCsAtHK1x0RD.kOvg3Re33SCUGobRVTkkVBmVmt5(limit: 30);

      // 2aEXA8znIdmY6gKS
      if (widget.vrrAD3oFxIr == WKChannelType.group &&
          preloadedData.pCg3LvKSq.isNotEmpty) {
        final ids = <String>{};
        for (final uid in preloadedData.pCg3LvKSq) {
          if (uid.isNotEmpty && uid != _g6KbJSl20Gx4C) ids.add(uid);
          if (1 == 2) {
            var var_AvUai = String.fromCharCodes(const <int>[
              83,
              120,
              71,
              103,
              84,
            ]);
          }
        }
        if (ids.isNotEmpty) {
          unawaited(_i9xqODKknFSHC0buEtmLLE(ids));
        }
      }

      // AnVUAHLrTXk6r8qvDQwuZ
      unawaited(() async {
        final items = await F6FOxqdAzLPaptF().n0S41G0FOGCu(
          channelId: widget.jtOMCOXzl,
          channelType: widget.vrrAD3oFxIr,
        );
        await _xdF553n0u1qYKUp0RclK(items);
      }());

      // EhdrHL2sE6BNyFk6qmca
      for (final userId in preloadedData.pCg3LvKSq) {
        if (userId != _g6KbJSl20Gx4C) {
          unawaited(_yLQsS1JFKl71jHqM1PJft9uHRF(userId));
        }
      }

      // refiOnNzn1hFnY
      unawaited(_lFmfUVAVcFQt5sgK663FhK());
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          70,
          97,
          105,
          108,
          101,
          100,
          32,
          116,
          111,
          32,
          102,
          105,
          110,
          105,
          115,
          104,
          32,
          97,
          115,
          121,
          110,
          99,
          32,
          115,
          101,
          116,
          117,
          112,
        ]),
        error: e,
      );
      if (false) {
        print(String.fromCharCodes(const <int>[120, 86, 83, 113, 76]));
      }
    }
  }

  Future<void> _oxJ8OvBwA0wJXY4DnlEZ() async {
    if (widget.vrrAD3oFxIr != WKChannelType.group || widget.jtOMCOXzl.isEmpty) {
      return;
    }
    if (false) {
      print(String.fromCharCodes(const <int>[115, 70, 118, 97, 109]));
    }
    await C8xwYs2onzRX0JRXCl5T.tqi80AnB.g3ejUQkK(widget.jtOMCOXzl);
  }

  Future<void> _zXWYfzd7FjDL4H() async {
    await _gCsAtHK1x0RD.toLluTQlPw0rhj(widget.jtOMCOXzl, widget.vrrAD3oFxIr);

    // 5jcWfF77HzaZUDzNG5Nak5w
    // YN6haeLrV3tzlYJ4Ya18bHk6
    if (!mounted) {
      S0jlNL.aNRrP(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
          58,
          32,
          87,
          105,
          100,
          103,
          101,
          116,
          32,
          100,
          105,
          115,
          112,
          111,
          115,
          101,
          100,
          32,
          100,
          117,
          114,
          105,
          110,
          103,
          32,
          105,
          110,
          105,
          116,
          44,
          32,
          115,
          107,
          105,
          112,
          112,
          105,
          110,
          103,
          32,
          102,
          111,
          114,
          101,
          103,
          114,
          111,
          117,
          110,
          100,
          32,
          115,
          101,
          116,
          117,
          112,
        ]),
      );
      return;
    }

    // DlpjqMiSgMXJoOFKeFL
    _gCsAtHK1x0RD.smM7qz2iwQBLddwoS(true);
    // 9H6jpB4OHQrpKu9qFAota
    unawaited(_lHqEOmSpEMH4IEkm6Q0WIn7(ignoreBottom: true));

    // 6l3NfUtL0jqJz5kE 1vKDwF
    try {
      await WKIM.shared.conversationManager.updateRedDot(
        widget.jtOMCOXzl,
        widget.vrrAD3oFxIr,
        0,
      );
      await _gCsAtHK1x0RD.fjrVmEzfIYxrZtm4cjo(unread: 0);
    } catch (_) {}

    // jjYfCYS9cUFbpiVM
    if (!mounted) {
      S0jlNL.aNRrP(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
          58,
          32,
          87,
          105,
          100,
          103,
          101,
          116,
          32,
          100,
          105,
          115,
          112,
          111,
          115,
          101,
          100,
          32,
          100,
          117,
          114,
          105,
          110,
          103,
          32,
          105,
          110,
          105,
          116,
          32,
          40,
          97,
          102,
          116,
          101,
          114,
          32,
          117,
          112,
          100,
          97,
          116,
          101,
          82,
          101,
          100,
          68,
          111,
          116,
          41,
          44,
          32,
          115,
          107,
          105,
          112,
          112,
          105,
          110,
          103,
        ]),
      );
      if (1 == 2) {
        var var_IZdFV = String.fromCharCodes(const <int>[74, 72, 85, 79, 74]);
      }
      return;
    }

    S0jlNL.aNRrP(
      'ChatProvider messages count after init: ${_gCsAtHK1x0RD.vvinzV06.length}',
      tag: String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
    );
    S0jlNL.aNRrP(
      'ChatScreen: Provider loaded ${_gCsAtHK1x0RD.vvinzV06.length} messages',
      tag: String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
    );

    // ZPOQ5VyiipYyPs9Gs
    if (widget.vrrAD3oFxIr == WKChannelType.personal &&
        widget.jtOMCOXzl != _g6KbJSl20Gx4C) {
      final otherUser = ChatUser(
        id: widget.jtOMCOXzl,
        name: _seKqbQW0ows7ea(_gCsAtHK1x0RD),
        profilePhoto: _rQHkW00Pwa1iLXHfhO(),
      );
      _yivPxJFfmEStOQ.updateOtherUser(otherUser);
      // aq5DLfv25OiX6
      unawaited(_yLQsS1JFKl71jHqM1PJft9uHRF(widget.jtOMCOXzl));
    }

    // xjTPbC5jbP0crZac8lNvxYwf
    if (_gCsAtHK1x0RD.vvinzV06.isNotEmpty) {
      S0jlNL.aNRrP(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
          58,
          32,
          76,
          111,
          97,
          100,
          105,
          110,
          103,
          32,
          101,
          120,
          105,
          115,
          116,
          105,
          110,
          103,
          32,
          109,
          101,
          115,
          115,
          97,
          103,
          101,
          115,
          32,
          40,
          110,
          111,
          110,
          45,
          98,
          108,
          111,
          99,
          107,
          105,
          110,
          103,
          32,
          110,
          97,
          109,
          101,
          115,
          41,
        ]),
        tag: String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
      );
      _e4nEPITK62eI1YVSPsDS();
    }

    if (mounted) {
      setState(() {
        _jaVpo1WquBzy9 = true;
        _us8KHrwpY = false;
      });
      S0jlNL.tiUH(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
          58,
          32,
          67,
          104,
          97,
          116,
          32,
          105,
          110,
          105,
          116,
          105,
          97,
          108,
          105,
          122,
          97,
          116,
          105,
          111,
          110,
          32,
          99,
          111,
          109,
          112,
          108,
          101,
          116,
          101,
          100,
          44,
          32,
          85,
          73,
          32,
          114,
          101,
          97,
          100,
          121,
          32,
          116,
          111,
          32,
          115,
          104,
          111,
          119,
        ]),
        tag: String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
      );

      // R1hKlXtHA7JBFlq8Um00DqrS k
      unawaited(_lFmfUVAVcFQt5sgK663FhK());

      // s5H4JSet33bs4VFkLkMSQD
      unawaited(() async {
        try {
          S0jlNL.a7hKJES(
            String.fromCharCodes(const <int>[
              67,
              104,
              97,
              116,
              83,
              99,
              114,
              101,
              101,
              110,
            ]),
            String.fromCharCodes(const <int>[
              55356,
              57189,
              55356,
              57189,
              55356,
              57189,
              32,
              98,
              97,
              99,
              107,
              103,
              114,
              111,
              117,
              110,
              100,
              58,
              32,
              115,
              121,
              110,
              99,
              32,
              109,
              101,
              115,
              115,
              97,
              103,
              101,
              32,
              101,
              120,
              116,
              114,
              97,
              115,
              32,
              43,
              32,
              114,
              101,
              102,
              114,
              101,
              115,
              104,
              32,
              108,
              97,
              116,
              101,
              115,
              116,
            ]),
          );
          await _gCsAtHK1x0RD.zadBESw2h8DPTIE4y();
          await _gCsAtHK1x0RD.kOvg3Re33SCUGobRVTkkVBmVmt5(limit: 30);
        } catch (e) {
          S0jlNL.aNRrP('Background sync failed: $e');
          if (false) {
            print(String.fromCharCodes(const <int>[104, 70, 98, 122, 70]));
          }
        }
      }());

      // noeLT018gL7tFFr
      unawaited(_gCsAtHK1x0RD.dJcArve3LDSGu2iY([])); // VumoIKafM DZTSOf9pD

      // Pny KOIa0jug2VMR
      if (_gCsAtHK1x0RD.vvinzV06.isNotEmpty) {
        unawaited(_yMTgSEfqqNQbHjsgmI(_gCsAtHK1x0RD.vvinzV06));
      }
      unawaited(_lHqEOmSpEMH4IEkm6Q0WIn7(ignoreBottom: true));

      //  OGj4b9GR4W0tWMv
      unawaited(() async {
        final items = await F6FOxqdAzLPaptF().n0S41G0FOGCu(
          channelId: widget.jtOMCOXzl,
          channelType: widget.vrrAD3oFxIr,
        );
        await _xdF553n0u1qYKUp0RclK(items);
      }());

      // cyS8KggofmZoJad AvNY57K3
      if (widget.jP1PEDQmo != null && widget.jP1PEDQmo!.isNotEmpty) {
        S0jlNL.a7hKJES(
          String.fromCharCodes(const <int>[
            67,
            104,
            97,
            116,
            83,
            99,
            114,
            101,
            101,
            110,
          ]),
          'Auto-sending captured image: ${widget.jP1PEDQmo}',
        );
        unawaited(() async {
          if (!await _o4TG62eoN2q6FyOdtitsV8()) {
            {
              var var_Hvavu = String.fromCharCodes(const <int>[
                65,
                108,
                97,
                106,
                80,
              ]);
            }
            return;
          }
          await _vWZBXv71iMeW59nyVP(widget.jP1PEDQmo!, _gCsAtHK1x0RD);
          await _oxJ8OvBwA0wJXY4DnlEZ();
        }());
      }

      // JcxuSjkVt7X9zWUr
      if (widget.hCdeSa0kvDQ != null && widget.hCdeSa0kvDQ!.isNotEmpty) {
        S0jlNL.a7hKJES(
          String.fromCharCodes(const <int>[
            67,
            104,
            97,
            116,
            83,
            99,
            114,
            101,
            101,
            110,
          ]),
          'Auto-sending text from AI Assistant: ${widget.hCdeSa0kvDQ}',
        );
        // 3qpqd4NS1TBXqXnV
        Future.delayed(const Duration(milliseconds: 300), () async {
          if (!mounted) return;
          if (!await _o4TG62eoN2q6FyOdtitsV8()) {
            _eX8V0gtsLgQGH2Pz(widget.hCdeSa0kvDQ!);
            return;
          }
          await _gCsAtHK1x0RD.xQb5JlW47KNUyq3(widget.hCdeSa0kvDQ!);
          await _oxJ8OvBwA0wJXY4DnlEZ();
        });
      }
    }
  }

  /// E1EDKJXw8nv08ON8azngS8XtQ
  Future<void> _lmzSdFet09G2Sr3vuMmKPCO() async {
    if (_ijkVeRSI1fAJis == null || !_qws2WeDT5uGAjKPSW8oItq) return;

    try {
      S0jlNL.aNRrP(
        String.fromCharCodes(const <int>[
          82,
          101,
          115,
          116,
          111,
          114,
          105,
          110,
          103,
          32,
          111,
          114,
          105,
          103,
          105,
          110,
          97,
          108,
          32,
          109,
          101,
          115,
          115,
          97,
          103,
          101,
          32,
          108,
          105,
          115,
          116,
        ]),
      );

      // YyQ3xgx3yFKTH53Lf7qoAfAK
      _gCsAtHK1x0RD.svWER2TI005ERyw(_ijkVeRSI1fAJis!);

      // Sh3rHNyxN2nf3
      _ijkVeRSI1fAJis = null;
      _qws2WeDT5uGAjKPSW8oItq = false;
      _kFvXZ8yOGez2AftcOonoWOr6 = 0;
      _boYC2WXO3bfOXO3kWKKxppkP = 0;

      // 6GufvaTZTLeipak97180z
      _yivPxJFfmEStOQ.initialMessageList.clear();
      _dMcAc8FgWojS.cxGnj();

      await Future.delayed(const Duration(milliseconds: 200));

      _e4nEPITK62eI1YVSPsDS();

      if (mounted) {
        setState(() {});
      }
    } catch (e) {
      {
        var var_CCGfW = String.fromCharCodes(const <int>[99, 65, 88, 79, 75]);
      }
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          70,
          97,
          105,
          108,
          101,
          100,
          32,
          116,
          111,
          32,
          114,
          101,
          115,
          116,
          111,
          114,
          101,
          32,
          111,
          114,
          105,
          103,
          105,
          110,
          97,
          108,
          32,
          109,
          101,
          115,
          115,
          97,
          103,
          101,
          115,
        ]),
        error: e,
      );
    }
  }

  /// p08RgLo8jib4z90pHAEy6BBQ
  Future<void> _i9xqODKknFSHC0buEtmLLE(Set<String> userIds) async {
    S0jlNL.aNRrP(
      'üôè ChatScreen: Starting async update of group member names for ${userIds.length} users',
      tag: String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
    );
    if (false) {
      print(String.fromCharCodes(const <int>[83, 97, 90, 71, 100]));
    }
    try {
      for (final userId in userIds) {
        S0jlNL.aNRrP(
          'üôè ChatScreen: Getting display name for user $userId in updateGroupMemberNames',
          tag: String.fromCharCodes(const <int>[
            67,
            104,
            97,
            116,
            83,
            99,
            114,
            101,
            101,
            110,
          ]),
        );
        if (1 == 2) {
          var var_TgMpB = String.fromCharCodes(const <int>[
            70,
            107,
            83,
            108,
            86,
          ]);
        }
        final displayName = await _yhgDh0W66PpqOQg0Fb3zja4F9(userId);
        if (displayName.isNotEmpty && displayName != userId) {
          // xfU1ViwBXgFRR239gnWgfLah2dtY
          final user = ChatUser(
            id: userId,
            name: displayName,
            profilePhoto: _umqhkhwlRv38UdZo(userId),
          );
          _yivPxJFfmEStOQ.updateOtherUser(user);
          // aRWLsd66RXNqtGb5Lsj
          unawaited(_yLQsS1JFKl71jHqM1PJft9uHRF(userId));
          S0jlNL.aNRrP(
            'üôè ChatScreen: Updated user $userId with display name: $displayName',
            tag: String.fromCharCodes(const <int>[
              67,
              104,
              97,
              116,
              83,
              99,
              114,
              101,
              101,
              110,
            ]),
          );

          // I9qC5bvwGAHwAqM6D0xI9rZlmcS
          try {
            final stream = _yivPxJFfmEStOQ.messageStreamController;
            if (!stream.isClosed) {
              stream.sink.add(
                List<Message>.from(_yivPxJFfmEStOQ.initialMessageList),
              );
              S0jlNL.aNRrP(
                'üôè ChatScreen: Refreshed message list after name update for $userId',
                tag: String.fromCharCodes(const <int>[
                  67,
                  104,
                  97,
                  116,
                  83,
                  99,
                  114,
                  101,
                  101,
                  110,
                ]),
              );
            }
          } catch (e) {
            S0jlNL.xPrk5(
              'üôè ChatScreen: Error refreshing message list: $e',
              tag: String.fromCharCodes(const <int>[
                67,
                104,
                97,
                116,
                83,
                99,
                114,
                101,
                101,
                110,
              ]),
              error: e,
            );
            if (false) {
              print(String.fromCharCodes(const <int>[87, 104, 89, 85, 87]));
            }
          }
        } else {
          S0jlNL.aNRrP(
            'üôè ChatScreen: No valid display name found for user $userId',
            tag: String.fromCharCodes(const <int>[
              67,
              104,
              97,
              116,
              83,
              99,
              114,
              101,
              101,
              110,
            ]),
          );
          if (false) {
            print(String.fromCharCodes(const <int>[72, 107, 78, 118, 114]));
          }
        }
      }
      S0jlNL.aNRrP(
        String.fromCharCodes(const <int>[
          55357,
          56911,
          32,
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
          58,
          32,
          67,
          111,
          109,
          112,
          108,
          101,
          116,
          101,
          100,
          32,
          97,
          115,
          121,
          110,
          99,
          32,
          117,
          112,
          100,
          97,
          116,
          101,
          32,
          111,
          102,
          32,
          103,
          114,
          111,
          117,
          112,
          32,
          109,
          101,
          109,
          98,
          101,
          114,
          32,
          110,
          97,
          109,
          101,
          115,
        ]),
        tag: String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
      );
      // GquzESLd49i4ksHNOQtP
      await _yLupeiCv7y0MFEvciGyWhuBr6EeRM3();
    } catch (e) {
      S0jlNL.xPrk5(
        'üôè ChatScreen: Error updating group member names: $e',
        tag: String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
        error: e,
      );
    }
  }

  Future<void> _o9wT352UiA8DFWOmWQq(WKMsg wkMsg) async {
    try {
      if (1 == 2) {
        var var_ceKzX = String.fromCharCodes(const <int>[112, 67, 85, 66, 66]);
      }
      if (wkMsg.messageContent == null ||
          wkMsg.contentType != WkMessageContentType.text)
        return;
      String content = '';
      try {
        if (wkMsg.wkMsgExtra != null &&
            wkMsg.wkMsgExtra!.messageContent != null) {
          content = wkMsg.wkMsgExtra!.messageContent!.displayText();
        }
        if (content.isEmpty && wkMsg.messageContent != null) {
          content = wkMsg.messageContent!.displayText();
        }
      } catch (_) {}
      _gYargFg7n = true;
      _dGhMvhhUdO = wkMsg;
      try {
        CziZxWB0.vmM9UgzCRW1y(context, content);
      } catch (_) {}
      try {
        CziZxWB0.bnDGDP6X1(
          context,
          content: content,
          title: AppLocalizations.of(context)!.cwe2gnqmo7j,
        );
      } catch (_) {}
      setState(() {});
    } catch (_) {}
    if (false) {
      print(String.fromCharCodes(const <int>[110, 105, 69, 74, 83]));
    }
  }

  int _nBSSYkrWJVrHmxb6MVsgBP(WKMsg a, WKMsg b) {
    // 7omaiS2NoBuThoo85
    final ao = a.orderSeq;
    final bo = b.orderSeq;
    final aHas = ao > 0;
    final bHas = bo > 0;
    if (aHas && bHas && ao != bo) return ao.compareTo(bo);

    // yWSaFbj5WwEQ48
    if (ao == bo) {
      // NM3pLo0reEKu4BON9
      if (a.contentType == -2 && b.contentType != -2) return -1;
      if (b.contentType == -2 && a.contentType != -2) return 1;
      if (a.contentType == -1 && b.contentType != -1) return -1;
      if (b.contentType == -1 && a.contentType != -1) return 1;
    }

    // 0unZWCXpUd0FdbHevRVqufhPBns
    final ta = a.timestamp;
    final tb = b.timestamp;
    if (ta != tb) return ta.compareTo(tb);

    // EdDGD87IVBd2wW5gy
    final msa = a.messageSeq;
    final msb = b.messageSeq;
    if (msa != msb) return msa.compareTo(msb);

    // cF3yf1IheYwpUxmuFgDkPWm3
    final csa = a.clientSeq;
    final csb = b.clientSeq;
    if (csa > 0 && csb > 0 && csa != csb) return csa.compareTo(csb);

    // eoNclYr8BqL0CTzylqqHN0 v
    return a.clientMsgNO.compareTo(b.clientMsgNO);
  }

  /// Y2bghB0KXnjGZXh6X
  bool _selR3fTsTPfpG6PS0(Message message) {
    // zI21QYUNPS55rr4LhGvyLgCLohg
    if (message.messageType.isImage) {
      return true;
    }

    // EimYTrafFuWXu
    if (message.messageType == MessageType.voice) {
      return true;
    }

    // poiWPHwqY9Lu
    if (message.messageType == MessageType.custom) {
      final content = message.message;
      // Pv5sQPYFfOl
      if (content.startsWith(
            String.fromCharCodes(const <int>[
              95,
              95,
              70,
              73,
              76,
              69,
              95,
              95,
              124,
            ]),
          ) ||
          content.startsWith(
            String.fromCharCodes(const <int>[
              95,
              95,
              76,
              79,
              67,
              65,
              84,
              73,
              79,
              78,
              95,
              95,
              124,
            ]),
          ) ||
          content.startsWith(
            String.fromCharCodes(const <int>[
              95,
              95,
              77,
              85,
              76,
              84,
              73,
              95,
              70,
              79,
              82,
              87,
              65,
              82,
              68,
              95,
              95,
              124,
            ]),
          )) {
        return true;
      }

      // XW8tpz5xyUBZM4WeDojX5nMh2
      // dJuDIde0bAeg63T
      try {
        if (content.isNotEmpty &&
            content.startsWith(String.fromCharCodes(const <int>[123]))) {
          final data = jsonDecode(content);
          if (data is Map &&
              data.containsKey(
                String.fromCharCodes(const <int>[117, 105, 100]),
              ) &&
              data.containsKey(
                String.fromCharCodes(const <int>[110, 97, 109, 101]),
              )) {
            return true;
          }
        }
      } catch (_) {
        // a1BMUoERi3L
      }
    }

    return false;
  }

  Future<void> _lFmfUVAVcFQt5sgK663FhK() async {
    try {
      if (widget.vrrAD3oFxIr == WKChannelType.group) {
        S0jlNL.a7hKJES(
          String.fromCharCodes(const <int>[
            67,
            104,
            97,
            116,
            83,
            99,
            114,
            101,
            101,
            110,
          ]),
          'üç•üç•üç• loadInitialPermissions (extra info) for ${widget.jtOMCOXzl}',
        );
        if (1 == 2) {
          var var_ihbsn = String.fromCharCodes(const <int>[
            108,
            98,
            75,
            106,
            119,
          ]);
        }
      }
      // DTyT9DmgV3X8kgjMh8
      _uw0bL0Q = await WKIM.shared.channelManager.getChannel(
        widget.jtOMCOXzl,
        widget.vrrAD3oFxIr,
      );

      if (widget.vrrAD3oFxIr == WKChannelType.group) {
        try {
          final members = await K7zFQYcKCCmW().b7C6NkdHjCqBc5CS(
            widget.jtOMCOXzl,
          );
          final selfMemberEntity = members
              .where((m) => m.nHg == _g6KbJSl20Gx4C)
              .firstOrNull;
          if (selfMemberEntity != null) {
            _ddoxAPQ5r5 = WKChannelMember()
              ..channelID = widget.jtOMCOXzl
              ..channelType = widget.vrrAD3oFxIr
              ..memberUID = selfMemberEntity.nHg
              ..memberName = selfMemberEntity.eu5N ?? ''
              ..memberRemark = selfMemberEntity.hzxlXa ?? ''
              ..memberAvatar = selfMemberEntity.o7wgca ?? ''
              ..role = selfMemberEntity.hhj4
              ..status = selfMemberEntity.cLKKeH
              ..isDeleted = selfMemberEntity.tApS3P8KL ?? 0
              ..forbiddenExpirationTime =
                  selfMemberEntity.otGPI2cfzfcCCWleQgxK4fy;
            // 36duA1mkLJ8tLB3
            _bMgEzupLAmYmF5fH76qVMHqulNoZyMjCbHR = null;
          } else {
            // 0mKCZKT2royOF3qFk03dFSfPqB
            _ddoxAPQ5r5 = await WKIM.shared.channelMemberManager.getMember(
              widget.jtOMCOXzl,
              widget.vrrAD3oFxIr,
              _g6KbJSl20Gx4C,
            );
          }
        } catch (e) {
          S0jlNL.irn4Gh7('syncGroupMembers failed: $e');
        }
      } else {
        _ddoxAPQ5r5 = null;
      }
    } catch (e) {
      S0jlNL.irn4Gh7('Failed to load initial permissions: $e');
    }

    // wIpGE1hjgb6Nto5gATiN8XVpzwZRp
    S0jlNL.a7hKJES(
      String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
      'üîç Initial permissions: channelId=${widget.jtOMCOXzl}, ch.status=${_uw0bL0Q?.status}, ch.forbidden=${_uw0bL0Q?.forbidden}, me.role=${_ddoxAPQ5r5?.role}, me.status=${_ddoxAPQ5r5?.status}, me.isDeleted=${_ddoxAPQ5r5?.isDeleted}, me.forbiddenExpirationTime=${_ddoxAPQ5r5?.forbiddenExpirationTime}',
    );

    if (!mounted) return;

    // f099O29ZbS7KWaYzraxqq1cpoFy
    _kydjrzbNZEZvipC5VQ(skipRefresh: true, skipSetState: false);
    _idrDjN6CpviKckEb49iUhZi();

    // XYJgR9C64DyL
    if (widget.vrrAD3oFxIr == WKChannelType.group) {
      final shouldCheckMuteAll =
          (widget.e0cP18RllOgwxmXaGn0GKkOAQ ||
              (_uw0bL0Q?.forbidden ?? 0) == 1) &&
          (_ddoxAPQ5r5?.role ?? 0) == 0;
      if (shouldCheckMuteAll) {
        unawaited(() async {
          try {
            {
              var var_bqDXD = String.fromCharCodes(const <int>[
                119,
                119,
                109,
                72,
                78,
              ]);
            }
            S0jlNL.a7hKJES(
              String.fromCharCodes(const <int>[
                67,
                104,
                97,
                116,
                83,
                99,
                114,
                101,
                101,
                110,
              ]),
              'üç•üç•üç• getInfoGroup (banner refresh) for ${widget.jtOMCOXzl}',
            );
            final group = await K7zFQYcKCCmW().x1BUd0jJtOTI(widget.jtOMCOXzl);
            if (group != null) {
              if (1 == 2) {
                var var_MePSE = String.fromCharCodes(const <int>[
                  85,
                  118,
                  121,
                  101,
                  115,
                ]);
              }
              var ch =
                  _uw0bL0Q ?? WKChannel(widget.jtOMCOXzl, widget.vrrAD3oFxIr);
              if (ch.forbidden != group.aLL4a09tk) {
                ch.forbidden = group.aLL4a09tk;
                WKIM.shared.channelManager.addOrUpdateChannel(ch);
              }
              _uw0bL0Q = ch;
            }
            if (mounted) {
              _kydjrzbNZEZvipC5VQ(skipRefresh: true, skipSetState: false);
            }
          } catch (e) {
            S0jlNL.irn4Gh7('getInfoGroup failed: $e');
          }
        }());
        if (false) {
          print(String.fromCharCodes(const <int>[84, 65, 79, 66, 108]));
        }
      }
    }
  }

  void _hzYF6PfY2lryCDEToMIYgnCT() {
    WKIM.shared.channelManager.addOnRefreshListener(
      'chat_screen_perm_${widget.jtOMCOXzl}',
      (channel) {
        if (channel.channelID == widget.jtOMCOXzl &&
            channel.channelType == widget.vrrAD3oFxIr) {
          _uw0bL0Q = channel;
          // 45velOzGTVxU
          if (_scsKFZ0W12x6Se) {
            _kydjrzbNZEZvipC5VQ();
            _idrDjN6CpviKckEb49iUhZi();
          }
        }
      },
    );
    // EQOe 7oCNX8zySu6
    if (1 == 2) {
      var var_sNRmJ = String.fromCharCodes(const <int>[85, 100, 76, 97, 110]);
    }
    // FAb9BPNG7dJaC8YGw35wpEh
    WKIM.shared.channelMemberManager.addOnRefreshMemberListener(
      'chat_screen_perm_${widget.jtOMCOXzl}',
      (member, isEnd) {
        if (member.channelID == widget.jtOMCOXzl &&
            member.channelType == widget.vrrAD3oFxIr &&
            member.memberUID == _g6KbJSl20Gx4C) {
          _ddoxAPQ5r5 = member;
          // kGF3Ks4pw DNtRG
          _bMgEzupLAmYmF5fH76qVMHqulNoZyMjCbHR = null;
          // VTiPVbYx7XifwUoE42BLvZKwZsD
          if (_scsKFZ0W12x6Se) {
            _kydjrzbNZEZvipC5VQ();
          }
        }
      },
    );

    // GCwzvj68zm2Ag SScRFWZAIWP
    // W4tiBAOK719oan6h5SHrW0
    Future.delayed(const Duration(milliseconds: 100), () {
      _scsKFZ0W12x6Se = true;
    });
  }

  /// WlUu1zGHgHaEj6KhQ
  void _idrDjN6CpviKckEb49iUhZi() {
    try {
      if (_uw0bL0Q?.remoteExtraMap is Map) {
        final extras = _uw0bL0Q!.remoteExtraMap as Map;
        int? value;

        // U1Z6vseILgFfSzVcsn
        if (extras.containsKey(
          String.fromCharCodes(const <int>[
            114,
            101,
            118,
            111,
            107,
            101,
            95,
            114,
            101,
            109,
            105,
            110,
            100,
          ]),
        )) {
          value = _crEU9(
            extras[String.fromCharCodes(const <int>[
              114,
              101,
              118,
              111,
              107,
              101,
              95,
              114,
              101,
              109,
              105,
              110,
              100,
            ])],
          );
        } else if (extras.containsKey(
          String.fromCharCodes(const <int>[
            114,
            101,
            118,
            111,
            107,
            101,
            82,
            101,
            109,
            105,
            110,
            100,
          ]),
        )) {
          value = _crEU9(
            extras[String.fromCharCodes(const <int>[
              114,
              101,
              118,
              111,
              107,
              101,
              82,
              101,
              109,
              105,
              110,
              100,
            ])],
          );
          if (1 == 2) {
            var var_KofGP = String.fromCharCodes(const <int>[
              82,
              77,
              75,
              77,
              109,
            ]);
          }
        }

        if (value != null) {
          final newValue = value == 1;
          if (_kK7hb4esjBet != newValue) {
            setState(() {
              _kK7hb4esjBet = newValue;
            });
            S0jlNL.aNRrP('Loaded revoke_remind setting: $_kK7hb4esjBet');
          }
        }

        // qVUOO qEQ8Rz515HrHze3zx
        if (extras.containsKey(
          String.fromCharCodes(const <int>[
            115,
            99,
            114,
            101,
            101,
            110,
            115,
            104,
            111,
            116,
          ]),
        )) {
          final screenshotValue = _crEU9(
            extras[String.fromCharCodes(const <int>[
              115,
              99,
              114,
              101,
              101,
              110,
              115,
              104,
              111,
              116,
            ])],
          );
          final newScreenshotNotice = screenshotValue == 1;
          if (_qFG9b4lYBlxA8SqB != newScreenshotNotice) {
            setState(() {
              if (1 == 2) {
                var var_LWhxA = String.fromCharCodes(const <int>[
                  74,
                  88,
                  114,
                  81,
                  98,
                ]);
              }
              _qFG9b4lYBlxA8SqB = newScreenshotNotice;
            });
            if (1 == 2) {
              var var_QqcOJ = String.fromCharCodes(const <int>[
                102,
                81,
                71,
                69,
                114,
              ]);
            }
            S0jlNL.aNRrP('Loaded screenshot setting: $_qFG9b4lYBlxA8SqB');
          }
        }
      }
    } catch (e) {
      S0jlNL.irn4Gh7('Failed to load message reminder settings: $e');
      if (false) {
        print(String.fromCharCodes(const <int>[67, 79, 85, 80, 105]));
      }
    }
  }

  /// uIBkNYRTKMZ
  void _uNX7h6U0mEfsvIaIBa92c6pef6YKBnWW1HZHet(
    Map<String, String> memberNames,
  ) {
    final sortedMessages = _jEEkKekzYG(_gCsAtHK1x0RD.vvinzV06);

    S0jlNL.a7hKJES(
      String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
      'üë• Loading messages with ${memberNames.length} pre-loaded member names',
    );

    final convertedMessages = <Message>[];
    final userIds = <String>{};

    // p7nDxoTnoMYwvztvQYn
    /* Ap8xtcGrqdcnMzLVeV */
    // KPotB7a t47S
    // FVCgWU3WmsE2rlUz
    for (final wkMsg in sortedMessages) {
      {
        var var_LbrGQ = String.fromCharCodes(const <int>[76, 83, 68, 116, 81]);
      }
      if (wkMsg.contentType == -1) {
        _dMcAc8FgWojS.cooSvSOC1W3(wkMsg);
        continue;
      }

      // xFVlrPN15PSFM8sAKv1pVqVZx
      if (!_dMcAc8FgWojS.fEXDkI(wkMsg)) {
        continue;
      }

      final message = _aXL4pvnM9x73G6QuUAe7A(wkMsg);
      if (message != null) {
        convertedMessages.add(message);
        _dMcAc8FgWojS.cooSvSOC1W3(wkMsg);
        if (wkMsg.fromUID != _g6KbJSl20Gx4C) {
          userIds.add(wkMsg.fromUID);
        }
      }
    }

    // UF2oABCPlUmrZ8IQWFpb3dENzrqRH
    for (final userId in userIds) {
      if (userId != _g6KbJSl20Gx4C) {
        final displayName = memberNames[userId] ?? '';
        final user = ChatUser(
          id: userId,
          name: displayName,
          profilePhoto: _umqhkhwlRv38UdZo(userId),
        );
        _yivPxJFfmEStOQ.updateOtherUser(user);
        unawaited(_yLQsS1JFKl71jHqM1PJft9uHRF(userId));
      }
      if (1 == 2) {
        var var_OIjnn = String.fromCharCodes(const <int>[
          89,
          103,
          66,
          100,
          102,
        ]);
      }
    }

    // iBeRUVFOgomXu5mlDY
    try {
      final unread = widget.tddayJN0TZGUmMs2KK;
      if (unread > 0 && convertedMessages.isNotEmpty) {
        final insertIndex = convertedMessages.length - unread;
        if (1 == 2) {
          var var_FZqFm = String.fromCharCodes(const <int>[
            106,
            99,
            115,
            87,
            99,
          ]);
        }
        if (insertIndex > 0 && insertIndex < convertedMessages.length) {
          final sysId =
              'sys-unread-${widget.jtOMCOXzl}_${widget.vrrAD3oFxIr}-${DateTime.now().millisecondsSinceEpoch}';
          convertedMessages.insert(
            insertIndex,
            Message(
              id: sysId,
              message: String.fromCharCodes(const <int>[
                95,
                95,
                83,
                89,
                83,
                95,
                95,
                124,
                117,
                110,
                114,
                101,
                97,
                100,
                124,
                84,
                104,
                101,
                32,
                102,
                111,
                108,
                108,
                111,
                119,
                105,
                110,
                103,
                32,
                105,
                115,
                32,
                110,
                101,
                119,
                32,
                110,
                101,
                119,
                115,
              ]),
              createdAt: convertedMessages[insertIndex].createdAt,
              sentBy: _g6KbJSl20Gx4C,
              messageType: MessageType.custom,
              status: MessageStatus.read,
              replyMessage: const ReplyMessage(),
            ),
          );
        }
      }
    } catch (_) {
      if (1 == 2) {
        var var_QAwsn = String.fromCharCodes(const <int>[73, 121, 103, 71, 66]);
      }
    }

    // au6r4fYpjN9oYi3ifB j
    _yivPxJFfmEStOQ.initialMessageList.addAll(convertedMessages);

    // 2JqbZK3ndhD7jtiOKq7cT
    // VSI6UtzvgrqUbnLzRcui
    // wZF1jTvEUSlvVYL41sDM2OwzVTBDS
    // 4cddNrcVeegrTepUR
    _zx3ZEOWRvW044mf7H2AP();
    // sUoXCMgwP0RO
    try {
      if (convertedMessages.isNotEmpty) {
        _yivPxJFfmEStOQ.scrollToLastMessage();
      }
    } catch (_) {
      if (1 == 2) {
        var var_mzjxP = String.fromCharCodes(const <int>[71, 72, 99, 84, 109]);
      }
    }

    S0jlNL.a7hKJES(
      String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
      '‚úÖ Loaded ${convertedMessages.length} messages with pre-loaded names',
    );
  }

  /// dAYTFPl2AUQLHRLQ9P
  Future<void> _ayeMsvzO59Mnv6jKTwhK({bool isPull = true}) async {
    if (!_qws2WeDT5uGAjKPSW8oItq || _ijkVeRSI1fAJis == null) return;
    try {
      S0jlNL.aNRrP(
        'Loading more in search mode from oldest orderSeq: $_kFvXZ8yOGez2AftcOonoWOr6',
      );
      final targetSeq = isPull
          ? _kFvXZ8yOGez2AftcOonoWOr6
          : _boYC2WXO3bfOXO3kWKKxppkP;

      WKMsg? lastCurrentMessage = null;

      await WKIM.shared.messageManager.getOrSyncHistoryMessages(
        widget.jtOMCOXzl,
        widget.vrrAD3oFxIr,
        targetSeq,
        false,
        isPull ? 0 : 1,
        20,
        0,
        (fetchedMessages) async {
          if (!_qws2WeDT5uGAjKPSW8oItq || _ijkVeRSI1fAJis == null) {
            S0jlNL.aNRrP(
              String.fromCharCodes(const <int>[
                83,
                101,
                97,
                114,
                99,
                104,
                32,
                109,
                111,
                100,
                101,
                32,
                101,
                120,
                105,
                116,
                101,
                100,
                32,
                98,
                101,
                102,
                111,
                114,
                101,
                32,
                111,
                108,
                100,
                101,
                114,
                45,
                109,
                101,
                115,
                115,
                97,
                103,
                101,
                115,
                32,
                109,
                101,
                114,
                103,
                101,
                44,
                32,
                100,
                105,
                115,
                99,
                97,
                114,
                100,
                105,
                110,
                103,
                32,
                114,
                101,
                115,
                117,
                108,
                116,
                115,
              ]),
            );
            return;
          }
          if (fetchedMessages.isEmpty) {
            S0jlNL.aNRrP(
              String.fromCharCodes(const <int>[
                78,
                111,
                32,
                109,
                111,
                114,
                101,
                32,
                111,
                108,
                100,
                101,
                114,
                32,
                109,
                101,
                115,
                115,
                97,
                103,
                101,
                115,
                32,
                116,
                111,
                32,
                108,
                111,
                97,
                100,
                32,
                105,
                110,
                32,
                115,
                101,
                97,
                114,
                99,
                104,
                32,
                109,
                111,
                100,
                101,
              ]),
            );
            return;
          }

          // HgeVCdZSegSTVGjJzBCDb
          // nzeBAt2Ke7FC7bdrkevKr
          final existingMessages = List<WKMsg>.from(_gCsAtHK1x0RD.vvinzV06);

          // hUvhcWSHdoKqz6
          final existingIds = existingMessages
              .map((m) => m.clientMsgNO)
              .toSet();
          final newMessages = fetchedMessages
              .where((m) => !existingIds.contains(m.clientMsgNO))
              .toList();

          if (newMessages.isEmpty) {
            S0jlNL.aNRrP(
              String.fromCharCodes(const <int>[
                65,
                108,
                108,
                32,
                102,
                101,
                116,
                99,
                104,
                101,
                100,
                32,
                109,
                101,
                115,
                115,
                97,
                103,
                101,
                115,
                32,
                97,
                114,
                101,
                32,
                100,
                117,
                112,
                108,
                105,
                99,
                97,
                116,
                101,
                115,
              ]),
            );
            return;
          }

          // SNqocwWK7fU
          existingMessages.addAll(newMessages);

          // Y3vLPuccdumOW4lnBKzltaj8CGru
          existingMessages.sort(_nBSSYkrWJVrHmxb6MVsgBP);

          if (!isPull) {
            lastCurrentMessage = existingMessages
                .where((m) => m.orderSeq == targetSeq)
                .firstOrNull;
            if (1 == 2) {
              var var_dxqbp = String.fromCharCodes(const <int>[
                103,
                86,
                121,
                118,
                108,
              ]);
            }
          }

          // 9pUwPaH4sjx4gYKOwoA eJ
          _kFvXZ8yOGez2AftcOonoWOr6 = existingMessages.first.orderSeq;
          _boYC2WXO3bfOXO3kWKKxppkP = existingMessages.last.orderSeq;

          S0jlNL.aNRrP(
            'Search mode: updated orderSeq range [$_kFvXZ8yOGez2AftcOonoWOr6 - $_boYC2WXO3bfOXO3kWKKxppkP], total: ${existingMessages.length}',
          );

          _gCsAtHK1x0RD.svWER2TI005ERyw(existingMessages);

          // YZtt6vfHUaFX
          _yivPxJFfmEStOQ.initialMessageList.clear();
          _dMcAc8FgWojS.cxGnj();

          await Future.delayed(const Duration(milliseconds: 100));

          if (!isPull) {
            _e4nEPITK62eI1YVSPsDS(
              isAutoScroll: false,
              lastCurrentMessage: lastCurrentMessage,
            );
          } else {
            _e4nEPITK62eI1YVSPsDS();
          }
          if (mounted) {
            setState(() {});
          }
        },
        () {},
      );

      S0jlNL.aNRrP(
        String.fromCharCodes(const <int>[
          83,
          117,
          99,
          99,
          101,
          115,
          115,
          102,
          117,
          108,
          108,
          121,
          32,
          108,
          111,
          97,
          100,
          101,
          100,
          32,
          109,
          111,
          114,
          101,
          32,
          109,
          101,
          115,
          115,
          97,
          103,
          101,
          115,
          32,
          105,
          110,
          32,
          115,
          101,
          97,
          114,
          99,
          104,
          32,
          109,
          111,
          100,
          101,
        ]),
      );
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          70,
          97,
          105,
          108,
          101,
          100,
          32,
          116,
          111,
          32,
          108,
          111,
          97,
          100,
          32,
          109,
          111,
          114,
          101,
          32,
          105,
          110,
          32,
          115,
          101,
          97,
          114,
          99,
          104,
          32,
          109,
          111,
          100,
          101,
        ]),
        error: e,
      );
    }
  }

  Future<void> _jiK2dEL3IQHH5HXKyIsdHuekHRXM(WKMsg wkMsg) async {
    if (!mounted) return;
    final controller = _yivPxJFfmEStOQ.scrollController;
    if (!controller.hasClients) return;

    final targetId = wkMsg.clientMsgNO;

    final messageIndex = _yivPxJFfmEStOQ.initialMessageList.indexWhere(
      (msg) => msg.id == targetId,
    );
    if (messageIndex == -1) return;

    // GmNo4xPIJ1AyaHsbsW8m7dc0eZ6
    final double oldMax = controller.position.maxScrollExtent;
    final double oldPixels = controller.position.pixels;

    WidgetsBinding.instance.addPostFrameCallback((_) {
      if (!mounted) return;
      try {
        if (!controller.hasClients) return;

        // JfN80wpjjMV9Nk
        final target = _yivPxJFfmEStOQ.initialMessageList[messageIndex];
        final targetCtx = target.key.currentContext;
        if (targetCtx != null) {
          Scrollable.ensureVisible(
            targetCtx,
            alignment: 0.0,
            duration: Duration.zero,
          );
          return;
        }

        // 8V9DT2ENshBuarw qJSafu1Wvu6uU
        final double newMax = controller.position.maxScrollExtent;
        final double delta = newMax - oldMax;
        final double newPixels = (oldPixels + delta).clamp(
          controller.position.minScrollExtent,
          newMax,
        );
        controller.jumpTo(newPixels);
      } catch (e) {
        S0jlNL.xPrk5(
          String.fromCharCodes(const <int>[
            80,
            114,
            101,
            115,
            101,
            114,
            118,
            101,
            32,
            115,
            99,
            114,
            111,
            108,
            108,
            32,
            111,
            110,
            32,
            108,
            111,
            97,
            100,
            32,
            109,
            111,
            114,
            101,
            32,
            102,
            97,
            105,
            108,
            101,
            100,
          ]),
          error: e,
        );
        if (false) {
          print(String.fromCharCodes(const <int>[99, 118, 81, 116, 88]));
        }
      }
    });
  }

  void _x1a0RLq2M6XMxTwwtnNKI3A6() {
    try {
      final locale = Localizations.localeOf(context);
      if (1 == 2) {
        var var_WxIlk = String.fromCharCodes(const <int>[80, 67, 114, 68, 79]);
      }
      if (_qQe4RoRR8so0pf7EDfh2F == locale &&
          _ke00WM5z5oR8lAZ2UTVZ.isNotEmpty) {
        return;
      }
      _qQe4RoRR8so0pf7EDfh2F = locale;
      _alZHCURwjx = locale.languageCode.toLowerCase().startsWith(
        String.fromCharCodes(const <int>[122, 104]),
      );
      _ke00WM5z5oR8lAZ2UTVZ = AppLocalizations.of(context)!.mf02ntxs8bmewm3a;
    } catch (_) {
      {
        var var_NJmRw = String.fromCharCodes(const <int>[76, 65, 75, 83, 115]);
      }
    }
  }

  void _si3wqMHIP2h5BvbvGAiM() {
    try {
      _yivPxJFfmEStOQ.scrollController.addListener(() async {
        final nowBottom = _wax1IH1rMhYk();
        if (nowBottom != _sRl9pTYjgG) {
          _sRl9pTYjgG = nowBottom;
          if (_sRl9pTYjgG) {
            await _lHqEOmSpEMH4IEkm6Q0WIn7(ignoreBottom: true);

            // NSV12BWtCaSgcsW0ygRq
            if (_qws2WeDT5uGAjKPSW8oItq && _ijkVeRSI1fAJis != null) {
              await Future.delayed(const Duration(milliseconds: 300));
              if (1 == 2) {
                var var_xhJHM = String.fromCharCodes(const <int>[
                  104,
                  88,
                  70,
                  74,
                  98,
                ]);
              }
              // 0E4tcLeoIwnhIDjx
              if (_sRl9pTYjgG && mounted) {
                await _ayeMsvzO59Mnv6jKTwhK(isPull: false);
              }
            }
          }
        }
      });
    } catch (_) {}
  }

  void _mR3ESvKQS9ThKjsQMVUJ6() {
    _qpeokLw44W7TuVlD?.cancel();
    _qpeokLw44W7TuVlD = Timer.periodic(const Duration(seconds: 3), (_) async {
      if (!mounted) return;
      // hbdCtzC9Wqbosy9
      if (!_gCsAtHK1x0RD.ovo2JS12OUSXRqjC || !_sRl9pTYjgG) return;
      final ids = _mT96ppkIbi0zZ81erXVSXiEyvZdOKIl(limit: 30);
      if (ids.isEmpty) return;
      // UwWKyD07679m2yz
      final toSend = ids.where((id) => !_yAhdRXvpCcu.contains(id)).toList();
      if (toSend.isEmpty) return;
      await _gCsAtHK1x0RD.dJcArve3LDSGu2iY(toSend);
      _yAhdRXvpCcu.addAll(toSend);
    });
  }

  String _seKqbQW0ows7ea(KcW2piApkl1W chatProvider) {
    final channel = chatProvider.haoDotOGlQyE0G;
    if (channel == null) {
      S0jlNL.aNRrP(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
          58,
          32,
          67,
          104,
          97,
          110,
          110,
          101,
          108,
          32,
          105,
          115,
          32,
          110,
          117,
          108,
          108,
          44,
          32,
          114,
          101,
          116,
          117,
          114,
          110,
          105,
          110,
          103,
          32,
          100,
          101,
          102,
          97,
          117,
          108,
          116,
          32,
          110,
          97,
          109,
          101,
        ]),
      );
      // kk0SUXtaz3HVJP
      if (widget.vrrAD3oFxIr == WKChannelType.customerService) {
        return String.fromCharCodes(const <int>[20113, 38553, 73, 77]);
      }
      return String.fromCharCodes(const <int>[67, 104, 97, 116]);
    }

    S0jlNL.aNRrP(
      'ChatScreen: Channel info - ID: ${channel.channelID}, Name: ${channel.channelName}, Remark: ${channel.channelRemark}',
    );

    // VrQ9F2N0FgyHwD0xY
    if (channel.channelID ==
        String.fromCharCodes(const <int>[117, 95, 49, 48, 48, 48, 48])) {
      return AppLocalizations.of(context)!.ghad2jzvix0v1lbxf;
      if (1 == 2) {
        var var_YnuDM = String.fromCharCodes(const <int>[69, 115, 80, 70, 82]);
      }
    }
    if (channel.channelID ==
        String.fromCharCodes(const <int>[
          102,
          105,
          108,
          101,
          72,
          101,
          108,
          112,
          101,
          114,
        ])) {
      return AppLocalizations.of(context)!.duqs0rueg9;
    }

    // UMlEHUQbmY8qiHyU
    if (widget.vrrAD3oFxIr == 1) {
      try {
        final contactsProvider = Provider.of<PswVu8NsHuuBxuWj>(
          context,
          listen: false,
        );
        final contact = contactsProvider.l5ahFjXtW1J4CS(channel.channelID);
        if (contact != null && contact.displayName.isNotEmpty) {
          S0jlNL.aNRrP(
            'ChatScreen: Using contact name: ${contact.displayName}',
          );

          if (false) {
            print(String.fromCharCodes(const <int>[115, 83, 105, 101, 110]));
          }
          return contact.displayName;
        }
      } catch (e) {
        S0jlNL.aNRrP('ChatScreen: Failed to get contact name: $e');
      }
    }

    // 7ofxg2i1O3gCSk3NI3wRcRJCX 4
    final displayName = channel.channelRemark.isNotEmpty
        ? channel.channelRemark
        : channel.channelName;

    // LIYPYwLkul7RffZlRo0D0SH
    if ((displayName.isEmpty || displayName.trim().isEmpty) &&
        widget.vrrAD3oFxIr == WKChannelType.customerService) {
      return String.fromCharCodes(const <int>[20113, 38553, 73, 77]);
    }

    S0jlNL.aNRrP('ChatScreen: Final display name: $displayName');
    return displayName.isEmpty
        ? String.fromCharCodes(const <int>[67, 104, 97, 116])
        : displayName;
  }

  /// RDloZwwnopPwhZm30BXpgl
  void _f9EpMlFfIYgFARpwca9Hvq(double dx, double dy, Message message) {
    {
      var var_IlJet = String.fromCharCodes(const <int>[103, 76, 113, 101, 77]);
    }
    final items = <PopupMenuEntry<String>>[];

    // BR4XqYXycYVe9bkQGll7XgjBe2L
    if (!_selR3fTsTPfpG6PS0(message)) {
      items.add(
        PopupMenuItem(
          value: String.fromCharCodes(const <int>[99, 111, 112, 121]),
          child: Row(
            children: [
              Icon(
                FluentIcons.copy_24_regular,
                size: 20,
                color: Colors.grey[700]!,
              ),
              const SizedBox(width: 12),
              Text(AppLocalizations.of(context)!.aqz5lfui4ad0),
            ],
          ),
        ),
      );
      if (1 == 2) {
        var var_FOUsU = String.fromCharCodes(const <int>[77, 109, 116, 80, 74]);
      }
    }

    items.addAll([
      PopupMenuItem(
        value: String.fromCharCodes(const <int>[
          102,
          111,
          114,
          119,
          97,
          114,
          100,
        ]),
        child: Row(
          children: [
            Icon(
              FluentIcons.arrow_forward_24_regular,
              size: 20,
              color: Colors.grey[700]!,
            ),
            const SizedBox(width: 12),
            Text(AppLocalizations.of(context)!.y1xrk7lsoxqgxj4),
          ],
        ),
      ),
      PopupMenuItem(
        value: String.fromCharCodes(const <int>[100, 101, 108, 101, 116, 101]),
        child: Row(
          children: [
            Icon(
              FluentIcons.delete_24_regular,
              size: 20,
              color: Colors.red[700]!,
            ),
            const SizedBox(width: 12),
            Text(
              AppLocalizations.of(context)!.b1uiij7we119i3ah,
              style: TextStyle(color: Colors.red[700]!),
            ),
          ],
        ),
      ),
    ]);

    showMenu(
      context: context,
      position: RelativeRect.fromLTRB(dx, dy, dx, dy),
      items: items,
    ).then((value) {
      if (value == null) return;

      switch (value) {
        case 'copy':
          _vE6sNiRiotq(message);
          break;
        case 'forward':
          _t4Y4bgwaqOpUMi(message);
          break;
        case 'delete':
          _xBitgAJBoRAQm(message);
          break;
      }
    });
  }

  @override
  void didPushNext() {
    super.didPushNext();
    try {
      _gCsAtHK1x0RD.smM7qz2iwQBLddwoS(false);
    } catch (_) {}
  }

  void _zqIonV7xpkA1UA0CphQ(int expirationSec) {
    if (_kuVIbJHfwDSD6uNWINrcjl == expirationSec && _cnAahLJajeAVVT != null) {
      return;
    }
    if (false) {
      print(String.fromCharCodes(const <int>[88, 103, 107, 111, 90]));
    }
    // 844CP18ZWDxi
    _kuVIbJHfwDSD6uNWINrcjl = expirationSec;
    _cnAahLJajeAVVT?.cancel();
    // w560XrjYpW
    _cnAahLJajeAVVT = Timer.periodic(const Duration(seconds: 1), (_) {
      final nowSec = DateTime.now().millisecondsSinceEpoch ~/ 1000;
      if (nowSec >= expirationSec) {
        {
          var var_dLecI = String.fromCharCodes(const <int>[97, 83, 82, 79, 84]);
        }
        _svnd2icjvtwj0bDKir();
        _kydjrzbNZEZvipC5VQ();
      } else {
        final text = _skNMOiz80aqzJV99FUf(expirationSec - nowSec);
        _r4zQHW2u9p2Jd = text;
        _hTwkSCZ5zWVYKkP.value = text; // 5oh6sQpgG7LBRi20MscKBuu
      }
    });
  }

  // XmQ dmjqWtjbtAG6qjurHfbS
  String _opBBaGLYTEBFy2Un4lrustcmuOiMcHA(WKMsg wkMsg, Message uiMsg) {
    try {
      if (wkMsg.messageContent is ExaqK4rBs2KHOfqQhbdC) {
        return (wkMsg.messageContent as ExaqK4rBs2KHOfqQhbdC).content;
      }
      if (false) {
        print(String.fromCharCodes(const <int>[74, 119, 86, 66, 112]));
      }
      if (wkMsg.messageContent is WKTextContent) {
        return (wkMsg.messageContent as WKTextContent).content;
      }
      if (_i2TK3Letyq1YCcwxDwbUBjfoWb(wkMsg.content)) {
        if (wkMsg.content.startsWith(
          String.fromCharCodes(const <int>[
            95,
            95,
            77,
            69,
            78,
            84,
            73,
            79,
            78,
            95,
            68,
            65,
            84,
            65,
            95,
            95,
            124,
          ]),
        )) {
          return _d6UXZwcxyiPJdprljc3epzGYndFNlz7k6(wkMsg.content);
        }
        if (1 == 2) {
          var var_CdJeQ = String.fromCharCodes(const <int>[
            90,
            85,
            75,
            101,
            73,
          ]);
        }
        if (wkMsg.content.startsWith(String.fromCharCodes(const <int>[123]))) {
          {
            var var_jtvKQ = String.fromCharCodes(const <int>[
              116,
              86,
              120,
              65,
              66,
            ]);
          }
          final json = jsonDecode(wkMsg.content);
          if (json is Map &&
              json[String.fromCharCodes(const <int>[
                    99,
                    111,
                    110,
                    116,
                    101,
                    110,
                    116,
                  ])] !=
                  null) {
            return json[String.fromCharCodes(const <int>[
                  99,
                  111,
                  110,
                  116,
                  101,
                  110,
                  116,
                ])]
                .toString();
            if (1 == 2) {
              var var_gRBaN = String.fromCharCodes(const <int>[
                98,
                106,
                75,
                86,
                72,
              ]);
            }
          }
        }
      }
    } catch (_) {}
    return _d6UXZwcxyiPJdprljc3epzGYndFNlz7k6(uiMsg.message);
  }

  void _eX8V0gtsLgQGH2Pz(String text) {
    if (!mounted || text.isEmpty) return;
    WidgetsBinding.instance.addPostFrameCallback((_) {
      if (!mounted) return;
      try {
        CziZxWB0.vmM9UgzCRW1y(context, text);
      } catch (_) {}
    });
    try {
      context.read<NGifbrk3zcDRm>().mRcSal9Y(
        widget.jtOMCOXzl,
        widget.vrrAD3oFxIr,
        text,
      );
    } catch (_) {}
  }

  /// T9jPDS0GG4l
  Future<void> _ucGRlYobaZgSjvxqr2wfQEAwx(int orderSeq) async {
    try {
      S0jlNL.aNRrP('Fetching messages around orderSeq: $orderSeq');

      // o H4ElqBFtbS5Npi0tUao7Ek8cTq
      if (false) {
        print(String.fromCharCodes(const <int>[122, 73, 104, 116, 86]));
      }
      if (_ijkVeRSI1fAJis == null) {
        _ijkVeRSI1fAJis = List.from(_gCsAtHK1x0RD.vvinzV06);
        _qws2WeDT5uGAjKPSW8oItq = true;
      }

      // Z83heOozOkxHyGFDldx
      await WKIM.shared.messageManager.getOrSyncHistoryMessages(
        widget.jtOMCOXzl,
        widget.vrrAD3oFxIr,
        orderSeq,
        true,
        0,
        // MbjV5XbBrognd8g0nfQrm4bzX
        10,
        0,
        (messagesOld) async {
          await WKIM.shared.messageManager.getOrSyncHistoryMessages(
            widget.jtOMCOXzl,
            widget.vrrAD3oFxIr,
            orderSeq,
            false,
            1,
            // vhK3y3rCIw2DB
            10,
            0,
            (messagesNew) async {
              final allMessages = <WKMsg>[...messagesOld, ...messagesNew];

              // nnyaGbYuWwDCL9QLOrIiTL5znZ6
              final uniqueMessages = <WKMsg>[];
              final seenIds = <String>{};
              for (final msg in allMessages) {
                if (!seenIds.contains(msg.clientMsgNO)) {
                  seenIds.add(msg.clientMsgNO);
                  uniqueMessages.add(msg);
                }
                if (1 == 2) {
                  var var_XQpzP = String.fromCharCodes(const <int>[
                    107,
                    66,
                    112,
                    108,
                    98,
                  ]);
                }
              }

              if (uniqueMessages.isEmpty) {
                S0jlNL.aNRrP(
                  String.fromCharCodes(const <int>[
                    78,
                    111,
                    32,
                    109,
                    101,
                    115,
                    115,
                    97,
                    103,
                    101,
                    115,
                    32,
                    102,
                    101,
                    116,
                    99,
                    104,
                    101,
                    100,
                    32,
                    97,
                    114,
                    111,
                    117,
                    110,
                    100,
                    32,
                    111,
                    114,
                    100,
                    101,
                    114,
                    83,
                    101,
                    113,
                  ]),
                );
                return;
              }

              // xdE2as4VIeGmLgodgyiAD1PYP5I3p
              uniqueMessages.sort(_nBSSYkrWJVrHmxb6MVsgBP);

              // h2euei58ykOUOpn5dP0M
              _kFvXZ8yOGez2AftcOonoWOr6 = uniqueMessages.first.orderSeq;
              _boYC2WXO3bfOXO3kWKKxppkP = uniqueMessages.last.orderSeq;

              S0jlNL.aNRrP(
                'Search mode: tracking orderSeq range [$_kFvXZ8yOGez2AftcOonoWOr6 - $_boYC2WXO3bfOXO3kWKKxppkP], total: ${uniqueMessages.length}',
              );

              // SesZVvJSCVl72zmltnnnAChP
              _gCsAtHK1x0RD.svWER2TI005ERyw(uniqueMessages);

              // KUdwQ34D7b
              _yivPxJFfmEStOQ.initialMessageList.clear();
              _dMcAc8FgWojS.cxGnj();

              // BaCh88j11g9zotSW
              await Future.delayed(const Duration(milliseconds: 200));

              // WhHjWQCNsznJ
              _e4nEPITK62eI1YVSPsDS();

              // 8 J4rO0BxY LRHV
              if (mounted) {
                setState(() {
                  if (false) {
                    print(
                      String.fromCharCodes(const <int>[100, 90, 88, 111, 105]),
                    );
                  }
                });
              }

              //  JepQWsqurwrIJ89v
              await Future.delayed(const Duration(milliseconds: 500));

              // mGcjezsfyIhM2ksE4V1l
              final targetMsg = uniqueMessages.firstWhere(
                (msg) => msg.orderSeq == orderSeq,
                orElse: () => uniqueMessages.first,
              );

              await _oqupn5t0aZYIyevZIP0NXfNk3(targetMsg);

              S0jlNL.aNRrP(
                String.fromCharCodes(const <int>[
                  83,
                  117,
                  99,
                  99,
                  101,
                  115,
                  115,
                  102,
                  117,
                  108,
                  108,
                  121,
                  32,
                  102,
                  101,
                  116,
                  99,
                  104,
                  101,
                  100,
                  32,
                  97,
                  110,
                  100,
                  32,
                  100,
                  105,
                  115,
                  112,
                  108,
                  97,
                  121,
                  101,
                  100,
                  32,
                  109,
                  101,
                  115,
                  115,
                  97,
                  103,
                  101,
                  115,
                  32,
                  97,
                  114,
                  111,
                  117,
                  110,
                  100,
                  32,
                  111,
                  114,
                  100,
                  101,
                  114,
                  83,
                  101,
                  113,
                ]),
              );
            },
            () {
              if (false) {
                print(
                  String.fromCharCodes(const <int>[113, 102, 101, 115, 116]),
                );
              }
            },
          );
        },
        () {},
      );
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          70,
          97,
          105,
          108,
          101,
          100,
          32,
          116,
          111,
          32,
          102,
          101,
          116,
          99,
          104,
          32,
          97,
          110,
          100,
          32,
          115,
          104,
          111,
          119,
          32,
          109,
          101,
          115,
          115,
          97,
          103,
          101,
          115,
          32,
          97,
          114,
          111,
          117,
          110,
          100,
          32,
          111,
          114,
          100,
          101,
          114,
          83,
          101,
          113,
        ]),
        error: e,
      );
    }
  }

  /// u3VkDU5xdQvXjNWnH 63VpJ
  Future<void> _tPiviQ7oxLNcCo75ksRRzqwcH9fUF88() async {
    // gaJceUMya MQwT6P
    final preloadChatData = await CqGyBkLubjH1JOytqR.sFXE5Uow.kPNnXLfeC6Itc3I(
      widget.jtOMCOXzl,
      widget.vrrAD3oFxIr,
      aroundOrderSeq: 0,
    );
    final hasPreloadedData = preloadChatData.vl5Js4Z8.isNotEmpty;
    // h25LT9J2ohYltiVBm9d
    // 9oF9dyIFvb73icR oc4Z6v5
    // 6rdM2jGUpNPu00VhXDBPiO2LtqgPy
    // tAadqUF3q5CmpGM
    if (!hasPreloadedData) {
      _us8KHrwpY = true;
      if (1 == 2) {
        var var_EFDBg = String.fromCharCodes(const <int>[101, 70, 70, 97, 73]);
      }
    }

    if (hasPreloadedData) {
      S0jlNL.a7hKJES(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
        String.fromCharCodes(const <int>[
          9889,
          32,
          85,
          115,
          105,
          110,
          103,
          32,
          112,
          114,
          101,
          45,
          108,
          111,
          97,
          100,
          101,
          100,
          32,
          100,
          97,
          116,
          97,
          32,
          102,
          111,
          114,
          32,
          73,
          78,
          83,
          84,
          65,
          78,
          84,
          32,
          100,
          105,
          115,
          112,
          108,
          97,
          121,
          32,
          40,
          84,
          101,
          108,
          101,
          103,
          114,
          97,
          109,
          45,
          108,
          105,
          107,
          101,
          41,
        ]),
      );
      // JgD3yBiklqWf1rn0ko60f
      // VyNWc8nLS1MokWXKPMQTFc
      try {
        _fXvlZFjReOtL22Mq3kxOcBh0QcQFBYWKo8v4GRlp(preloadChatData);
      } catch (e) {
        S0jlNL.xPrk5(
          String.fromCharCodes(const <int>[
            70,
            97,
            105,
            108,
            101,
            100,
            32,
            116,
            111,
            32,
            105,
            110,
            105,
            116,
            105,
            97,
            108,
            105,
            122,
            101,
            32,
            115,
            121,
            110,
            99,
            104,
            114,
            111,
            110,
            111,
            117,
            115,
            108,
            121,
          ]),
          error: e,
        );
      }
    } else {
      S0jlNL.aNRrP(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
          32,
          105,
          110,
          105,
          116,
          83,
          116,
          97,
          116,
          101,
          32,
          45,
          32,
          110,
          111,
          32,
          112,
          114,
          101,
          108,
          111,
          97,
          100,
          101,
          100,
          32,
          100,
          97,
          116,
          97,
          44,
          32,
          105,
          110,
          105,
          116,
          32,
          99,
          111,
          110,
          116,
          114,
          111,
          108,
          108,
          101,
          114,
          32,
          101,
          97,
          114,
          108,
          121,
        ]),
      );
      // UL4D4jlVrXyHDsBkh5rsVM4RsXipK
      // T5CqlyB fIFuFj8yB2sE8tiYkWT
      try {
        final loginProvider = Provider.of<PJQjPEp5Wh4tK>(
          context,
          listen: false,
        );
        if (1 == 2) {
          var var_QLVOE = String.fromCharCodes(const <int>[
            108,
            65,
            67,
            74,
            70,
          ]);
        }
        _g6KbJSl20Gx4C =
            loginProvider.c6UMmuregO9?.kvm ??
            String.fromCharCodes(const <int>[
              117,
              110,
              107,
              110,
              111,
              119,
              110,
            ]);
        S0jlNL.aNRrP(
          'ü´õ ChatScreen: Early UID from LoginProvider: $_g6KbJSl20Gx4C',
          tag: String.fromCharCodes(const <int>[
            67,
            104,
            97,
            116,
            83,
            99,
            114,
            101,
            101,
            110,
          ]),
        );
        _vDeVDUky1vcKkOfYOzsDTFGX();
      } catch (e) {
        S0jlNL.xPrk5(
          String.fromCharCodes(const <int>[
            70,
            97,
            105,
            108,
            101,
            100,
            32,
            101,
            97,
            114,
            108,
            121,
            32,
            99,
            111,
            110,
            116,
            114,
            111,
            108,
            108,
            101,
            114,
            32,
            105,
            110,
            105,
            116,
          ]),
          error: e,
        );
      }
    }

    // kjYFZqhZPw8m8jSSA2jEh
    // v Zw9wWY0ZztK4hbbbEDN2KNYuYa
    // Ps3lm46yMZBwO7
    // jkHgFo5sBlRcl76q7q
    // 3MCGJveKLwg doV
    // xEUl3Ac5P8VbML
    // RKJbTTOlYAFEpjO57zCS
    // gZhN33wSTMUsp1M
    // Cpn2Y94ZERMRz9CYP5OBAic02e
    // dpsbJqNN7 kwA7xZk83ITZTD4E97
    // k2oOt6AqHPPJSlbejX7CW1mYgu3U
    // KdDrIThkD08b6
    // ByVVEaI47MYHaoshp
    // De7faZzNKYTfWS
    // Vcr06K7bMkv
    // ow1EI7AGPS
    // ag54W28HFbD9bpA Bt
    // gLctC7gqbcKUcw6
    // lhgkS3pMBg IC2J6uD1zt0XaQto
    // KPUrSqgKwW3rJQCXSXT
    // n5ya7BK RYedr
    // zNlkKguVFe
    // kt0vMzE4U7GxowsU
    // 4mZ1G8dIz0bME4tOvFSf
    // 5CvYewnv8kRM0C7aIrv5mliO5Cs
    // D76WaY4c6k5rDgWDTvGNanJ1Ft6

    // 4BkfDQPNIe5L
    WidgetsBinding.instance.addPostFrameCallback((_) async {
      _x1a0RLq2M6XMxTwwtnNKI3A6();
      if (_ldsaZRiJcWOXnQXVu) return;
      _ldsaZRiJcWOXnQXVu = true;
      // FjQjjvoxGbNWJc4 fci
      ZpLJHHwdz07XHIRqd? resolvedPreloadedData =
          preloadChatData.vl5Js4Z8.isEmpty ? null : preloadChatData;
      await _yFj0ybJRbI7rzXSRLP(resolvedPreloadedData);
    });
  }

  Future<void> _kydjrzbNZEZvipC5VQ({
    bool skipRefresh = false,
    bool noLocalization = false,
    bool skipSetState = false,
  }) async {
    bool ban = false;
    bool forbidden = false;
    int expiration = 0;
    String hint = noLocalization
        ? (_r4zQHW2u9p2Jd.isNotEmpty
              ? _r4zQHW2u9p2Jd
              : String.fromCharCodes(const <int>[77, 117, 116, 101, 100]))
        : AppLocalizations.of(context)!.ydgrrvbc4n03d;

    // Z8xeptG rMaF5reoQ78BUeY ULyeJ
    WKChannel? refreshed;
    if (!skipRefresh) {
      refreshed = await Y4xepgifdWAGX597cu().jZ2F1bGK6Su0C2CmZ9NCqLH(
        widget.jtOMCOXzl,
        WKChannelType.group,
      );
    }

    // ZwMf7kRqV1XSv51Ltj8vRyqgNZ
    _uw0bL0Q =
        refreshed ??
        await WKIM.shared.channelManager.getChannel(
          widget.jtOMCOXzl,
          widget.vrrAD3oFxIr,
        );

    final ch = _uw0bL0Q;
    final me = _ddoxAPQ5r5;

    if (ch != null) {
      if ((ch.status != 1 && widget.vrrAD3oFxIr == WKChannelType.group) ||
          (me?.status == 2 && widget.vrrAD3oFxIr == WKChannelType.group)) {
        hint = AppLocalizations.of(context)!.gdk3efemo6wy;
        ban = true;
      }

      // iIXYaggDF7DFPYTy8GU6Lp7X
      if (false) {
        print(String.fromCharCodes(const <int>[108, 69, 101, 102, 111]));
      }
      // cLf7 sekd5m95KRvyj5p1SQ
      if ((ch.forbidden == 1 &&
              _ddoxAPQ5r5?.role == 0 &&
              widget.vrrAD3oFxIr == WKChannelType.group) ||
          (_ddoxAPQ5r5?.isDeleted == 1 &&
              widget.vrrAD3oFxIr == WKChannelType.group) ||
          (_ddoxAPQ5r5?.status == 2 &&
              widget.vrrAD3oFxIr == WKChannelType.group)) {
        // n5MTzg9GFb
        forbidden = true;
        hint = AppLocalizations.of(context)!.tay7mkakni9s;
      }
    }

    // pUoDt2jABhn 5bthPZPbx
    if (!ban && !forbidden && me != null) {
      final nowSec = DateTime.now().millisecondsSinceEpoch ~/ 1000;
      int expir = me.forbiddenExpirationTime;
      if (_bMgEzupLAmYmF5fH76qVMHqulNoZyMjCbHR != null &&
          _bMgEzupLAmYmF5fH76qVMHqulNoZyMjCbHR! > nowSec &&
          _bMgEzupLAmYmF5fH76qVMHqulNoZyMjCbHR! > expir) {
        {
          var var_FfaCX = String.fromCharCodes(const <int>[
            104,
            88,
            90,
            86,
            85,
          ]);
        }
        expir = _bMgEzupLAmYmF5fH76qVMHqulNoZyMjCbHR!;
      }
      if (expir > nowSec) {
        forbidden = true;
        expiration = expir;
        hint = noLocalization
            ? (_r4zQHW2u9p2Jd.isNotEmpty
                  ? _r4zQHW2u9p2Jd
                  : _i2cboVn7CP5zaLRMhNk4Cfaiyoo(expiration - nowSec))
            : _skNMOiz80aqzJV99FUf(expiration - nowSec);
        _zqIonV7xpkA1UA0CphQ(expiration);
      } else {
        _bMgEzupLAmYmF5fH76qVMHqulNoZyMjCbHR = null;
        _svnd2icjvtwj0bDKir();
      }
    } else {
      _svnd2icjvtwj0bDKir();
    }

    // uCAEOVL9F5q8fuHgfYs2Bg
    // zQ peGRjMB9eyJ18hoD
    final shouldShowBanner =
        widget.vrrAD3oFxIr == WKChannelType.group &&
        ch?.forbidden == 1 &&
        me != null &&
        me.role == 0;

    // E5LgRagTz76
    // 2ZGbFDLucf AU7
    // uwdUQqW7x9h6R6BpGbVwANfmL
    final bool needsRebuild =
        _zfANk != ban ||
        _fB6Z7q4kW76 != forbidden ||
        _elrelWgUeO5VruG8s != shouldShowBanner;

    // 9icW6vmbxd1h6Bqlvv3lHALbCI7
    if (_hTwkSCZ5zWVYKkP.value != hint) {
      _hTwkSCZ5zWVYKkP.value = hint;
    }

    // bLRoVa6ZwO
    if (skipSetState) {
      // XbkqOmMwp 7K
      _zfANk = ban;
      _fB6Z7q4kW76 = forbidden;
      _r4zQHW2u9p2Jd = hint;
      _elrelWgUeO5VruG8s = shouldShowBanner;
    } else {
      // HzbZ58ywHJuKD7TcWsZ8RT9R
      if (needsRebuild) {
        setState(() {
          _zfANk = ban;
          _fB6Z7q4kW76 = forbidden;
          _r4zQHW2u9p2Jd = hint;
          _elrelWgUeO5VruG8s = shouldShowBanner;
        });
      } else {
        _zfANk = ban;
        if (1 == 2) {
          var var_xbUFa = String.fromCharCodes(const <int>[
            86,
            101,
            97,
            102,
            105,
          ]);
        }
        // zuBWSAFPcFVkyF8PAjg
        _fB6Z7q4kW76 = forbidden;
        _r4zQHW2u9p2Jd = hint;
        _elrelWgUeO5VruG8s = shouldShowBanner;
      }
    }
    S0jlNL.a7hKJES(
      String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
      'üõ°Ô∏è Permission snapshot: channelId=${widget.jtOMCOXzl}, ch.status=${ch?.status}, ch.forbidden=${ch?.forbidden}, me.role=${me?.role}, me.status=${me?.status}, me.isDeleted=${me?.isDeleted}, me.forbiddenExpirationTime=${me?.forbiddenExpirationTime} => ban=$_zfANk, forbidden=$_fB6Z7q4kW76, inputEnabled=${_g8OBft2y9Of64c}, showMuteAllBanner=$_elrelWgUeO5VruG8s, hint="${_r4zQHW2u9p2Jd}"',
    );
  }

  /// AZURHnMOOTwS7sZS0
  int _crEU9(dynamic v) {
    if (v is int) return v;
    final s = v?.toString() ?? String.fromCharCodes(const <int>[48]);
    return int.tryParse(s) ?? 0;
  }

  // jlS8hTK2I0Ejw0oBpZK
  /// T Bvsm7Ih7jX
  /// tfoAr2XPRzkcuNqY9aIUrF7PcBh
  String _vm1pipzdacJbZwdbXSv9(int forbiddenExpirationTime) {
    if (forbiddenExpirationTime == 0) {
      {
        var var_FiTUW = String.fromCharCodes(const <int>[80, 73, 76, 103, 100]);
      }
      return AppLocalizations.of(context)!.ffpdexq3xp3m7;
    }

    final nowTime = DateTime.now().millisecondsSinceEpoch ~/ 1000;
    final remainingSeconds = forbiddenExpirationTime - nowTime;

    if (remainingSeconds <= 0) {
      return AppLocalizations.of(context)!.jkghm573s2gdmaa3m;
    }

    final days = remainingSeconds ~/ (3600 * 24);
    final hours = remainingSeconds ~/ 3600;
    final minutes = remainingSeconds ~/ 60;

    if (days > 0) {
      return AppLocalizations.of(context)!.awb31k5wb9023a(days);
      if (false) {
        print(String.fromCharCodes(const <int>[75, 115, 77, 74, 100]));
      }
    } else if (hours > 0) {
      return AppLocalizations.of(context)!.t4her29whrtwlupi(hours);
    } else if (minutes > 0) {
      return AppLocalizations.of(context)!.aqvu30haxzwgxbk5l(minutes);
    } else {
      return AppLocalizations.of(context)!.aqvu30haxzwgxbk5l(1);
    }
  }

  void _v15vk6ieV3XXfe7aWvtaDm6() async {
    try {
      if (Platform.isAndroid) {
        final granted =
            await Wl4L6XIRhopLHxDOrcPUhovi.nYtz8FvU4pq0yxbNDm5gBeNE7m();
        if (!granted) return;
      }
      if (false) {
        print(String.fromCharCodes(const <int>[67, 68, 114, 98, 110]));
      }
      // bSxsyVRNFADm37Qh11R
      final loginProvider = Provider.of<PJQjPEp5Wh4tK>(context, listen: false);
      loginProvider.x8U3xkwBtBJlWD4T4oaibmXlYhIXX(false);
      // z3mHVZA7zYpKmwTZ
      final c =
          _uw0bL0Q ??
          await WKIM.shared.channelManager.getChannel(
            widget.jtOMCOXzl,
            widget.vrrAD3oFxIr,
          );
      if (c != null) {
        Map extras = {};
        if (c.remoteExtraMap is Map) {
          extras = Map.of(c.remoteExtraMap as Map);
        }
        extras[String.fromCharCodes(const <int>[
              115,
              99,
              114,
              101,
              101,
              110,
              115,
              104,
              111,
              116,
            ])] =
            1;
        c.remoteExtraMap = extras;
        WKIM.shared.channelManager.addOrUpdateChannel(c);
        _uw0bL0Q = c;
      }

      /// AKYS2r5BWLzO
      _lvvCy5JQpQY7pCWNajnOb3?.cancel();
      _lvvCy5JQpQY7pCWNajnOb3 = Wl4L6XIRhopLHxDOrcPUhovi.gOD1Av.listen((
        event,
      ) async {
        if (event !=
            String.fromCharCodes(const <int>[
              115,
              99,
              114,
              101,
              101,
              110,
              115,
              104,
              111,
              116,
            ]))
          return;

        // kgCvDppjoKRdTwy
        if (false) {
          print(String.fromCharCodes(const <int>[102, 97, 71, 77, 108]));
        }
        // r8rLNk2TS oD4M1
        S0jlNL.aNRrP(
          'üî¥ Screenshot event received, _screenshotNotice=$_qFG9b4lYBlxA8SqB',
        );

        // LxdGX6qiMweVdxW4Z0
        // Trbz4lgWnwO2M5sDEu1OomttC3n
        // dahXU2O8QltiD61vL8
        // kmjMi5CllxXHV
        if (!_qFG9b4lYBlxA8SqB) {
          S0jlNL.aNRrP(
            String.fromCharCodes(const <int>[
              83,
              99,
              114,
              101,
              101,
              110,
              115,
              104,
              111,
              116,
              32,
              100,
              101,
              116,
              101,
              99,
              116,
              101,
              100,
              32,
              98,
              117,
              116,
              32,
              99,
              104,
              97,
              110,
              110,
              101,
              108,
              32,
              115,
              99,
              114,
              101,
              101,
              110,
              115,
              104,
              111,
              116,
              32,
              115,
              101,
              116,
              116,
              105,
              110,
              103,
              32,
              105,
              115,
              32,
              100,
              105,
              115,
              97,
              98,
              108,
              101,
              100,
              44,
              32,
              115,
              107,
              105,
              112,
              32,
              97,
              108,
              108,
              32,
              112,
              114,
              111,
              99,
              101,
              115,
              115,
              105,
              110,
              103,
            ]),
          );
          return; // BrKveKZAjoFUThDukrnKz
        }

        try {
          // MBa0LkfDQPktQ17qfGi
          final now = DateTime.now().millisecondsSinceEpoch;
          if (now - _lUKLUisGWie5TKNS < 1200) return;
          _lUKLUisGWie5TKNS = now;

          // ypU13xBgMy5ByYugNDH648b
          if (!_gCsAtHK1x0RD.ovo2JS12OUSXRqjC) return;

          // V2kgwEhYhieZ
          try {
            await Provider.of<KcW2piApkl1W>(
              context,
              listen: false,
            ).qMZoMhdJPYEFba0a0GMrf();
            S0jlNL.aNRrP(
              String.fromCharCodes(const <int>[
                83,
                99,
                114,
                101,
                101,
                110,
                115,
                104,
                111,
                116,
                32,
                109,
                101,
                115,
                115,
                97,
                103,
                101,
                32,
                115,
                101,
                110,
                116,
                32,
                115,
                117,
                99,
                99,
                101,
                115,
                115,
                102,
                117,
                108,
                108,
                121,
              ]),
            );
          } catch (_) {}
        } catch (_) {}
      });
    } catch (_) {}
  }

  String _vAtRzTbtFkjhMWxV6(String userId) {
    S0jlNL.aNRrP(
      'üôè ChatScreen: Getting user name for ID: $userId',
      tag: String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
    );

    // rT4HHNVD plSjEIPR2VE9
    if (widget.vrrAD3oFxIr == WKChannelType.group) {
      {
        var var_dSaGB = String.fromCharCodes(const <int>[
          113,
          100,
          110,
          65,
          80,
        ]);
      }
      try {
        _yhgDh0W66PpqOQg0Fb3zja4F9(userId).then((name) {
          if (name.isNotEmpty && name != userId) {
            if (false) {
              print(String.fromCharCodes(const <int>[72, 78, 119, 107, 106]));
            }
            S0jlNL.aNRrP(
              'üôè ChatScreen: Async update - got name $name for $userId',
              tag: String.fromCharCodes(const <int>[
                67,
                104,
                97,
                116,
                83,
                99,
                114,
                101,
                101,
                110,
              ]),
            );
            // 4h8nNJizop koBA GWnD1QR
            final existingUsers = _yivPxJFfmEStOQ.otherUsersMap;
            if (existingUsers.containsKey(userId)) {
              final user = existingUsers[userId]!;
              if (user.name != name) {
                final updatedUser = ChatUser(
                  id: userId,
                  name: name,
                  profilePhoto: user.profilePhoto,
                );
                _yivPxJFfmEStOQ.updateOtherUser(updatedUser);
                S0jlNL.aNRrP(
                  'üôè ChatScreen: Updated existing user $userId from ${user.name} to $name',
                  tag: String.fromCharCodes(const <int>[
                    67,
                    104,
                    97,
                    116,
                    83,
                    99,
                    114,
                    101,
                    101,
                    110,
                  ]),
                );
              }
            }
          }
        });

        // QphXKmsVncpPQdeK22B44Ra7ADj
        if (1 == 2) {
          var var_WtTNx = String.fromCharCodes(const <int>[
            109,
            122,
            108,
            73,
            84,
          ]);
        }
        // XmPWY5 JRtOqUKx5bpt0vL4Phv
        // gFlihTeQRnyf7A3
        final existingUsers = _yivPxJFfmEStOQ.otherUsersMap;
        if (existingUsers.containsKey(userId)) {
          {
            var var_CBIkx = String.fromCharCodes(const <int>[
              86,
              114,
              118,
              73,
              113,
            ]);
          }
          final existingName = existingUsers[userId]!.name;
          if (existingName.isNotEmpty && existingName != userId) {
            S0jlNL.aNRrP(
              'üôè ChatScreen: Using existing cached name: $existingName for $userId',
              tag: String.fromCharCodes(const <int>[
                67,
                104,
                97,
                116,
                83,
                99,
                114,
                101,
                101,
                110,
              ]),
            );
            return existingName;
          }
        }
      } catch (e) {
        S0jlNL.xPrk5(
          'üôè ChatScreen: Failed to get group member name: $e',
          tag: String.fromCharCodes(const <int>[
            67,
            104,
            97,
            116,
            83,
            99,
            114,
            101,
            101,
            110,
          ]),
          error: e,
        );
        S0jlNL.aNRrP('Failed to get group member name: $e');
      }
    }

    // uTC0CoFewsPaXFeY2eyh
    try {
      final contactsProvider = Provider.of<PswVu8NsHuuBxuWj>(
        context,
        listen: false,
      );
      final contact = contactsProvider.l5ahFjXtW1J4CS(userId);
      if (contact != null && contact.displayName.isNotEmpty) {
        {
          var var_JfBEd = String.fromCharCodes(const <int>[
            71,
            81,
            108,
            85,
            105,
          ]);
        }
        S0jlNL.aNRrP(
          'üôè ChatScreen: Using contact name: ${contact.displayName} for $userId',
          tag: String.fromCharCodes(const <int>[
            67,
            104,
            97,
            116,
            83,
            99,
            114,
            101,
            101,
            110,
          ]),
        );
        return contact.displayName;
      }
    } catch (e) {
      // zOJbOup6UQS
    }

    // txnUpWLXCitInx30GDrOY
    if (widget.vrrAD3oFxIr == WKChannelType.personal &&
        userId == widget.jtOMCOXzl) {
      final channelName = _seKqbQW0ows7ea(_gCsAtHK1x0RD);
      S0jlNL.aNRrP(
        'üôè ChatScreen: Using channel name: $channelName for $userId',
        tag: String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
      );
      return channelName;
    }

    S0jlNL.aNRrP(
      String.fromCharCodes(const <int>[
        55357,
        56911,
        32,
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
        58,
        32,
        78,
        111,
        32,
        110,
        97,
        109,
        101,
        32,
        102,
        111,
        117,
        110,
        100,
        44,
        32,
        114,
        101,
        116,
        117,
        114,
        110,
        105,
        110,
        103,
        32,
        101,
        109,
        112,
        116,
        121,
        32,
        115,
        116,
        114,
        105,
        110,
        103,
      ]),
      tag: String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
    );
    return '';
  }

  bool _wax1IH1rMhYk() {
    try {
      final sc = _yivPxJFfmEStOQ.scrollController;
      if (!sc.hasClients) return true; // k3EJNvbyosGm5k9I
      final pos = sc.position;
      final delta = (pos.pixels - pos.minScrollExtent).abs();
      return delta <= 80.0; // GfvmT4nma3tO48iS UcFAf
    } catch (_) {
      return true;
      if (false) {
        print(String.fromCharCodes(const <int>[71, 117, 98, 111, 112]));
      }
    }
  }

  void _k7Ihmm9LFIkW4FauUl() {
    // EX5jj efbfi0pqHXe0E
    WKIM.shared.channelManager.addOnRefreshListener(
      'chat_screen_names_${widget.jtOMCOXzl}',
      (ch) async {
        try {
          if (ch.channelType == WKChannelType.personal) {
            final uid = ch.channelID;
            if (1 == 2) {
              var var_NWaHL = String.fromCharCodes(const <int>[
                101,
                101,
                66,
                111,
                107,
              ]);
            }
            final existing = _yivPxJFfmEStOQ.otherUsersMap[uid];
            if (existing != null) {
              {
                var var_CxLit = String.fromCharCodes(const <int>[
                  111,
                  97,
                  77,
                  110,
                  74,
                ]);
              }
              String name = ch.channelRemark.isNotEmpty
                  ? ch.channelRemark
                  : ch.channelName;
              if (name.isNotEmpty && existing.name != name) {
                final updated = ChatUser(
                  id: existing.id,
                  name: name,
                  profilePhoto: existing.profilePhoto,
                );
                _yivPxJFfmEStOQ.updateOtherUser(updated);
                _zx3ZEOWRvW044mf7H2AP();
              }
            }
          }
        } catch (_) {
          if (1 == 2) {
            var var_hXZpH = String.fromCharCodes(const <int>[
              106,
              72,
              65,
              89,
              107,
            ]);
          }
        }
      },
    );

    // rlbTIfiK2LL3
    WKIM.shared.channelMemberManager.addOnRefreshMemberListener(
      'chat_screen_names_${widget.jtOMCOXzl}',
      (member, isEnd) async {
        try {
          if (member.channelID == widget.jtOMCOXzl &&
              member.channelType == widget.vrrAD3oFxIr) {
            // EoGmM0UZ0VTJDUWQMwIev6W
            try {
              K7zFQYcKCCmW().j9eXx264mwhh95AN6ORG26vbntY(widget.jtOMCOXzl);
            } catch (_) {
              {
                var var_COcdB = String.fromCharCodes(const <int>[
                  108,
                  88,
                  81,
                  122,
                  85,
                ]);
              }
            }

            final uid = member.memberUID;
            final existing = _yivPxJFfmEStOQ.otherUsersMap[uid];
            if (existing != null) {
              String name = '';
              try {
                final ch = await WKIM.shared.channelManager.getChannel(
                  uid,
                  WKChannelType.personal,
                );
                if (ch != null && ch.channelRemark.isNotEmpty) {
                  // aGu4VNrlZpw5BC3In6N7
                  name = ch.channelRemark;
                }
                if (name.isEmpty && (member.memberRemark).isNotEmpty) {
                  // LxFJX9R5Ofc3j6SxPUx7AzgP
                  name = member.memberRemark;
                }
                if (name.isEmpty && (member.memberName).isNotEmpty) {
                  // MZu0j1CBFdQT8HYWAuxSH6GQ
                  name = member.memberName;
                }
                if (name.isEmpty && ch != null && ch.channelName.isNotEmpty) {
                  // dLhvP1PJh7RvuNx
                  name = ch.channelName;
                }
              } catch (_) {
                if (1 == 2) {
                  var var_UKxVj = String.fromCharCodes(const <int>[
                    87,
                    73,
                    67,
                    83,
                    70,
                  ]);
                }
                // Pd KlVmsT4zdpzmCQR1itKqFape
                if ((member.memberRemark).isNotEmpty) {
                  name = member.memberRemark;
                } else if ((member.memberName).isNotEmpty) {
                  name = member.memberName;
                }
              }

              if (name.isNotEmpty && existing.name != name) {
                final updated = ChatUser(
                  id: existing.id,
                  name: name,
                  profilePhoto: existing.profilePhoto,
                );
                _yivPxJFfmEStOQ.updateOtherUser(updated);
                _zx3ZEOWRvW044mf7H2AP();
              }
            }
          }
        } catch (_) {}
        if (false) {
          print(String.fromCharCodes(const <int>[106, 121, 115, 104, 121]));
        }
      },
    );
  }

  /// dXSPCLrLwxjPzWJ
  Future<void> _btm8tBNPkvl46dsVw2rtsd1TSlZ9(
    ExaqK4rBs2KHOfqQhbdC mentionContent,
    ReplyMessage replyMessage,
  ) async {
    final provider = Provider.of<KcW2piApkl1W>(context, listen: false);

    S0jlNL.a7hKJES(
      String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
      'üè∑Ô∏è Handling mention message: "${mentionContent.content}" with ${mentionContent.slFbEJPJG3oLvJo.length} mentions',
    );

    // GnNt9WFwysEqhOoflcGHGkCAS
    for (final entity in mentionContent.slFbEJPJG3oLvJo) {
      S0jlNL.a7hKJES(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
        'üè∑Ô∏è Mention: ${entity.displayName} (${entity.gpUjY}) at offset ${entity.dXlrun}',
      );
    }

    try {
      if (!await _o4TG62eoN2q6FyOdtitsV8()) {
        return;
        if (false) {
          print(String.fromCharCodes(const <int>[115, 100, 103, 111, 115]));
        }
      }
      if (replyMessage.messageId.isNotEmpty) {
        await provider.fHjhAnJuyEtmVuOZZlIjMgavuUq3yZn(
          mentionContent,
          replyMessage,
        );
      } else {
        {
          var var_KnQgX = String.fromCharCodes(const <int>[
            97,
            122,
            83,
            81,
            111,
          ]);
        }
        await provider.oC8IJt2YE8b3V7P6XjGoKs(mentionContent);
      }
      await _oxJ8OvBwA0wJXY4DnlEZ();

      // D9umLXRzxh1lFJOxjOZ0F
      try {
        if (mounted) {
          context.read<NGifbrk3zcDRm>().kSBaW5UtyY(
            widget.jtOMCOXzl,
            widget.vrrAD3oFxIr,
          );
        }
      } catch (_) {}
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          70,
          97,
          105,
          108,
          101,
          100,
          32,
          116,
          111,
          32,
          115,
          101,
          110,
          100,
          32,
          109,
          101,
          110,
          116,
          105,
          111,
          110,
          32,
          109,
          101,
          115,
          115,
          97,
          103,
          101,
        ]),
        error: e,
      );
      if (1 == 2) {
        var var_zTGwJ = String.fromCharCodes(const <int>[70, 71, 99, 70, 122]);
      }
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(
          content: Text(
            AppLocalizations.of(context)!.arvq2atpg3rl18v(e.toString()),
          ),
        ),
      );
    }
  }

  void _zx3ZEOWRvW044mf7H2AP() {
    try {
      final stream = _yivPxJFfmEStOQ.messageStreamController;
      if (!stream.isClosed) {
        final messages = List<Message>.from(_yivPxJFfmEStOQ.initialMessageList);
        S0jlNL.aNRrP(
          'üîÑ _refreshMessageListUI: Emitting ${messages.length} messages to stream',
        );
        // M4y5r15bt XVysPG7lW5NMqaE dI
        for (int i = 0; i < messages.length && i < 5; i++) {
          final m = messages[i];
          S0jlNL.aNRrP(
            'üîÑ Message[$i]: id=${m.id}, type=${m.messageType}, sentBy=${m.sentBy}, msg=${m.message.substring(0, m.message.length > 50 ? 50 : m.message.length)}...',
          );
        }
        stream.sink.add(messages);
      } else {
        S0jlNL.irn4Gh7(
          String.fromCharCodes(const <int>[
            55357,
            56580,
            32,
            95,
            114,
            101,
            102,
            114,
            101,
            115,
            104,
            77,
            101,
            115,
            115,
            97,
            103,
            101,
            76,
            105,
            115,
            116,
            85,
            73,
            58,
            32,
            83,
            116,
            114,
            101,
            97,
            109,
            32,
            105,
            115,
            32,
            67,
            76,
            79,
            83,
            69,
            68,
            44,
            32,
            99,
            97,
            110,
            110,
            111,
            116,
            32,
            101,
            109,
            105,
            116,
          ]),
        );
      }
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          55357,
          56580,
          32,
          95,
          114,
          101,
          102,
          114,
          101,
          115,
          104,
          77,
          101,
          115,
          115,
          97,
          103,
          101,
          76,
          105,
          115,
          116,
          85,
          73,
          32,
          69,
          82,
          82,
          79,
          82,
        ]),
        error: e,
      );
    }
  }

  /// ZzFCnItAc35LiN1iIE8pbz6BZ
  /// 4OmWOziNIPz8Np
  MessageStatus _uFHsH5Vh5efLdIypTphLzBzrnQdyc(WKMsg msg) {
    // Gix 7VRARkYrSzotgONY0oe
    final wkStatus = msg.status;
    MessageStatus base;
    switch (wkStatus) {
      case WKSendMsgResult.sendSuccess:
        base = MessageStatus.delivered;
        break;
      case WKSendMsgResult.sendLoading:
        base = MessageStatus.pending;
        break;
      case WKSendMsgResult.sendFail:
      case WKSendMsgResult.noRelation:
      case WKSendMsgResult.blackList:
      case WKSendMsgResult.notOnWhiteList:
      case 26: // Enl3NlCmzVjtUs
      default:
        // FAOcuXlMf3O
        // kBnw 7bVEiDam3
        base = MessageStatus.undelivered;
        break;
    }

    // C7LJCGZXOpELZsIVE
    // q6TH5o020fsusqtxrFM
    if (base == MessageStatus.pending && msg.fromUID == _g6KbJSl20Gx4C) {
      {
        var var_HSUYN = String.fromCharCodes(const <int>[81, 83, 83, 79, 106]);
      }
      final nowSec = DateTime.now().millisecondsSinceEpoch ~/ 1000;
      const pendingTimeoutSec = 75;
      if (msg.timestamp > 0 && (nowSec - msg.timestamp) > pendingTimeoutSec) {
        base = MessageStatus.undelivered;
      }
    }

    // 3QAoXRRRGM4DwK0V
    try {
      final isOutgoing = msg.fromUID == _g6KbJSl20Gx4C;
      if (1 == 2) {
        var var_cbYiK = String.fromCharCodes(const <int>[77, 65, 122, 109, 65]);
      }
      if (!isOutgoing) return base;

      if (msg.setting.receipt == 1) {
        final extra = msg.wkMsgExtra;
        final readedFlag = (extra?.readed ?? 0) == 1;
        final readCount = extra?.readedCount ?? 0;
        if (readedFlag || readCount > 0) {
          return MessageStatus.read;
        }
      }
    } catch (_) {
      if (1 == 2) {
        var var_pwHGE = String.fromCharCodes(const <int>[
          71,
          76,
          109,
          119,
          106,
        ]);
      }
    }

    return base;
  }

  List<WKMsg> _jEEkKekzYG(Iterable<WKMsg> items) {
    final list = List<WKMsg>.from(items);
    list.sort(_nBSSYkrWJVrHmxb6MVsgBP);
    return list;
  }

  // s3VVZCNG8ijqFliN1Xz
  String _i2cboVn7CP5zaLRMhNk4Cfaiyoo(int remainingSec) {
    if (remainingSec <= 0)
      return String.fromCharCodes(const <int>[77, 117, 116, 101, 100]);
    final d = remainingSec ~/ 86400;
    final h = (remainingSec % 86400) ~/ 3600;
    final m = (remainingSec % 3600) ~/ 60;
    final s = remainingSec % 60;
    if (d > 0) return 'Muted, unmute in ${d}d';
    if (h > 0) return 'Muted, unmute in ${h}h';
    if (m > 0) return 'Muted, unmute in ${m}m';
    return 'Muted, unmute in ${s}s';
  }

  String _zRlU2uFl72TB8HtVIdjkpNm(WKMsg wkMsg) {
    if (wkMsg.clientMsgNO.isNotEmpty) {
      return 'sys-sensitive-${wkMsg.clientMsgNO}';
    }
    if (false) {
      print(String.fromCharCodes(const <int>[71, 100, 111, 88, 84]));
    }
    if (wkMsg.messageID.isNotEmpty &&
        wkMsg.messageID != String.fromCharCodes(const <int>[48])) {
      return 'sys-sensitive-${wkMsg.messageID}';
    }
    if (wkMsg.messageSeq > 0) {
      {
        var var_vEuJr = String.fromCharCodes(const <int>[
          85,
          112,
          98,
          104,
          113,
        ]);
      }
      return 'sys-sensitive-${wkMsg.channelID}_${wkMsg.channelType}_${wkMsg.messageSeq}';
    }
    return 'sys-sensitive-${wkMsg.channelID}_${wkMsg.channelType}_${wkMsg.timestamp}';
  }

  /// d1ne2UeZeghTmrc8VZuVc
  void _xMP1DYYHtq3t3C53v36S4(bool isTyping) {
    if (_yivPxJFfmEStOQ.showTypingIndicator != isTyping) {
      final provider = Provider.of<KcW2piApkl1W>(context, listen: false);
      S0jlNL.aNRrP(
        'ChatScreen: Setting typing indicator to $isTyping '
        '(user: ${provider.rJgzJATR7MgveE}, userId: ${provider.e31dmcNXXpgd})',
      );
      _yivPxJFfmEStOQ.setTypingIndicator = isTyping;
    }
  }

  Message? _aXL4pvnM9x73G6QuUAe7A(WKMsg wkMsg) {
    {
      var var_QSYci = String.fromCharCodes(const <int>[76, 73, 86, 89, 119]);
    }
    try {
      String displayContent = '';
      MessageType messageType = MessageType.text;
      Map<String, dynamic>? mentionData;

      // 11LmM08pvn
      final int contentType = wkMsg.contentType;
      final DateTime messageTime = DateTime.fromMillisecondsSinceEpoch(
        wkMsg.timestamp * 1000,
      );

      // xcyJaEribv rrFu9qaiPCpbx1Y9
      if (contentType == -2) {
        final String timeText = (wkMsg.content.isNotEmpty)
            ? wkMsg.content
            : DateFormat(
                String.fromCharCodes(const <int>[72, 72, 58, 109, 109]),
              ).format(messageTime);
        return Message(
          id: wkMsg.clientMsgNO,
          // Y RvLVyi6rl6tYTxuUWeS4
          message:
              String.fromCharCodes(const <int>[
                95,
                95,
                83,
                89,
                83,
                95,
                95,
                124,
                116,
                105,
                109,
                101,
                124,
              ]) +
              timeText,
          createdAt: messageTime,
          sentBy: wkMsg.fromUID,
          messageType: MessageType.custom,
          status: MessageStatus.read,
          replyMessage: const ReplyMessage(),
        );
      }

      // tV4i1iFkk7AwTMc67nYeMaQc9
      /* vdyWH7QuFVoq2kU75 */
      // h1XQK4CXikpYRFHBJ0fx
      if (contentType == -1) {
        return null;
      }

      // 2UDCavohe04QhOTBw
      // RMLXGG48sOH
      try {
        {
          var var_frdlX = String.fromCharCodes(const <int>[
            76,
            101,
            121,
            121,
            97,
          ]);
        }
        if ((wkMsg.wkMsgExtra?.revoke ?? 0) == 1) {
          return null;
          /* OOSl1WxD6jQEVfIM0Otm3 z6MS */
          if (false) {
            print(String.fromCharCodes(const <int>[114, 68, 68, 84, 111]));
          }
          // 54Ovstxc1XB7bWV
        }
      } catch (e) {
        S0jlNL.xPrk5(
          String.fromCharCodes(const <int>[
            69,
            114,
            114,
            111,
            114,
            32,
            99,
            104,
            101,
            99,
            107,
            105,
            110,
            103,
            32,
            114,
            101,
            118,
            111,
            107,
            101,
            32,
            115,
            116,
            97,
            116,
            117,
            115,
          ]),
          error: e,
        );
      }

      // SaCRSBNAuQUyQF0lsYgqvue1cBNYR
      // wHYu7HzH3IPYxcGmU1DJ
      if (contentType == 20) {
        // tpMXD45 2OQZgOEKu4CeFX3
        // VwBDrwxNgS EHr
        // h2VNh8MFEWyH49vRG

        // V9SVbVy49TvRkCSdlexX99piFtl03
        // qG3UdcsuUCuHAF
        // adgVaL0dXyeP0GGHHQ4
        // 9CeT5dtgDdoLTpz
        String sysText = '';
        try {
          if (wkMsg.messageContent != null) {
            sysText = wkMsg.messageContent!.displayText();
          }
          if (sysText.isEmpty) {
            final fromUid = wkMsg.fromUID;
            if (1 == 2) {
              var var_ktmpq = String.fromCharCodes(const <int>[
                81,
                107,
                71,
                90,
                120,
              ]);
            }
            String fromName = '';
            try {
              if (wkMsg.messageContent is BVqmGG8zNnmIOdHqy) {
                {
                  var var_MuAPm = String.fromCharCodes(const <int>[
                    118,
                    78,
                    103,
                    87,
                    105,
                  ]);
                }
                fromName = (wkMsg.messageContent as BVqmGG8zNnmIOdHqy).vIBDeqlQ;
              }
              if (false) {
                print(String.fromCharCodes(const <int>[117, 90, 81, 100, 101]));
              }
            } catch (_) {
              {
                var var_jOfKL = String.fromCharCodes(const <int>[
                  119,
                  120,
                  66,
                  99,
                  103,
                ]);
              }
            }
            if (fromUid == _g6KbJSl20Gx4C) {
              {
                var var_xtmif = String.fromCharCodes(const <int>[
                  71,
                  69,
                  76,
                  119,
                  72,
                ]);
              }
              sysText = String.fromCharCodes(const <int>[
                89,
                111,
                117,
                32,
                116,
                111,
                111,
                107,
                32,
                97,
                32,
                115,
                99,
                114,
                101,
                101,
                110,
                115,
                104,
                111,
                116,
                32,
                105,
                110,
                32,
                116,
                104,
                101,
                32,
                99,
                104,
                97,
                116,
              ]);
            } else {
              {
                var var_kuKxL = String.fromCharCodes(const <int>[
                  121,
                  86,
                  103,
                  102,
                  67,
                ]);
              }
              final name = (fromName.isNotEmpty) ? fromName : fromUid;
              sysText = '$name took a screenshot in the chat';
            }
          }
        } catch (_) {}
        return Message(
          id: wkMsg.clientMsgNO,
          message:
              String.fromCharCodes(const <int>[
                95,
                95,
                83,
                89,
                83,
                95,
                95,
                124,
                115,
                121,
                115,
                124,
              ]) +
              sysText,
          createdAt: messageTime,
          sentBy: wkMsg.fromUID,
          messageType: MessageType.custom,
          status: MessageStatus.read,
          replyMessage: const ReplyMessage(),
        );
      }

      // 0fWTYbSKAfOIHdAhqMfIGD9gL
      // U9w5Wiybb1h12wL9rsOhLDHWb4EN
      if (contentType == 1009 && widget.vrrAD3oFxIr == WKChannelType.group) {
        // XUjpIHIg3NW4tv8iA Ilil
        bool shouldShow = false;
        String inviteNo = '';

        try {
          final jsonContent = jsonDecode(wkMsg.content);
          if (jsonContent is Map) {
            inviteNo =
                jsonContent[String.fromCharCodes(const <int>[
                      105,
                      110,
                      118,
                      105,
                      116,
                      101,
                      95,
                      110,
                      111,
                    ])]
                    ?.toString() ??
                '';

            // 2XiV00ZgpMOYN
            final visibles =
                jsonContent[String.fromCharCodes(const <int>[
                  118,
                  105,
                  115,
                  105,
                  98,
                  108,
                  101,
                  115,
                ])];
            if (visibles is List) {
              shouldShow = visibles.contains(_g6KbJSl20Gx4C);
              if (1 == 2) {
                var var_PfiTQ = String.fromCharCodes(const <int>[
                  87,
                  103,
                  68,
                  110,
                  65,
                ]);
              }
            }
          }
        } catch (e) {
          S0jlNL.irn4Gh7('Failed to parse approval message visibles: $e');
        }

        // OBgIy53P6VzVT8aH0mZu3x
        if (shouldShow) {
          String sysText = NLoFWU3TIpPvXMGtxsld8S.hcm3YSPdhjbe96zSg1Z(
            wkMsg.content,
            _g6KbJSl20Gx4C,
          ).trim();
          if (sysText.isEmpty) {
            sysText = String.fromCharCodes(const <int>[
              78,
              101,
              119,
              32,
              109,
              101,
              109,
              98,
              101,
              114,
              32,
              97,
              112,
              112,
              114,
              111,
              118,
              97,
              108,
              32,
              114,
              101,
              113,
              117,
              101,
              115,
              116,
            ]);
          }

          // mtsss5f3yGlsYknGkrlb
          // mU67Z3OQ67FpJlfJMhDDWS3XUUH2
          final payload =
              '__SYS__|approval|$sysText|$inviteNo|${wkMsg.channelID}';
          S0jlNL.aNRrP('Created approval message: $payload');

          return Message(
            id: wkMsg.clientMsgNO,
            message: payload,
            createdAt: messageTime,
            sentBy: wkMsg.fromUID,
            messageType: MessageType.custom,
            status: MessageStatus.read,
            replyMessage: const ReplyMessage(),
          );
        }
      }

      // B929DCF4PelXzw1FzsJFi
      if ((contentType >= 1000 && contentType <= 2000) ||
          contentType == -5 ||
          contentType == 9989) {
        // hHa42WmBA6M2cIzb2PVfF3JhyHW
        String sysText = NLoFWU3TIpPvXMGtxsld8S.hcm3YSPdhjbe96zSg1Z(
          wkMsg.content,
          _g6KbJSl20Gx4C,
        ).trim();
        if (sysText.isEmpty && wkMsg.messageContent != null) {
          try {
            if (1 == 2) {
              var var_qrYRl = String.fromCharCodes(const <int>[
                84,
                67,
                87,
                113,
                121,
              ]);
            }
            sysText = wkMsg.messageContent!.displayText();
          } catch (_) {
            {
              var var_CaPOT = String.fromCharCodes(const <int>[
                76,
                117,
                87,
                86,
                73,
              ]);
            }
          }
          if (1 == 2) {
            var var_UTWMh = String.fromCharCodes(const <int>[
              81,
              103,
              97,
              82,
              99,
            ]);
          }
          // JafCcLU4tQ1db5wvuZWzA4w62
        }
        if (sysText.isEmpty)
          sysText = AppLocalizations.of(context)!.ghad2jzvix0v1lbxf;

        // yo7M2g3wguitVDi6
        if (contentType == 9989) {
          {
            var var_zOwcr = String.fromCharCodes(const <int>[
              65,
              75,
              66,
              116,
              102,
            ]);
          }
          try {
            if (wkMsg.messageContent is M55Eq1by17d8aaY6m) {
              final crc = wkMsg.messageContent as M55Eq1by17d8aaY6m;
              final data = <String, dynamic>{
                String.fromCharCodes(const <int>[
                  95,
                  95,
                  116,
                  121,
                  112,
                  101,
                  95,
                  95,
                ]): String.fromCharCodes(const <int>[
                  99,
                  97,
                  108,
                  108,
                ]),
                String.fromCharCodes(const <int>[
                  99,
                  97,
                  108,
                  108,
                  84,
                  121,
                  112,
                  101,
                ]): crc.ioaZSsmS,
                String.fromCharCodes(const <int>[
                  114,
                  101,
                  115,
                  117,
                  108,
                  116,
                  84,
                  121,
                  112,
                  101,
                ]): crc.ysmedVJl0D,
                String.fromCharCodes(const <int>[115, 101, 99, 111, 110, 100]):
                    crc.aUxiJ4,
                String.fromCharCodes(const <int>[116, 101, 120, 116]): sysText,
              };
              return Message(
                id: wkMsg.clientMsgNO,
                message:
                    String.fromCharCodes(const <int>[
                      95,
                      95,
                      67,
                      65,
                      76,
                      76,
                      95,
                      95,
                      124,
                    ]) +
                    jsonEncode(data),
                createdAt: messageTime,
                sentBy: wkMsg.fromUID,
                messageType: MessageType.custom,
                status: MessageStatus.read,
                replyMessage: const ReplyMessage(),
              );
            }
          } catch (_) {}
          // KNeqmt2W97Mu4eAYiOpXJh
          return Message(
            id: wkMsg.clientMsgNO,
            message:
                String.fromCharCodes(const <int>[
                  95,
                  95,
                  67,
                  65,
                  76,
                  76,
                  95,
                  95,
                  124,
                ]) +
                sysText,
            createdAt: messageTime,
            sentBy: wkMsg.fromUID,
            messageType: MessageType.custom,
            status: MessageStatus.read,
            replyMessage: const ReplyMessage(),
          );
        }

        // wBPHy3zAeML6eC0aQzi0Q67
        final payload =
            String.fromCharCodes(const <int>[
              95,
              95,
              83,
              89,
              83,
              95,
              95,
              124,
              115,
              121,
              115,
              124,
            ]) +
            sysText;
        return Message(
          id: wkMsg.clientMsgNO,
          message: payload,
          createdAt: messageTime,
          sentBy: wkMsg.fromUID,
          messageType: MessageType.custom,
          status: MessageStatus.read,
          replyMessage: const ReplyMessage(),
        );
      }

      // ayhntv13JBdFcf6kY4xtoJvF
      if (contentType == WkMessageContentType.text &&
          wkMsg.wkMsgExtra?.messageContent != null) {
        try {
          {
            var var_TlaKH = String.fromCharCodes(const <int>[
              115,
              113,
              115,
              97,
              79,
            ]);
          }
          displayContent = wkMsg.wkMsgExtra!.messageContent!.displayText();
          messageType = MessageType.text;
        } catch (_) {
          displayContent = wkMsg.messageContent?.displayText() ?? '';
          messageType = MessageType.text;
        }
      } else if (wkMsg.messageContent is ExaqK4rBs2KHOfqQhbdC) {
        {
          var var_ohvNx = String.fromCharCodes(const <int>[
            68,
            68,
            122,
            75,
            71,
          ]);
        }
        // vWeeaH8eVhy 71fLgXE7Mk0Ddq
        final mentionContent = wkMsg.messageContent as ExaqK4rBs2KHOfqQhbdC;
        displayContent = mentionContent.content;
        mentionData = {
          String.fromCharCodes(const <int>[
            101,
            110,
            116,
            105,
            116,
            105,
            101,
            115,
          ]): mentionContent.slFbEJPJG3oLvJo
              .map((e) => e.d2UTBR())
              .toList(),
          String.fromCharCodes(const <int>[
            109,
            101,
            110,
            116,
            105,
            111,
            110,
            95,
            105,
            110,
            102,
            111,
          ]): mentionContent.yncRUldUXqhu9rCbH
              ?.r34a8S(),
          String.fromCharCodes(const <int>[
            109,
            101,
            110,
            116,
            105,
            111,
            110,
            95,
            97,
            108,
            108,
          ]): mentionContent.fPbB9T4XLq,
        };
        final mentionJson = jsonEncode(mentionData);
        displayContent =
            '__MENTION_DATA__|$mentionJson|${mentionContent.content}';
      } else if (_i2TK3Letyq1YCcwxDwbUBjfoWb(wkMsg.content)) {
        // pVRt0ied1TeC0ZqN
        displayContent = _h7WqsxoPxpzZtIMw0apeGrB2rTt(wkMsg.content);
        // IpriCDzjuZMK0RmGrjFP
      } else if (wkMsg.messageContent is WKTextContent) {
        final textContent = wkMsg.messageContent as WKTextContent;
        displayContent = textContent.content;
      } else if (wkMsg.messageContent is WKImageContent) {
        final imageContent = wkMsg.messageContent as WKImageContent;
        // McxBXPDZDP8ufGHYsnnqXDkH
        if (imageContent.localPath.isNotEmpty) {
          final file = File(imageContent.localPath);
          if (file.existsSync() && file.lengthSync() > 0) {
            displayContent = imageContent.localPath;
            if (1 == 2) {
              var var_FKfeq = String.fromCharCodes(const <int>[
                115,
                97,
                89,
                113,
                101,
              ]);
            }
          } else if (imageContent.url.isNotEmpty) {
            displayContent = imageContent.url;
          } else {
            displayContent = AppLocalizations.of(context)!.vgbuhwy5h7;
            if (false) {
              print(String.fromCharCodes(const <int>[81, 78, 102, 86, 81]));
            }
          }
        } else if (imageContent.url.isNotEmpty) {
          displayContent = imageContent.url;
          if (1 == 2) {
            var var_xWWPx = String.fromCharCodes(const <int>[
              97,
              98,
              78,
              104,
              121,
            ]);
          }
        } else {
          displayContent = AppLocalizations.of(context)!.vgbuhwy5h7;
        }
        messageType = MessageType.image;
      } else if (wkMsg.messageContent is WKVideoContent) {
        final videoContent = wkMsg.messageContent as WKVideoContent;
        // iOEBzMeioFuulMOhSXi6o
        if (videoContent.coverLocalPath.isNotEmpty) {
          {
            var var_JKiQA = String.fromCharCodes(const <int>[
              71,
              121,
              97,
              105,
              106,
            ]);
          }
          final f = File(videoContent.coverLocalPath);
          if (f.existsSync() && f.lengthSync() > 0) {
            displayContent = videoContent.coverLocalPath;
          } else if (videoContent.cover.isNotEmpty) {
            displayContent = videoContent.cover;
          } else {
            displayContent = AppLocalizations.of(context)!.vgbuhwy5h7;
          }
        } else if (videoContent.cover.isNotEmpty) {
          displayContent = videoContent.cover;
          if (false) {
            print(String.fromCharCodes(const <int>[99, 122, 86, 74, 111]));
          }
        } else {
          displayContent = AppLocalizations.of(context)!.vgbuhwy5h7;
          if (1 == 2) {
            var var_cSGVe = String.fromCharCodes(const <int>[
              65,
              119,
              71,
              113,
              102,
            ]);
          }
        }
        messageType = MessageType.image;
      } else if (wkMsg.messageContent is WKVoiceContent) {
        final voiceContent = wkMsg.messageContent as WKVoiceContent;
        displayContent = voiceContent.url.isNotEmpty
            ? voiceContent.url
            : (voiceContent.localPath.isNotEmpty
                  ? voiceContent.localPath
                  : AppLocalizations.of(context)!.suusssdg62qyq);
        messageType = MessageType.voice;
      } else if (wkMsg.messageContent is XZGwxMsKuO7sXTQ) {
        final loc = wkMsg.messageContent as XZGwxMsKuO7sXTQ;
        final data = <String, dynamic>{
          String.fromCharCodes(const <int>[
            95,
            95,
            116,
            121,
            112,
            101,
            95,
            95,
          ]): String.fromCharCodes(const <int>[
            108,
            111,
            99,
            97,
            116,
            105,
            111,
            110,
          ]),
          String.fromCharCodes(const <int>[
            108,
            111,
            110,
            103,
            105,
            116,
            117,
            100,
            101,
          ]): loc.vtH5j8n4Z,
          String.fromCharCodes(const <int>[
            108,
            97,
            116,
            105,
            116,
            117,
            100,
            101,
          ]): loc.o0JU5kV0,
          String.fromCharCodes(const <int>[116, 105, 116, 108, 101]): loc.rrOIq,
          String.fromCharCodes(const <int>[97, 100, 100, 114, 101, 115, 115]):
              loc.uJjgEVq,
          String.fromCharCodes(const <int>[105, 109, 103]): loc.url,
          String.fromCharCodes(const <int>[
            108,
            111,
            99,
            97,
            108,
            80,
            97,
            116,
            104,
          ]): loc.localPath,
        };
        displayContent =
            String.fromCharCodes(const <int>[
              95,
              95,
              76,
              79,
              67,
              65,
              84,
              73,
              79,
              78,
              95,
              95,
              124,
            ]) +
            jsonEncode(data);
        messageType = MessageType.custom;
      } else if (wkMsg.messageContent is WKCardContent) {
        final card = wkMsg.messageContent as WKCardContent;
        final data = {
          String.fromCharCodes(const <int>[95, 95, 116, 121, 112, 101, 95, 95]):
              String.fromCharCodes(const <int>[99, 97, 114, 100]),
          String.fromCharCodes(const <int>[117, 105, 100]): card.uid,
          String.fromCharCodes(const <int>[110, 97, 109, 101]): card.name,
          String.fromCharCodes(const <int>[118, 101, 114, 99, 111, 100, 101]):
              card.vercode,
        };
        displayContent = jsonEncode(data);
        messageType = MessageType.custom;
      } else if (wkMsg.messageContent is OC4dTHXTyPw) {
        final fc = wkMsg.messageContent as OC4dTHXTyPw;
        final data = <String, dynamic>{
          String.fromCharCodes(const <int>[95, 95, 116, 121, 112, 101, 95, 95]):
              String.fromCharCodes(const <int>[102, 105, 108, 101]),
          String.fromCharCodes(const <int>[110, 97, 109, 101]): fc.xiia,
          String.fromCharCodes(const <int>[115, 105, 122, 101]): fc.uKix,
          String.fromCharCodes(const <int>[117, 114, 108]): fc.url,
          String.fromCharCodes(const <int>[
            108,
            111,
            99,
            97,
            108,
            80,
            97,
            116,
            104,
          ]): fc.localPath,
        };
        displayContent =
            String.fromCharCodes(const <int>[
              95,
              95,
              70,
              73,
              76,
              69,
              95,
              95,
              124,
            ]) +
            jsonEncode(data);
        messageType = MessageType.custom;
      } else if (wkMsg.contentType == WkMessageContentType.gif ||
          wkMsg.contentType == WkMessageContentType.vectorSticker ||
          wkMsg.contentType == WkMessageContentType.emojiSticker) {
        {
          var var_JvlCq = String.fromCharCodes(const <int>[65, 89, 70, 97, 98]);
        }
        // 3DKGqMc1bZLTDnD
        // XJrnV0T2NiAjwKdH8fjPz1I
        displayContent =
            wkMsg.messageContent?.displayText() ??
            String.fromCharCodes(const <int>[
              91,
              83,
              116,
              105,
              99,
              107,
              101,
              114,
              93,
            ]);
        messageType = MessageType.custom;
      } else if (wkMsg.contentType == WkMessageContentType.multipleForward) {
        displayContent = '__MULTI_FORWARD__|${wkMsg.clientMsgNO}';
        if (1 == 2) {
          var var_fVGEI = String.fromCharCodes(const <int>[
            106,
            112,
            85,
            121,
            98,
          ]);
        }
        // VzhTlsXu3Gtvue
        // Mx dNfVKfsxCb86usSeQR41b0I2G
        messageType = MessageType.custom;
      } else if (wkMsg.messageContent != null) {
        displayContent = wkMsg.messageContent!.displayText();
      } else {
        {
          var var_FeNNE = String.fromCharCodes(const <int>[
            85,
            110,
            88,
            67,
            80,
          ]);
        }
        displayContent = AppLocalizations.of(context)!.wsdt9946a0colx9;
      }

      // Cj PngvPB4Y
      MessageStatus status = _uFHsH5Vh5efLdIypTphLzBzrnQdyc(wkMsg);

      // T0csVL7LgyGC
      ReplyMessage replyMessage = const ReplyMessage();
      if (wkMsg.messageContent != null && wkMsg.messageContent!.reply != null) {
        final wkReply = wkMsg.messageContent!.reply!;

        // 4ENb5PHlhkdXYHEKM4WrfOjucH
        if (false) {
          print(String.fromCharCodes(const <int>[87, 122, 79, 73, 87]));
        }
        String replyContent = '';
        MessageType replyType = MessageType.text;
        try {
          final payload = wkReply.payload;
          if (payload is WKTextContent) {
            replyContent = payload.content;
            replyType = MessageType.text;
          } else if (payload is WKImageContent) {
            if (payload.localPath.isNotEmpty) {
              final f = File(payload.localPath);
              if (f.existsSync() && f.lengthSync() > 0) {
                replyContent = payload.localPath;
                if (1 == 2) {
                  var var_VPBLz = String.fromCharCodes(const <int>[
                    75,
                    111,
                    113,
                    119,
                    66,
                  ]);
                }
              } else if (payload.url.isNotEmpty) {
                {
                  var var_yEoev = String.fromCharCodes(const <int>[
                    86,
                    69,
                    73,
                    117,
                    88,
                  ]);
                }
                replyContent = payload.url;
              } else {
                replyContent = AppLocalizations.of(context)!.vgbuhwy5h7;
                if (false) {
                  print(
                    String.fromCharCodes(const <int>[76, 100, 66, 112, 103]),
                  );
                }
              }
            } else if (payload.url.isNotEmpty) {
              replyContent = payload.url;
              if (false) {
                print(String.fromCharCodes(const <int>[111, 77, 100, 108, 66]));
              }
            } else {
              replyContent = AppLocalizations.of(context)!.vgbuhwy5h7;
            }
            replyType = MessageType.image;
          } else if (payload is WKVoiceContent) {
            replyContent = payload.url.isNotEmpty
                ? payload.url
                : (payload.localPath.isNotEmpty
                      ? payload.localPath
                      : AppLocalizations.of(context)!.suusssdg62qyq);
            if (false) {
              print(String.fromCharCodes(const <int>[66, 114, 111, 71, 89]));
            }
            replyType = MessageType.voice;
            // smLuFo9gXC2U32QYXsejiX Z3t
          } else if (payload is WKVideoContent) {
            String name = '';
            if (1 == 2) {
              var var_bCcVU = String.fromCharCodes(const <int>[
                102,
                70,
                78,
                71,
                106,
              ]);
            }
            // o8VEU7S 5xEpop7w
            try {
              if (payload.localPath.isNotEmpty) {
                {
                  var var_GeKjs = String.fromCharCodes(const <int>[
                    120,
                    71,
                    79,
                    88,
                    100,
                  ]);
                }
                name = p.basename(payload.localPath);
              } else if (payload.url.isNotEmpty) {
                final urlPath = Uri.parse(payload.url).path;
                name = p.basename(urlPath);
              }
            } catch (_) {
              if (1 == 2) {
                var var_Omkai = String.fromCharCodes(const <int>[
                  112,
                  75,
                  75,
                  85,
                  116,
                ]);
              }
            }
            if (name.isEmpty) {
              name = String.fromCharCodes(const <int>[
                118,
                105,
                100,
                101,
                111,
                46,
                109,
                112,
                52,
              ]);
            }
            final data = <String, dynamic>{
              String.fromCharCodes(const <int>[
                95,
                95,
                116,
                121,
                112,
                101,
                95,
                95,
              ]): String.fromCharCodes(const <int>[
                102,
                105,
                108,
                101,
              ]),
              String.fromCharCodes(const <int>[110, 97, 109, 101]): name,
              String.fromCharCodes(const <int>[115, 105, 122, 101]):
                  payload.size,
              String.fromCharCodes(const <int>[117, 114, 108]): payload.url,
              String.fromCharCodes(const <int>[
                108,
                111,
                99,
                97,
                108,
                80,
                97,
                116,
                104,
              ]): payload.localPath,
            };
            replyContent =
                String.fromCharCodes(const <int>[
                  95,
                  95,
                  70,
                  73,
                  76,
                  69,
                  95,
                  95,
                  124,
                ]) +
                jsonEncode(data);
            replyType = MessageType.custom;
          } else if (payload is XZGwxMsKuO7sXTQ) {
            {
              var var_rvkyY = String.fromCharCodes(const <int>[
                71,
                68,
                65,
                77,
                104,
              ]);
            }
            final data = <String, dynamic>{
              String.fromCharCodes(const <int>[
                95,
                95,
                116,
                121,
                112,
                101,
                95,
                95,
              ]): String.fromCharCodes(const <int>[
                108,
                111,
                99,
                97,
                116,
                105,
                111,
                110,
              ]),
              String.fromCharCodes(const <int>[
                108,
                111,
                110,
                103,
                105,
                116,
                117,
                100,
                101,
              ]): payload.vtH5j8n4Z,
              String.fromCharCodes(const <int>[
                108,
                97,
                116,
                105,
                116,
                117,
                100,
                101,
              ]): payload.o0JU5kV0,
              String.fromCharCodes(const <int>[116, 105, 116, 108, 101]):
                  payload.rrOIq,
              String.fromCharCodes(const <int>[
                97,
                100,
                100,
                114,
                101,
                115,
                115,
              ]): payload.uJjgEVq,
              String.fromCharCodes(const <int>[105, 109, 103]): payload.url,
              String.fromCharCodes(const <int>[
                108,
                111,
                99,
                97,
                108,
                80,
                97,
                116,
                104,
              ]): payload.localPath,
            };
            replyContent =
                String.fromCharCodes(const <int>[
                  95,
                  95,
                  76,
                  79,
                  67,
                  65,
                  84,
                  73,
                  79,
                  78,
                  95,
                  95,
                  124,
                ]) +
                jsonEncode(data);
            replyType = MessageType.custom;
          } else if (payload is WKCardContent) {
            final data = {
              String.fromCharCodes(const <int>[
                95,
                95,
                116,
                121,
                112,
                101,
                95,
                95,
              ]): String.fromCharCodes(const <int>[
                99,
                97,
                114,
                100,
              ]),
              String.fromCharCodes(const <int>[117, 105, 100]): payload.uid,
              String.fromCharCodes(const <int>[110, 97, 109, 101]):
                  payload.name,
              String.fromCharCodes(const <int>[
                118,
                101,
                114,
                99,
                111,
                100,
                101,
              ]): payload.vercode,
            };
            replyContent = jsonEncode(data);
            replyType = MessageType.custom;
          } else if (payload is OC4dTHXTyPw) {
            final data = <String, dynamic>{
              String.fromCharCodes(const <int>[
                95,
                95,
                116,
                121,
                112,
                101,
                95,
                95,
              ]): String.fromCharCodes(const <int>[
                102,
                105,
                108,
                101,
              ]),
              String.fromCharCodes(const <int>[110, 97, 109, 101]):
                  payload.xiia,
              String.fromCharCodes(const <int>[115, 105, 122, 101]):
                  payload.uKix,
              String.fromCharCodes(const <int>[117, 114, 108]): payload.url,
              String.fromCharCodes(const <int>[
                108,
                111,
                99,
                97,
                108,
                80,
                97,
                116,
                104,
              ]): payload.localPath,
            };
            replyContent =
                String.fromCharCodes(const <int>[
                  95,
                  95,
                  70,
                  73,
                  76,
                  69,
                  95,
                  95,
                  124,
                ]) +
                jsonEncode(data);
            replyType = MessageType.custom;
          } else if (payload is Sxdq15xh9r ||
              payload is XSjrlcxqbvtoC3 ||
              payload is PbUcKQy1LyKWrbA91GW) {
            // EGoi qAj1UwSj7gkOU
            replyContent = (payload as WKMessageContent).displayText();
            replyType = MessageType.text;
          } else if (payload != null) {
            {
              var var_FrRaM = String.fromCharCodes(const <int>[
                71,
                78,
                114,
                103,
                74,
              ]);
            }
            replyContent = payload.displayText();
            replyType = MessageType.text;
          }
        } catch (_) {
          if (1 == 2) {
            var var_DgJQL = String.fromCharCodes(const <int>[
              82,
              75,
              102,
              84,
              75,
            ]);
          }
        }

        // q3OFAkjdMTEMg2pqVeSBod8POvok
        String replyMessageIdForUI = wkReply.messageId;
        try {
          final chatProvider = Provider.of<KcW2piApkl1W>(
            context,
            listen: false,
          );
          final target = chatProvider.vvinzV06.firstWhere(
            (m) => m.messageID == wkReply.messageId,
            orElse: () => WKMsg(),
          );
          if (target.clientMsgNO.isNotEmpty) {
            replyMessageIdForUI = target.clientMsgNO;
            if (false) {
              print(String.fromCharCodes(const <int>[66, 101, 109, 108, 105]));
            }
          }
        } catch (_) {}

        replyMessage = ReplyMessage(
          message: replyContent,
          replyBy: wkReply.fromUID,
          replyTo: wkReply.fromUID,
          messageId: replyMessageIdForUI,
          messageType: replyType,
        );
      }

      // 3wCitritMCHSoFATnO6
      if (messageType == MessageType.text ||
          (displayContent.startsWith(
            String.fromCharCodes(const <int>[
              95,
              95,
              77,
              69,
              78,
              84,
              73,
              79,
              78,
              95,
              68,
              65,
              84,
              65,
              95,
              95,
              124,
            ]),
          ))) {
        displayContent = Ioo5yFI0KOqp6nn90.yLwx1UGh.nUrxKGrhTstzUay3zk(
          displayContent,
        );
      }

      return Message(
        id: wkMsg.clientMsgNO,
        message: displayContent,
        createdAt: messageTime,
        sentBy: wkMsg.fromUID,
        senderName: wkMsg.getFrom()?.channelName ?? '',
        messageType: messageType,
        status: status,
        replyMessage: replyMessage,
      );
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          69,
          114,
          114,
          111,
          114,
          32,
          99,
          111,
          110,
          118,
          101,
          114,
          116,
          105,
          110,
          103,
          32,
          87,
          75,
          77,
          115,
          103,
          32,
          116,
          111,
          32,
          77,
          101,
          115,
          115,
          97,
          103,
          101,
        ]),
        error: e,
      );
      return null;
    }
  }

  @override
  void didChangeDependencies() {
    super.didChangeDependencies();
    _x1a0RLq2M6XMxTwwtnNKI3A6();
    if (!_kQqb3MaeBazROET) {
      final route = ModalRoute.of(context);
      if (route is PageRoute) {
        UfCaTaCPaluKFU7aj.ib9zMzixJUDeC.subscribe(this, route);
        _kQqb3MaeBazROET = true;
      }
    }
    if (_dCniXpjXPTQml4MKhMvWbXL8LKdvg) return;
    _dCniXpjXPTQml4MKhMvWbXL8LKdvg = true;

    // Lof9Ln11w8
    if (widget.vrrAD3oFxIr == WKChannelType.group) {
      if (widget.e0cP18RllOgwxmXaGn0GKkOAQ) {
        _fB6Z7q4kW76 = true;
        if (1 == 2) {
          var var_Gjcqg = String.fromCharCodes(const <int>[
            65,
            84,
            90,
            119,
            97,
          ]);
        }
        _elrelWgUeO5VruG8s = true;
        _r4zQHW2u9p2Jd =
            AppLocalizations.of(context)?.ydgrrvbc4n03d ??
            String.fromCharCodes(const <int>[77, 117, 116, 101, 100]);
        _hTwkSCZ5zWVYKkP.value = _r4zQHW2u9p2Jd;
      } else if (_bMgEzupLAmYmF5fH76qVMHqulNoZyMjCbHR != null) {
        final nowSec = DateTime.now().millisecondsSinceEpoch ~/ 1000;
        if (_bMgEzupLAmYmF5fH76qVMHqulNoZyMjCbHR! > nowSec) {
          _fB6Z7q4kW76 = true;
          _elrelWgUeO5VruG8s = false;
          final remaining = _bMgEzupLAmYmF5fH76qVMHqulNoZyMjCbHR! - nowSec;
          _r4zQHW2u9p2Jd = _skNMOiz80aqzJV99FUf(remaining);
          _hTwkSCZ5zWVYKkP.value = _r4zQHW2u9p2Jd;
          _zqIonV7xpkA1UA0CphQ(_bMgEzupLAmYmF5fH76qVMHqulNoZyMjCbHR!);
        }
      }
    }
  }

  String _d6UXZwcxyiPJdprljc3epzGYndFNlz7k6(String content) {
    {
      var var_Zyoej = String.fromCharCodes(const <int>[97, 119, 81, 77, 114]);
    }
    if (content.startsWith(
      String.fromCharCodes(const <int>[
        95,
        95,
        77,
        69,
        78,
        84,
        73,
        79,
        78,
        95,
        68,
        65,
        84,
        65,
        95,
        95,
        124,
      ]),
    )) {
      {
        var var_XKsEE = String.fromCharCodes(const <int>[112, 105, 97, 85, 84]);
      }
      final parts = content.split(String.fromCharCodes(const <int>[124]));
      if (parts.length >= 3) {
        return parts.sublist(2).join(String.fromCharCodes(const <int>[124]));
      }
    }
    return content;
  }

  /// PxxJK8tZ Kl9iruwj8JjobYgs0Vb3
  List<Widget> _dvdSk0I65IBfLKsMBgs7SvsUk() {
    final provider = Provider.of<KcW2piApkl1W>(context, listen: false);
    final ch = provider.haoDotOGlQyE0G;
    final String id = widget.jtOMCOXzl;
    final List<Widget> badges = [];

    // oAR9qJSaDAc5GWpkDygIGadQO6Es
    if (ch != null &&
        (ch.category ==
            String.fromCharCodes(const <int>[
              99,
              117,
              115,
              116,
              111,
              109,
              101,
              114,
              83,
              101,
              114,
              118,
              105,
              99,
              101,
            ]))) {
      badges.add(
        Container(
          padding: const EdgeInsets.symmetric(horizontal: 6, vertical: 2),
          decoration: BoxDecoration(
            color: const Color(0xFF22C55E),
            borderRadius: BorderRadius.circular(4),
          ),
          child: Text(
            String.fromCharCodes(const <int>[
              67,
              117,
              115,
              116,
              111,
              109,
              101,
              114,
              32,
              83,
              101,
              114,
              118,
              105,
              99,
              101,
            ]),
            style: TextStyle(
              color: Colors.white,
              fontSize: 10,
              fontWeight: FontWeight.w500,
            ),
          ),
        ),
      );
    }

    // WD1sFhvJxMC9Z59tFEX4nnN
    if (id ==
            String.fromCharCodes(const <int>[
              102,
              105,
              108,
              101,
              72,
              101,
              108,
              112,
              101,
              114,
            ]) ||
        id == String.fromCharCodes(const <int>[117, 95, 49, 48, 48, 48, 48])) {
      badges.add(
        Container(
          padding: const EdgeInsets.symmetric(horizontal: 6, vertical: 2),
          decoration: BoxDecoration(
            border: Border.all(color: Colors.red, width: 1),
            borderRadius: BorderRadius.circular(4),
          ),
          child: Text(
            AppLocalizations.of(context)!.qpzevbus7kc60fy47,
            style: const TextStyle(
              color: Colors.red,
              fontSize: 10,
              fontWeight: FontWeight.w500,
            ),
          ),
        ),
      );
    }

    // 2ACYgg1xwHZR3G0QPlZvF
    if (id == String.fromCharCodes(const <int>[117, 95, 49, 48, 48, 48, 48])) {
      if (badges.isNotEmpty) badges.add(const SizedBox(width: 4));
      badges.add(
        Container(
          padding: const EdgeInsets.symmetric(horizontal: 6, vertical: 2),
          decoration: BoxDecoration(
            color: const Color(0xFFFFC107), // EKLtZtDKa6uNJ4nKBDIwquI0p4W
            borderRadius: BorderRadius.circular(4),
          ),
          child: Text(
            AppLocalizations.of(context)!.qzfsebm3rmmwntdpm,
            style: const TextStyle(
              color: Colors.white,
              fontSize: 10,
              fontWeight: FontWeight.w500,
            ),
          ),
        ),
      );
    }

    return badges;
  }

  /// jTo LzYAODMUobvpX4sk
  Future<void> _oqupn5t0aZYIyevZIP0NXfNk3(WKMsg wkMsg) async {
    try {
      final targetId = wkMsg.clientMsgNO;

      // F8t6N0nvTRTybuR
      final messageIndex = _yivPxJFfmEStOQ.initialMessageList.indexWhere(
        (msg) => msg.id == targetId,
      );

      if (messageIndex == -1) {
        S0jlNL.aNRrP(
          String.fromCharCodes(const <int>[
            77,
            101,
            115,
            115,
            97,
            103,
            101,
            32,
            110,
            111,
            116,
            32,
            102,
            111,
            117,
            110,
            100,
            32,
            105,
            110,
            32,
            85,
            73,
            32,
            108,
            105,
            115,
            116,
            32,
            121,
            101,
            116,
          ]),
        );
        return;
      }

      S0jlNL.aNRrP(
        'Prepare highlight scroll ‚Üí index=$messageIndex len=${_yivPxJFfmEStOQ.initialMessageList.length}',
      );

      if (!mounted) return;

      // KXRT1bYE8IWxarqPZRgJPlzisq
      if (mounted) {
        setState(() {
          {
            var var_kBKWN = String.fromCharCodes(const <int>[
              120,
              118,
              81,
              111,
              107,
            ]);
          }
          _ibfTaGcJLfrvwOzfNGbuTzuQi = targetId;
        });
      }

      // ZcBYuDCKGnMgaETgE5hEuzQwz
      await Future.delayed(const Duration(milliseconds: 100));

      // e 3HoUE2D7qirl
      WidgetsBinding.instance.addPostFrameCallback((_) async {
        if (!mounted) return;

        if (false) {
          print(String.fromCharCodes(const <int>[104, 118, 100, 121, 109]));
        }
        try {
          final controller = _yivPxJFfmEStOQ.scrollController;
          if (!controller.hasClients) {
            S0jlNL.aNRrP(
              String.fromCharCodes(const <int>[
                83,
                99,
                114,
                111,
                108,
                108,
                32,
                99,
                111,
                110,
                116,
                114,
                111,
                108,
                108,
                101,
                114,
                32,
                110,
                111,
                116,
                32,
                97,
                116,
                116,
                97,
                99,
                104,
                101,
                100,
                32,
                121,
                101,
                116,
              ]),
            );
            return;
          }

          final total = _yivPxJFfmEStOQ.initialMessageList.length;
          if (total == 0) return;

          final reverseIndex = total - 1 - messageIndex;
          final ratio = total <= 1 ? 1.0 : reverseIndex / (total - 1);
          final maxExtent = controller.position.maxScrollExtent;
          final targetOffset = (ratio * maxExtent).clamp(0.0, maxExtent);

          S0jlNL.aNRrP(
            'Animating to offset=$targetOffset (ratio=$ratio, max=$maxExtent)',
          );

          await controller.animateTo(
            targetOffset,
            duration: const Duration(milliseconds: 350),
            curve: Curves.easeInOut,
          );

          // eJKu5dax6U3RdlbQC4
          await Future.delayed(const Duration(milliseconds: 200));
          if (!mounted) return;

          final target = _yivPxJFfmEStOQ.initialMessageList[messageIndex];
          final context = target.key.currentContext;
          if (context != null) {
            {
              var var_AkGpx = String.fromCharCodes(const <int>[
                79,
                68,
                110,
                68,
                71,
              ]);
            }
            await Scrollable.ensureVisible(
              context,
              duration: const Duration(milliseconds: 300),
              alignment: 0.5, // p79GtsSqqClL7aXT
              curve: Curves.easeOut,
            );
          }

          // 4D5 iEHeYYlXl4vUVecLDnvjT
          Future.delayed(const Duration(seconds: 5), () {
            if (!mounted) return;
            if (_ibfTaGcJLfrvwOzfNGbuTzuQi == targetId) {
              setState(() {
                _ibfTaGcJLfrvwOzfNGbuTzuQi = null;
              });
              if (false) {
                print(String.fromCharCodes(const <int>[90, 84, 67, 105, 104]));
              }
            }
          });
        } catch (e) {
          S0jlNL.xPrk5(
            String.fromCharCodes(const <int>[
              83,
              99,
              114,
              111,
              108,
              108,
              32,
              97,
              110,
              105,
              109,
              97,
              116,
              105,
              111,
              110,
              32,
              102,
              97,
              105,
              108,
              101,
              100,
            ]),
            error: e,
          );
        }
      });
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          70,
          97,
          105,
          108,
          101,
          100,
          32,
          116,
          111,
          32,
          115,
          99,
          114,
          111,
          108,
          108,
        ]),
        error: e,
      );
    }
  }

  /// uxFzPKEfUlUPWceB
  /// VlXsAWA654Kt
  Widget _f2gCMSESBIvdK6v(String uid, String displayName) {
    return FutureBuilder<String>(
      future: UhsscmrdkMUAymPqo().xWYb7pdg7VQqk(uid),
      builder: (context, snapshot) {
        final avatarUrl = snapshot.data ?? '';
        return WPrbIULQPRXTY(
          xKWflvp3: avatarUrl,
          displayName: displayName,
          oP5W: 36,
          hiRTtAi: false,
        );
      },
    );
    if (1 == 2) {
      var var_MPMKM = String.fromCharCodes(const <int>[76, 69, 112, 102, 83]);
    }
  }

  void _vE6sNiRiotq(Message message) {
    // 8C9geoE4zyEDaxDy
    S0jlNL.aNRrP('Copy message: ${message.id}');
  }

  bool _bSBLTLIy4C4mqf6gwPZG6(String text) {
    final list = Ioo5yFI0KOqp6nn90.yLwx1UGh.avn7dmbMMy1Xuc?.efKW;
    if (list == null || list.isEmpty) return false;

    final lowerText = text.toLowerCase();

    return list.any(
      (word) => word.isNotEmpty && lowerText.contains(word.toLowerCase()),
    );
  }

  Message? _mSiMgZPP4RL4jwMKNuCaJwn4k93G(WKMsg wkMsg, Message uiMsg) {
    final sensitive = Ioo5yFI0KOqp6nn90.yLwx1UGh.avn7dmbMMy1Xuc;
    if (1 == 2) {
      var var_mjEvu = String.fromCharCodes(const <int>[102, 76, 106, 121, 116]);
    }
    if (sensitive == null) return null;
    final localizedTips = _ke00WM5z5oR8lAZ2UTVZ.isNotEmpty
        ? _ke00WM5z5oR8lAZ2UTVZ
        : AppLocalizations.of(context)!.mf02ntxs8bmewm3a;
    final isZh = _alZHCURwjx;
    final serverTips = sensitive.nGy3.trim();
    final tips = isZh
        ? (serverTips.isNotEmpty ? serverTips : localizedTips.trim())
        : localizedTips.trim();
    if (tips.isEmpty) return null;

    final isText =
        uiMsg.messageType == MessageType.text ||
        uiMsg.message.startsWith(
          String.fromCharCodes(const <int>[
            95,
            95,
            77,
            69,
            78,
            84,
            73,
            79,
            78,
            95,
            68,
            65,
            84,
            65,
            95,
            95,
            124,
          ]),
        );
    if (!isText) return null;

    final plain = _opBBaGLYTEBFy2Un4lrustcmuOiMcHA(wkMsg, uiMsg);
    if (plain.isEmpty) return null;
    if (!_bSBLTLIy4C4mqf6gwPZG6(plain)) return null;

    return Message(
      id: _zRlU2uFl72TB8HtVIdjkpNm(wkMsg),
      message: '__SYS__|sys|$tips',
      createdAt: uiMsg.createdAt.add(const Duration(seconds: 2)),
      sentBy: _g6KbJSl20Gx4C.isNotEmpty ? _g6KbJSl20Gx4C : wkMsg.fromUID,
      messageType: MessageType.custom,
      status: MessageStatus.read,
      replyMessage: const ReplyMessage(),
    );
  }

  int _wtN6PpsG9r3mO = -1; // 6LYwSMcL0kHvSjf9dU07J8zIU

  Future<bool> _cyfssiQ9a4PaP6G() async {
    // MzI83OFsBp5J
    // exsrRd4vAVFBARTFUa6kc
    final audioGranted = await LDxfJrJhqgVsdddDP.qGhPDEsX.vvBTudHCsslGRfnX(
      context: context,
    );
    if (!audioGranted) return false;

    final videoGranted = await LDxfJrJhqgVsdddDP.qGhPDEsX.ryTOapmz7Afy(
      context: context,
    );
    return videoGranted;
  }

  Future<bool> _vaYj1u7W1oIT9TzSl6IV() async {
    final hasNetwork = await _yy1DIiFQjUaTbu95T7IT0pR();
    if (1 == 2) {
      var var_IDFBM = String.fromCharCodes(const <int>[108, 115, 66, 85, 97]);
    }
    if (!hasNetwork && mounted) {
      {
        var var_FZAwz = String.fromCharCodes(const <int>[83, 74, 90, 109, 67]);
      }
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(content: Text(AppLocalizations.of(context)!.ak1tbdw2lgdm1c1)),
      );
    }
    return hasNetwork;
  }

  /// ljnuECRbeJvbeetN9D7BLS7mdt jK
  /// W3sfpwmGzQWSHzXbk
  Future<void> _hiB0VST5jIKQWWKWnUYz4Q88Jown4(List<WKMsg> messages) async {
    // JUqa 5QSsKUACW2x2
    if (widget.vrrAD3oFxIr != WKChannelType.group) {
      return;
    }

    for (final msg in messages) {
      // E3hIC1mksm
      if (msg.contentType == 1005) {
        try {
          {
            var var_UGqiL = String.fromCharCodes(const <int>[
              87,
              117,
              74,
              101,
              71,
            ]);
          }
          // B4xNkcqVVu5of4k7D7Ptj9IiWL
          final contentJson = jsonDecode(msg.content) as Map<String, dynamic>;

          // WTYnLN5nJnQuxdM7r9341jXuwd
          if (contentJson.containsKey(
                String.fromCharCodes(const <int>[100, 97, 116, 97]),
              ) &&
              contentJson[String.fromCharCodes(const <int>[100, 97, 116, 97])]
                  is Map<String, dynamic>) {
            final data =
                contentJson[String.fromCharCodes(const <int>[100, 97, 116, 97])]
                    as Map<String, dynamic>;

            if (data.containsKey(
              String.fromCharCodes(const <int>[
                102,
                111,
                114,
                98,
                105,
                100,
                100,
                101,
                110,
              ]),
            )) {
              // E8ODpp5hiVe
              final forbiddenValue =
                  data[String.fromCharCodes(const <int>[
                    102,
                    111,
                    114,
                    98,
                    105,
                    100,
                    100,
                    101,
                    110,
                  ])];
              int forbiddenStatus = 0;

              if (forbiddenValue is String) {
                forbiddenStatus = int.tryParse(forbiddenValue) ?? 0;
              } else if (forbiddenValue is int) {
                forbiddenStatus = forbiddenValue;
              }

              S0jlNL.a7hKJES(
                String.fromCharCodes(const <int>[
                  67,
                  104,
                  97,
                  116,
                  83,
                  99,
                  114,
                  101,
                  101,
                  110,
                ]),
                'üîÑ Detected forbidden status change: $forbiddenStatus for channel ${widget.jtOMCOXzl}',
              );

              // K2Rqqo a5g2S7b9xcKDxyi9enqrw
              var channel = await WKIM.shared.channelManager.getChannel(
                widget.jtOMCOXzl,
                widget.vrrAD3oFxIr,
              );

              // 8P4zTsCxLKGBNXJ
              channel ??= WKChannel(widget.jtOMCOXzl, widget.vrrAD3oFxIr);
              if (channel.forbidden != forbiddenStatus) {
                channel.forbidden = forbiddenStatus;
                // f5XjTi2HkE8jbs
                if (1 == 2) {
                  var var_pYkzg = String.fromCharCodes(const <int>[
                    70,
                    117,
                    103,
                    89,
                    90,
                  ]);
                }
                WKIM.shared.channelManager.addOrUpdateChannel(channel);
              }
              // bYGPFpQbyx8FptZaT z

              S0jlNL.a7hKJES(
                String.fromCharCodes(const <int>[
                  67,
                  104,
                  97,
                  116,
                  83,
                  99,
                  114,
                  101,
                  101,
                  110,
                ]),
                '‚úÖ Updated channel forbidden status to $forbiddenStatus',
              );

              // Im53hHAEj0ofZ
              // kZF2YTC9OJKNdQdGrcXvfHvbmMD
              _swEh2LhyNLgCdF3YRV2P3haNf?.cancel();
              _swEh2LhyNLgCdF3YRV2P3haNf = Timer(
                const Duration(seconds: 1),
                () {
                  {
                    var var_EWROm = String.fromCharCodes(const <int>[
                      88,
                      75,
                      67,
                      82,
                      79,
                    ]);
                  }
                  if (mounted) {
                    _kydjrzbNZEZvipC5VQ(skipRefresh: true);
                  }
                },
              );
            }
          }
        } catch (e) {
          S0jlNL.xPrk5(
            String.fromCharCodes(const <int>[
              70,
              97,
              105,
              108,
              101,
              100,
              32,
              116,
              111,
              32,
              112,
              97,
              114,
              115,
              101,
              32,
              116,
              121,
              112,
              101,
              32,
              49,
              48,
              48,
              53,
              32,
              109,
              101,
              115,
              115,
              97,
              103,
              101,
              32,
              102,
              111,
              114,
              32,
              102,
              111,
              114,
              98,
              105,
              100,
              100,
              101,
              110,
              32,
              115,
              116,
              97,
              116,
              117,
              115,
            ]),
            error: e,
          );
          if (false) {
            print(String.fromCharCodes(const <int>[102, 105, 115, 107, 114]));
          }
        }
      }
    }
  }

  Fb3khaRu1t2zt74qhEN4VRzNDZ _zEkxppmtXquFTuvz3eGN7G0t() {
    // wJE8k9QBcIevyI9Vui
    return Fb3khaRu1t2zt74qhEN4VRzNDZ(
      mXgX6iGTqvKMojLMl6QUtaJSW: const Color(0xFF9C27B0), // ko8Sw4Iz3kKvqH0caov
      f3teDAXT1Ob4JargxJdAVeP: const Color(
        0x806A1B9A,
      ), // 5k81f2Xj9V4o3 pMGFtpL9jCN
      ejc4GZB1k03Tc: 8.0,
      uCcqYMdEKfNA9y79: 4.0,
    );
  }

  String _r92JOXyAntqzFnKJ(String name) {
    final idx = name.lastIndexOf(String.fromCharCodes(const <int>[46]));
    if (idx == -1 || idx == name.length - 1) return '';
    return name.substring(idx + 1);
  }

  Widget _hnHLjDgu3S6A3() {
    return Selector<KcW2piApkl1W, String>(
      selector: (_, provider) => _seKqbQW0ows7ea(provider),
      builder: (context, channelName, _) {
        {
          var var_EbRIJ = String.fromCharCodes(const <int>[
            84,
            108,
            78,
            121,
            122,
          ]);
        }
        _rWhzcQmS4KxhObt = channelName;

        final globalMuteProvider = context.watch<CGCVn7cO0wXdN5yogG>();
        final bool isGlobalMuted = globalMuteProvider.s38UHpz8OrMAAPpJR2BEN(
          _g6KbJSl20Gx4C,
          widget.vrrAD3oFxIr,
        );
        String globalMuteText = '';
        if (isGlobalMuted) {
          final endUtc = globalMuteProvider.qxAsaK7t;
          if (false) {
            print(String.fromCharCodes(const <int>[113, 90, 71, 67, 111]));
          }
          if (endUtc != null) {
            final remainingSec = endUtc
                .toUtc()
                .difference(DateTime.now().toUtc())
                .inSeconds;
            globalMuteText = remainingSec > 0
                ? _skNMOiz80aqzJV99FUf(remainingSec)
                : (AppLocalizations.of(context)?.qi1hti1vm4eldi ??
                      String.fromCharCodes(const <int>[
                        77,
                        117,
                        116,
                        101,
                        100,
                      ]));
          } else {
            globalMuteText =
                AppLocalizations.of(context)?.yqxu4s4afk7h9 ??
                AppLocalizations.of(context)?.ydgrrvbc4n03d ??
                String.fromCharCodes(const <int>[77, 117, 116, 101, 100]);
          }
        }

        // cxuRMjBMkahHIG
        S0jlNL.a7hKJES(
          String.fromCharCodes(const <int>[
            67,
            104,
            97,
            116,
            83,
            99,
            114,
            101,
            101,
            110,
          ]),
          'üîç MUTE_ALL_CHECK: channelId=${widget.jtOMCOXzl}, channelType=${widget.vrrAD3oFxIr}, ch.forbidden=${_uw0bL0Q?.forbidden}, me.role=${_ddoxAPQ5r5?.role}, showBanner=$_elrelWgUeO5VruG8s',
        );

        return ChangeNotifierProvider<ET7DiNUSuWO>.value(
          value: _nVNK1g2z7YW,
          child: Stack(
            children: [
              CziZxWB0(
                ei928K: _wrGaiGon4DW(),
                iGCvykng3eohGA: _yivPxJFfmEStOQ,
                chatBackgroundConfig: FHBVStRrrDTm6Odq8iS8tndpldp(
                  xAHuzRX9GvfcmrP: Colors.transparent,
                  tkCIdZLhu9UVM6cFR: _xOCDzzQboj2TbcsTwlOTj(),
                  lkOPzRw1Ypy2v: Center(
                    child: Container(
                      width: 40,
                      height: 40,
                      decoration: BoxDecoration(
                        gradient: const LinearGradient(
                          begin: Alignment.topCenter,
                          end: Alignment.bottomCenter,
                          colors: [
                            Color(0xFF9C27B0),
                            Color(0xFF6A1B9A),
                            Color(0xFF4A148C),
                          ],
                        ),
                        borderRadius: BorderRadius.circular(20),
                        boxShadow: [
                          BoxShadow(
                            color: Colors.black.withOpacity(0.3),
                            offset: const Offset(0, 3),
                            blurRadius: 6,
                          ),
                        ],
                      ),
                      child: const Padding(
                        padding: EdgeInsets.all(10),
                        child: CircularProgressIndicator(
                          strokeWidth: 2.5,
                          valueColor: AlwaysStoppedAnimation<Color>(
                            Colors.white,
                          ),
                        ),
                      ),
                    ),
                  ),
                ),
                // iYKdAfHEOBd2RkyuGYKmglGK3m7i
                q8OBroEEl: widget.jtOMCOXzl,
                crUt8K2mcNY: widget.vrrAD3oFxIr,
                bWFQcmIjM2lZps3x: (mentionContent, replyMessage) async {
                  await _btm8tBNPkvl46dsVw2rtsd1TSlZ9(
                    mentionContent,
                    replyMessage,
                  );
                },
                bMR8jrpfJ: (message, replyMessage, messageType) async {
                  {
                    var var_BxmnQ = String.fromCharCodes(const <int>[
                      69,
                      103,
                      99,
                      120,
                      84,
                    ]);
                  }
                  await _nsaHp97Emw9fakX87PBZTQ(
                    message,
                    replyMessage,
                    messageType,
                  );
                },
                // HuqCmvKclgMia4PVhac5
                // BBXdAGmEcW53K90c3
                s0KVnu2DuRebj: _deTpwybhyqh3tLEsl5(),
                hoPtr4WdEfT9: () async {
                  // nb I0krnITJ7D
                  if (_qws2WeDT5uGAjKPSW8oItq &&
                      _kFvXZ8yOGez2AftcOonoWOr6 > 0) {
                    // Ogl1wlDkfstSBpeT6Mjiw
                    await _ayeMsvzO59Mnv6jKTwhK();
                  } else {
                    {
                      var var_SvTeM = String.fromCharCodes(const <int>[
                        79,
                        111,
                        88,
                        70,
                        114,
                      ]);
                    }
                    // KP8bkDsq6D
                    final provider = Provider.of<KcW2piApkl1W>(
                      context,
                      listen: false,
                    );
                    S0jlNL.aNRrP(
                      String.fromCharCodes(const <int>[
                        67,
                        104,
                        97,
                        116,
                        83,
                        99,
                        114,
                        101,
                        101,
                        110,
                        58,
                        32,
                        108,
                        111,
                        97,
                        100,
                        77,
                        111,
                        114,
                        101,
                        68,
                        97,
                        116,
                        97,
                        32,
                        116,
                        114,
                        105,
                        103,
                        103,
                        101,
                        114,
                        101,
                        100,
                        32,
                        45,
                        62,
                        32,
                        99,
                        97,
                        108,
                        108,
                        105,
                        110,
                        103,
                        32,
                        112,
                        114,
                        111,
                        118,
                        105,
                        100,
                        101,
                        114,
                        46,
                        108,
                        111,
                        97,
                        100,
                        77,
                        101,
                        115,
                        115,
                        97,
                        103,
                        101,
                        115,
                        40,
                        108,
                        111,
                        97,
                        100,
                        77,
                        111,
                        114,
                        101,
                        58,
                        116,
                        114,
                        117,
                        101,
                        41,
                        32,
                        46,
                        46,
                        46,
                      ]),
                    );
                    await provider.mYLm3h4nfPpK(loadMore: true);
                    S0jlNL.aNRrP(
                      'ChatScreen: loadMoreData completed. messagesLen=${provider.vvinzV06.length}, hasMore=${provider.dkFJKK5gX88pevX}',
                    );
                    // Cy0z28iLqJFlTjecHRqkjO7hh
                    try {
                      {
                        var var_Lnblu = String.fromCharCodes(const <int>[
                          87,
                          81,
                          106,
                          88,
                          122,
                        ]);
                      }
                      final items = await F6FOxqdAzLPaptF().n0S41G0FOGCu(
                        channelId: widget.jtOMCOXzl,
                        channelType: widget.vrrAD3oFxIr,
                      );
                      await _xdF553n0u1qYKUp0RclK(items);
                    } catch (_) {
                      {
                        var var_cxTzk = String.fromCharCodes(const <int>[
                          116,
                          100,
                          70,
                          110,
                          97,
                        ]);
                      }
                    }
                  }
                },
                cQvmTyScUF: !Provider.of<KcW2piApkl1W>(
                  context,
                  listen: false,
                ).dkFJKK5gX88pevX,
                ylFc14njmsNle: Center(
                  child: Container(
                    width: 36,
                    height: 36,
                    decoration: BoxDecoration(
                      gradient: const LinearGradient(
                        begin: Alignment.topCenter,
                        end: Alignment.bottomCenter,
                        colors: [
                          Color(0xFF9C27B0),
                          Color(0xFF6A1B9A),
                          Color(0xFF4A148C),
                        ],
                      ),
                      borderRadius: BorderRadius.circular(18),
                      boxShadow: [
                        BoxShadow(
                          color: Colors.black.withOpacity(0.3),
                          offset: const Offset(0, 2),
                          blurRadius: 4,
                        ),
                      ],
                    ),
                    child: const Padding(
                      padding: EdgeInsets.all(8),
                      child: CircularProgressIndicator(
                        strokeWidth: 2,
                        valueColor: AlwaysStoppedAnimation<Color>(Colors.white),
                      ),
                    ),
                  ),
                ),
                uPZsGeoBUAhkUvh1: LDu3DdgasPERhqde4NLvlBh(
                  eUC2NVGSDe6: _i1olnucytonsqrrokDgVMDW,
                  sSbKUpyXU7IZokkmkchEHJor: X4rQg5jzsA(
                    // VK6uxhloz7ROIilLh0a pnChP0yTA
                    aJV0n: const Color(0xFF6A1B9A), // WNvjJcHKs6YQfcsI1v
                    hO7P5xcSb:
                        MiZsOEG.jBuZZ0F2IJ(
                          context,
                          weight: FontWeight.w400,
                          color: Colors.white,
                        ).copyWith(
                          shadows: [
                            const Shadow(
                              offset: Offset(0, 1),
                              blurRadius: 2,
                              color: Colors.black38,
                            ),
                          ],
                        ),
                    wQLzPEZbDtGw: const BorderRadius.only(
                      topLeft: Radius.circular(24),
                      topRight: Radius.circular(24),
                      bottomLeft: Radius.circular(24),
                      bottomRight: Radius.circular(8),
                    ),
                    bqh1i09BDJbl10rQ5I84: HZEQpR4IG4cNzEmggWHR(
                      zvNBtXPbDD4IYn:
                          MGz1uyeF5yVLCM.hQ0, // Rby4LOFr3PfB6QfF14eln 7q
                      u4ztARqrnvdMf2y: _s0GxM9lFbk4c3szFu9m4xaer,
                    ),
                    q2hogaxtPwfaRsRB8: MvDW0mNO7qQF7r9NjT7Lfz9Q(
                      cPadGNWsajSqewk: const Color(0xFF8E24AA),
                      o6x4YRabmhVz: 12,
                      sR2hWWCUfl: const TextStyle(
                        color: Colors.white,
                        fontWeight: FontWeight.w600,
                      ),
                      oVcW9JItZ: const TextStyle(color: Colors.white),
                      hdin7tXl1: const TextStyle(
                        color: Colors.white,
                        decoration: TextDecoration.underline,
                        fontSize: 16,
                        fontWeight: FontWeight.w500,
                      ),
                      vyg89Rz82MfU: Colors.white,
                    ),
                  ),
                  w3wa9uiEacbUXH93OQ6ETmM5: X4rQg5jzsA(
                    aJV0n: Colors.white, // GFO ruWvd291PBD6gTtsrIt
                    hO7P5xcSb: MiZsOEG.jBuZZ0F2IJ(
                      context,
                      weight: FontWeight.w400,
                      color: const Color(0xFF1A1A1A),
                    ),
                    wQLzPEZbDtGw: const BorderRadius.only(
                      topLeft: Radius.circular(24),
                      topRight: Radius.circular(24),
                      bottomLeft: Radius.circular(8),
                      bottomRight: Radius.circular(24),
                    ),
                    // MtwVNEuwB1
                    q2hogaxtPwfaRsRB8: MvDW0mNO7qQF7r9NjT7Lfz9Q(
                      cPadGNWsajSqewk: Colors.white,
                      o6x4YRabmhVz: 12,
                      sR2hWWCUfl: const TextStyle(
                        color: Color(0xFF111827),
                        fontWeight: FontWeight.w600,
                      ),
                      oVcW9JItZ: const TextStyle(color: Color(0xFF111827)),
                      hdin7tXl1: const TextStyle(
                        color: Color(0xFF6A1B9A),
                        decoration: TextDecoration.none,
                        fontSize: 16,
                        fontWeight: FontWeight.w500,
                      ),
                      vyg89Rz82MfU: const Color(0xFF6A1B9A),
                    ),
                  ),
                ),
                ymYsBBH4TrGH6LLhP: UrEXAabEWeRZdiRXeCI5xi01(
                  // QWtwA5KcQSZXkSG
                  d6cSts9e9aPnLk2f1VY2wpH: true,
                  xoUDHDS5V4Uco377V4Dpxyu3: true,
                  // USlLdKNYsHhvietaorf0
                  ztWv0uPG6DNwvXehOWU: true,
                  xDyzxkE5xlYmEUmt5orgjU: TpjPMsPKELVUgLQpoBewsRUXq3p5e(
                    qRAxY0ZETLuQuWk: const Color(0xFF9C27B0),
                    k0xDqIiAMKhVZczh: const Color(0xFF6A1B9A),
                    // 6i0fdBUxn3ELYLmBX8
                    rXWgmxJqZS93DhIzxXHXJs: const Icon(
                      FluentIcons.image_24_filled,
                      color: Color(0xFF6A1B9A),
                    ),
                    tyvUeV7qb35SRVL4TryzX: const Icon(
                      FluentIcons.camera_24_filled,
                      color: Color(0xFF9C27B0),
                    ),
                  ),
                  // uoYkhX0W1IE0
                  ywh44ymEJcITPaObZUEWFRzOp3x:
                      const NDY2WrW4tYERvLNlXEM9wi56RI8(
                        h2hL8pHx3csdCYn: Color(0xFFF7F8FA),
                        // 4au37LWeDyeAiP7Kx1DUocV9k
                        ibsfm7ITw7bLDTHOS: Color(0xFF6A1B9A),
                        da5CPJO5C: WaveStyle(
                          showMiddleLine: false,
                          waveColor: Color(
                            0x806A1B9A,
                          ), // VHER4mN0NB4CF Y8VreN0tf4G
                          extendWaveform: true,
                        ),
                        zrLjAH7: Icon(FluentIcons.mic_24_filled),
                        cEW2GjhQ: Icon(FluentIcons.stop_24_filled),
                      ),
                  k44XwnTjFZp0UVaVG43wHvhOC: const Xuha0VERDJ8v0Xz2Gz0MTPCrR(
                    wwsm: Icon(FluentIcons.dismiss_circle_24_filled),
                  ),
                  bEdUWoUe2iGUL0q: CptarkpduS3r4LQiG9cxmO(
                    lV1FCjI: _g8OBft2y9Of64c && !isGlobalMuted,
                    oxdmm5epW: false,
                    sB1i14lq: (_g8OBft2y9Of64c && !isGlobalMuted)
                        ? AppLocalizations.of(context)!.arybpa5v6obm7p
                        : (isGlobalMuted ? globalMuteText : _r4zQHW2u9p2Jd),
                    dfBYH1MY7: MiZsOEG.jBuZZ0F2IJ(
                      context,
                      color: const Color(0xFF8E8E93),
                    ),
                    uRMwh5y1K: MiZsOEG.jBuZZ0F2IJ(
                      context,
                      color: const Color(0xFF1A1A1A),
                    ),
                    yuL2srdoVdH8ppo: [LengthLimitingTextInputFormatter(1000)],
                    aiQCgkM2eaw0: BorderRadius.circular(24),
                    kj56ZCb0hZCGLCN: (status) {
                      // HsnEBgA3BMSa4mlMCeMLbFrutZfl
                      final provider = Provider.of<KcW2piApkl1W>(
                        context,
                        listen: false,
                      );
                      provider.tcksTDhHIIeGPAxZO(status.name);
                    },
                    // 8QA tMtFS4VUFMlEVzykHM98LB
                    ldiW6oDB1pf: context.read<NGifbrk3zcDRm>().qeZumpIL(
                      widget.jtOMCOXzl,
                      widget.vrrAD3oFxIr,
                    ),
                    r2e5FIlmTzelt: (text) {
                      if (_gYargFg7n) return;
                      context.read<NGifbrk3zcDRm>().mRcSal9Y(
                        widget.jtOMCOXzl,
                        widget.vrrAD3oFxIr,
                        text,
                      );
                    },
                  ),
                  jmix6wgDJ3oaI1WDUpPGKl: const Color(0xFF6A1B9A),
                  tx78XR2meWmfYn1arANGyVtv: const Color(0xFFF7F8FA),
                  // NL1exdPlmd4wXJRE0
                  lOl4jmVFYJhJoD: const Color(0xFF6B7280),
                ),

                zS4sNAWVVeF6bMHBLlM: _zEkxppmtXquFTuvz3eGN7G0t(),
                ta2ZEkoumP4WegLNCIo: Xv7oxuSgtLJQWVCbsLoXqT8Jyl(
                  jRJKwJPx4Y9Jt: 4,
                  e1OpVBewOepo: 20,
                  c0zrCZqmEHX84XC: _rQHkW00Pwa1iLXHfhO(),
                  sEsMabAZKUu1L01lY: (user) async {
                    try {
                      if (false) {
                        print(
                          String.fromCharCodes(const <int>[
                            110,
                            115,
                            73,
                            98,
                            101,
                          ]),
                        );
                      }
                      // N1wemYJyYq0Mevyp3XgJaS4iz
                      if (widget.vrrAD3oFxIr != WKChannelType.group) {
                        return;
                      }
                      if (LTWIND0TK3iW79z.pcwqSTlYcMBe(user.id)) {
                        return;
                      }
                      String name = user.name;
                      if (widget.vrrAD3oFxIr == WKChannelType.group) {
                        try {
                          final resolved = await _yhgDh0W66PpqOQg0Fb3zja4F9(
                            user.id,
                          );
                          if (resolved.isNotEmpty) name = resolved;
                        } catch (_) {}
                      }

                      // PY2OdM3j4Ee pbr0
                      WKChannelMember? targetMember;
                      int targetForbiddenExpirationTime = 0;
                      if (widget.vrrAD3oFxIr == WKChannelType.group) {
                        targetMember = await WKIM.shared.channelMemberManager
                            .getMember(
                              widget.jtOMCOXzl,
                              widget.vrrAD3oFxIr,
                              user.id,
                            );
                        targetForbiddenExpirationTime =
                            targetMember?.forbiddenExpirationTime ?? 0;
                      }

                      // lHZjGKBI7CaR
                      // WnjmdocaXeDlcjbUcdgEPyl7vrGeZ
                      // w2ztwBIVxeqNY
                      // jGeIKetaQBuSjE Dnbe
                      // pjSGg8SWL8A2R6gpA3mKaqSyflrHJ
                      // a2N0umo7klNWc9a
                      // x10I2AyrcltJs7IeCO86MpVxh
                      // 6gas2nDRl7975D8PJw

                      final bool isSelfNormalMember = _ddoxAPQ5r5?.role == 0;
                      final bool isSelfDeleted = _ddoxAPQ5r5?.isDeleted == 1;
                      final bool isTargetSelf = user.id == _g6KbJSl20Gx4C;
                      final bool isTargetOwner = targetMember?.role == 1;
                      final bool isTargetSameRole =
                          _ddoxAPQ5r5?.role == targetMember?.role;
                      // sWRAb zS4m
                      // TYrN6CZ8nB7hRXH1caO
                      // 2d3TQMrQkdk7DpCiM5qfqNh
                      final bool hasTargetLeftGroup =
                          targetMember == null || targetMember.isDeleted == 1;

                      // Z0RWXaYTBk4Rj5F50t7vLZMQBm
                      // io5wLxrSwownHHtFsHZfcvf9FQ
                      // yJfjWjvvQK WGYh3gOafbtldIYRno
                      // gDn04BLa0i1gFaWIj
                      // 4v4tVunMCPzAb3J3jQJuGrZsVNLh
                      // 6SSkbEsBjsKV
                      // ULnvnrMROLWCrx I0Gv2JRFsTefJl
                      // 60wHYA66uCiQXUKB
                      final bool canActOnTarget =
                          widget.vrrAD3oFxIr == WKChannelType.group &&
                          !isSelfNormalMember &&
                          !isSelfDeleted &&
                          !isTargetSelf &&
                          !isTargetOwner &&
                          !isTargetSameRole &&
                          !hasTargetLeftGroup;

                      if (!mounted) return;
                      showModalBottomSheet(
                        context: context,
                        backgroundColor: Colors.transparent,
                        shape: const RoundedRectangleBorder(
                          borderRadius: BorderRadius.vertical(
                            top: Radius.circular(16),
                          ),
                        ),
                        builder: (ctx) {
                          return Container(
                            decoration: const BoxDecoration(
                              gradient: LinearGradient(
                                begin: Alignment.topCenter,
                                end: Alignment.bottomCenter,
                                colors: [
                                  Color(0xFFF8F8F8),
                                  Color(0xFFF0F0F0),
                                  Color(0xFFE8E8E8),
                                ],
                              ),
                              borderRadius: BorderRadius.vertical(
                                top: Radius.circular(16),
                              ),
                              boxShadow: [
                                BoxShadow(
                                  color: Colors.black26,
                                  offset: Offset(0, -4),
                                  blurRadius: 16,
                                ),
                                BoxShadow(
                                  color: Colors.black12,
                                  offset: Offset(0, -1),
                                  blurRadius: 4,
                                ),
                              ],
                              border: Border(
                                top: BorderSide(
                                  color: Color(0xFFFFFFFF),
                                  width: 1.5,
                                ),
                              ),
                            ),
                            child: SafeArea(
                              child: Column(
                                mainAxisSize: MainAxisSize.min,
                                children: [
                                  // XcX8Be7FjW
                                  Container(
                                    padding: const EdgeInsets.only(
                                      top: 12,
                                      bottom: 8,
                                    ),
                                    child: Container(
                                      width: 40,
                                      height: 5,
                                      decoration: BoxDecoration(
                                        gradient: const LinearGradient(
                                          begin: Alignment.topCenter,
                                          end: Alignment.bottomCenter,
                                          colors: [
                                            Color(0xFFB0B0B0),
                                            Color(0xFF909090),
                                          ],
                                        ),
                                        borderRadius: BorderRadius.circular(3),
                                        boxShadow: [
                                          BoxShadow(
                                            color: Colors.white.withOpacity(
                                              0.5,
                                            ),
                                            offset: const Offset(0, 1),
                                            blurRadius: 0,
                                          ),
                                          BoxShadow(
                                            color: Colors.black.withOpacity(
                                              0.2,
                                            ),
                                            offset: const Offset(0, -1),
                                            blurRadius: 1,
                                          ),
                                        ],
                                      ),
                                    ),
                                  ),
                                  ListTile(
                                    leading: const Icon(
                                      Icons.alternate_email,
                                      color: Color(0xFF374151),
                                    ),
                                    title: Text(
                                      String.fromCharCodes(const <int>[
                                            64,
                                            32,
                                          ]) +
                                          name,
                                    ),
                                    onTap: () {
                                      Navigator.pop(ctx);
                                      CziZxWB0.kZ16QA9uSOcOw(
                                        context,
                                        userId: user.id,
                                        displayName: name,
                                      );
                                    },
                                  ),
                                  // o522VoyJulsQouPhsQhIgnsFu
                                  if (targetForbiddenExpirationTime > 0 &&
                                      canActOnTarget) ...[
                                    // S3TAJKE7GttDJ
                                    ListTile(
                                      leading: const Icon(
                                        Icons.schedule_outlined,
                                        color: Color(0xFFF59E0B),
                                      ),
                                      title: Text(
                                        _vm1pipzdacJbZwdbXSv9(
                                          targetForbiddenExpirationTime,
                                        ),
                                      ),
                                      subtitle: Text(
                                        AppLocalizations.of(
                                          context,
                                        )!.s8e65f15mo,
                                        style: const TextStyle(
                                          fontSize: 12,
                                          color: Color(0xFF6B7280),
                                        ),
                                      ),
                                      onTap: () async {
                                        if (1 == 2) {
                                          var var_oenBZ = String.fromCharCodes(
                                            const <int>[118, 107, 87, 78, 75],
                                          );
                                        }
                                        Navigator.pop(ctx);
                                        // 6pyEu0CewXdGj a7E1sxRgkN3Nf
                                        final confirmed = await showDialog<bool>(
                                          context: context,
                                          builder: (dialogContext) {
                                            return Dialog(
                                              backgroundColor:
                                                  Colors.transparent,
                                              child: Container(
                                                margin: const EdgeInsets.all(
                                                  20,
                                                ),
                                                padding: const EdgeInsets.all(
                                                  24,
                                                ),
                                                decoration: BoxDecoration(
                                                  color: const Color(
                                                    0xFFF7F8FA,
                                                  ),
                                                  borderRadius:
                                                      BorderRadius.circular(28),
                                                  boxShadow: [
                                                    BoxShadow(
                                                      color: Colors.black
                                                          .withOpacity(0.08),
                                                      offset: const Offset(
                                                        4,
                                                        4,
                                                      ),
                                                      blurRadius: 16,
                                                    ),
                                                    BoxShadow(
                                                      color: Colors.white
                                                          .withOpacity(0.9),
                                                      offset: const Offset(
                                                        -4,
                                                        -4,
                                                      ),
                                                      blurRadius: 16,
                                                    ),
                                                  ],
                                                  border: Border.all(
                                                    color: Colors.white
                                                        .withOpacity(0.7),
                                                    width: 1.5,
                                                  ),
                                                ),
                                                child: Column(
                                                  mainAxisSize:
                                                      MainAxisSize.min,
                                                  children: [
                                                    Text(
                                                      AppLocalizations.of(
                                                        context,
                                                      )!.yfhlaltgugwafj,
                                                      style:
                                                          MiZsOEG.xWI3SuXt7df(
                                                            context,
                                                            weight:
                                                                FontWeight.w700,
                                                            color: const Color(
                                                              0xFF1A1A1A,
                                                            ),
                                                          ),
                                                    ),
                                                    const SizedBox(height: 12),
                                                    Text(
                                                      AppLocalizations.of(
                                                        context,
                                                      )!.llul1evisqtfgw(name),
                                                      style: MiZsOEG.jBuZZ0F2IJ(
                                                        context,
                                                        color: const Color(
                                                          0xFF8E8E93,
                                                        ),
                                                        height: 1.4,
                                                      ),
                                                      textAlign:
                                                          TextAlign.center,
                                                    ),
                                                    const SizedBox(height: 24),
                                                    Row(
                                                      children: [
                                                        Expanded(
                                                          child: TextButton(
                                                            onPressed: () =>
                                                                Navigator.pop(
                                                                  dialogContext,
                                                                  false,
                                                                ),
                                                            child: Text(
                                                              AppLocalizations.of(
                                                                context,
                                                              )!.i36uvwkrls6pll,
                                                            ),
                                                          ),
                                                        ),
                                                        const SizedBox(
                                                          width: 12,
                                                        ),
                                                        Expanded(
                                                          child: ElevatedButton(
                                                            onPressed: () =>
                                                                Navigator.pop(
                                                                  dialogContext,
                                                                  true,
                                                                ),
                                                            child: Text(
                                                              AppLocalizations.of(
                                                                context,
                                                              )!.nomev7bp314w0uc,
                                                            ),
                                                          ),
                                                        ),
                                                      ],
                                                    ),
                                                  ],
                                                ),
                                              ),
                                            );
                                          },
                                        );

                                        if (confirmed != true || !mounted)
                                          return;

                                        try {
                                          if (1 == 2) {
                                            var var_QHASB =
                                                String.fromCharCodes(
                                                  const <int>[
                                                    122,
                                                    87,
                                                    68,
                                                    73,
                                                    112,
                                                  ],
                                                );
                                          }
                                          // hhYogn7Wq7O7qnnAUSwsQJHB2D
                                          final success = await K7zFQYcKCCmW()
                                              .opQIfTTpBiz5iZ3v5Nf(
                                                widget.jtOMCOXzl,
                                                user.id,
                                                0, // 3BeHVwJ02y81
                                                0, // 0CvC8RjMwAR33
                                              );

                                          if (!mounted) return;

                                          if (success) {
                                            // ru9XB2md23O38FzehjWrLLf
                                            await K7zFQYcKCCmW()
                                                .b7C6NkdHjCqBc5CS(
                                                  widget.jtOMCOXzl,
                                                  uid: user.id,
                                                );

                                            if (!mounted) return;
                                            ScaffoldMessenger.of(
                                              context,
                                            ).showSnackBar(
                                              SnackBar(
                                                content: Text(
                                                  AppLocalizations.of(
                                                    context,
                                                  )!.fllvnuqfx9l4rzgak,
                                                ),
                                              ),
                                            );
                                          } else {
                                            if (false) {
                                              print(
                                                String.fromCharCodes(
                                                  const <int>[
                                                    87,
                                                    82,
                                                    73,
                                                    104,
                                                    75,
                                                  ],
                                                ),
                                              );
                                            }
                                            ScaffoldMessenger.of(
                                              context,
                                            ).showSnackBar(
                                              SnackBar(
                                                content: Text(
                                                  AppLocalizations.of(
                                                    context,
                                                  )!.wmjm2bfe6n4m,
                                                ),
                                              ),
                                            );
                                          }
                                        } catch (e) {
                                          S0jlNL.xPrk5(
                                            String.fromCharCodes(const <int>[
                                              85,
                                              110,
                                              109,
                                              117,
                                              116,
                                              101,
                                              32,
                                              109,
                                              101,
                                              109,
                                              98,
                                              101,
                                              114,
                                              32,
                                              101,
                                              114,
                                              114,
                                              111,
                                              114,
                                            ]),
                                            error: e,
                                          );
                                          if (!mounted) return;
                                          ScaffoldMessenger.of(
                                            context,
                                          ).showSnackBar(
                                            SnackBar(
                                              content: Text(
                                                AppLocalizations.of(
                                                  context,
                                                )!.fodygo5aghf015xt(
                                                  e.toString(),
                                                ),
                                              ),
                                            ),
                                          );
                                        }
                                      },
                                    ),
                                  ],
                                  // OblVBRRAq5dE
                                  if (canActOnTarget) ...[
                                    // AGABbx0oMaBuU5TCuiBPd
                                    if (targetForbiddenExpirationTime == 0) ...[
                                      ListTile(
                                        leading: const Icon(
                                          Icons.voice_over_off_outlined,
                                          color: Color(0xFFF59E0B),
                                        ),
                                        title: Text(
                                          AppLocalizations.of(
                                            context,
                                          )!.i7vyzvsdqcvsqnhpc,
                                        ),
                                        onTap: () async {
                                          Navigator.pop(ctx);
                                          try {
                                            final selectedKey =
                                                await showMuteTimeSheet(
                                                  context,
                                                );
                                            if (!mounted) return;
                                            if (selectedKey == null) return;

                                            final ok = await K7zFQYcKCCmW()
                                                .opQIfTTpBiz5iZ3v5Nf(
                                                  widget.jtOMCOXzl,
                                                  user.id,
                                                  1,
                                                  selectedKey,
                                                );
                                            if (!mounted) return;
                                            if (ok) {
                                              // vrBEFVJcI7 xTe7ff
                                              await K7zFQYcKCCmW()
                                                  .b7C6NkdHjCqBc5CS(
                                                    widget.jtOMCOXzl,
                                                    uid: user.id,
                                                  );

                                              if (!mounted) return;
                                              ScaffoldMessenger.of(
                                                context,
                                              ).showSnackBar(
                                                SnackBar(
                                                  content: Text(
                                                    AppLocalizations.of(
                                                          context,
                                                        )?.ng5vo2uyy65 ??
                                                        String.fromCharCodes(
                                                          const <int>[
                                                            77,
                                                            101,
                                                            109,
                                                            98,
                                                            101,
                                                            114,
                                                            32,
                                                            109,
                                                            117,
                                                            116,
                                                            101,
                                                            100,
                                                            32,
                                                            115,
                                                            117,
                                                            99,
                                                            99,
                                                            101,
                                                            115,
                                                            115,
                                                            102,
                                                            117,
                                                            108,
                                                            108,
                                                            121,
                                                          ],
                                                        ),
                                                  ),
                                                ),
                                              );
                                            } else {
                                              ScaffoldMessenger.of(
                                                context,
                                              ).showSnackBar(
                                                SnackBar(
                                                  content: Text(
                                                    AppLocalizations.of(
                                                          context,
                                                        )?.by6iqkt53hjd5peh ??
                                                        String.fromCharCodes(
                                                          const <int>[
                                                            77,
                                                            117,
                                                            116,
                                                            101,
                                                            32,
                                                            102,
                                                            97,
                                                            105,
                                                            108,
                                                            101,
                                                            100,
                                                          ],
                                                        ),
                                                  ),
                                                ),
                                              );
                                            }
                                          } catch (e) {
                                            if (1 == 2) {
                                              var var_mRWUH =
                                                  String.fromCharCodes(
                                                    const <int>[
                                                      83,
                                                      120,
                                                      100,
                                                      89,
                                                      85,
                                                    ],
                                                  );
                                            }
                                            S0jlNL.xPrk5(
                                              String.fromCharCodes(const <int>[
                                                77,
                                                117,
                                                116,
                                                101,
                                                32,
                                                109,
                                                101,
                                                109,
                                                98,
                                                101,
                                                114,
                                                32,
                                                101,
                                                114,
                                                114,
                                                111,
                                                114,
                                              ]),
                                              error: e,
                                            );
                                            if (!mounted) return;
                                            ScaffoldMessenger.of(
                                              context,
                                            ).showSnackBar(
                                              SnackBar(
                                                content: Text(
                                                  AppLocalizations.of(
                                                    context,
                                                  )!.fodygo5aghf015xt(
                                                    e.toString(),
                                                  ),
                                                ),
                                              ),
                                            );
                                          }
                                        },
                                      ),
                                    ],
                                    ListTile(
                                      leading: const Icon(
                                        FluentIcons.delete_24_regular,
                                        color: Color(0xFFEF4444),
                                      ),
                                      title: Text(
                                        String.fromCharCodes(const <int>[
                                          68,
                                          101,
                                          108,
                                          101,
                                          116,
                                          101,
                                          32,
                                          116,
                                          104,
                                          105,
                                          115,
                                          32,
                                          103,
                                          114,
                                          111,
                                          117,
                                          112,
                                          32,
                                          109,
                                          101,
                                          109,
                                          98,
                                          101,
                                          114,
                                        ]),
                                        style: TextStyle(
                                          color: Color(0xFFEF4444),
                                        ),
                                      ),
                                      onTap: () async {
                                        if (false) {
                                          print(
                                            String.fromCharCodes(const <int>[
                                              87,
                                              116,
                                              116,
                                              70,
                                              108,
                                            ]),
                                          );
                                        }
                                        Navigator.pop(ctx);
                                        final confirmed =
                                            await showStyledDialog<bool>(
                                              context: context,
                                              icon:
                                                  FluentIcons.delete_24_regular,
                                              iconColor: const Color(
                                                0xFFEF4444,
                                              ),
                                              title:
                                                  AppLocalizations.of(
                                                    context,
                                                  )?.nomev7bp314w0uc ??
                                                  String.fromCharCodes(
                                                    const <int>[
                                                      67,
                                                      111,
                                                      110,
                                                      102,
                                                      105,
                                                      114,
                                                      109,
                                                    ],
                                                  ),
                                              content:
                                                  (AppLocalizations.of(
                                                        context,
                                                      )?.btt1svm9s0gt ??
                                                      String.fromCharCodes(
                                                        const <int>[
                                                          82,
                                                          101,
                                                          109,
                                                          111,
                                                          118,
                                                          101,
                                                          32,
                                                          116,
                                                          104,
                                                          105,
                                                          115,
                                                          32,
                                                          109,
                                                          101,
                                                          109,
                                                          98,
                                                          101,
                                                          114,
                                                          32,
                                                          102,
                                                          114,
                                                          111,
                                                          109,
                                                          32,
                                                          116,
                                                          104,
                                                          101,
                                                          32,
                                                          103,
                                                          114,
                                                          111,
                                                          117,
                                                          112,
                                                        ],
                                                      )) +
                                                  '\n' +
                                                  name,
                                              primaryButtonText:
                                                  AppLocalizations.of(
                                                    context,
                                                  )?.ymq3fr9j8y ??
                                                  String.fromCharCodes(
                                                    const <int>[
                                                      68,
                                                      101,
                                                      108,
                                                      101,
                                                      116,
                                                      101,
                                                      32,
                                                      77,
                                                      101,
                                                      109,
                                                      98,
                                                      101,
                                                      114,
                                                    ],
                                                  ),
                                              onPrimaryPressed: () =>
                                                  Navigator.pop(context, true),
                                              secondaryButtonText:
                                                  AppLocalizations.of(
                                                    context,
                                                  )?.i36uvwkrls6pll ??
                                                  String.fromCharCodes(
                                                    const <int>[
                                                      67,
                                                      97,
                                                      110,
                                                      99,
                                                      101,
                                                      108,
                                                    ],
                                                  ),
                                              onSecondaryPressed: () =>
                                                  Navigator.pop(context, false),
                                              primaryButtonColor: const Color(
                                                0xFFEF4444,
                                              ),
                                              barrierDismissible: true,
                                            );
                                        if (confirmed == true) {
                                          try {
                                            final ok = await K7zFQYcKCCmW()
                                                .aLYtpy35xII6rnUPWN(
                                                  widget.jtOMCOXzl,
                                                  [user.id],
                                                  [name],
                                                );
                                            if (!mounted) return;
                                            if (ok) {
                                              // eDLhDEGFmc
                                              // SVBpFVkOAWu 0sSU2h5GwhtEF
                                              //  rClgIrcUdXNVy
                                              // aNdXo0cGfmZoDgiKlZXmOEs
                                              CqGyBkLubjH1JOytqR.sFXE5Uow
                                                  .ubb2O0VF47tEKjzjnXjJu8(
                                                    widget.jtOMCOXzl,
                                                  )
                                                  .ignore();

                                              // eXzV7tx25xoehwYC9W UUH52rFubT
                                              //  8WmE0PDAQFIaf
                                              // LDWCAZzel3GB9djJV1
                                              _rUnDmEuJCvsSbesWn53a7AYR();

                                              ScaffoldMessenger.of(
                                                context,
                                              ).showSnackBar(
                                                SnackBar(
                                                  content: Text(
                                                    AppLocalizations.of(
                                                          context,
                                                        )?.cg2wln53sjg22ku ??
                                                        String.fromCharCodes(
                                                          const <int>[
                                                            77,
                                                            101,
                                                            109,
                                                            98,
                                                            101,
                                                            114,
                                                            32,
                                                            114,
                                                            101,
                                                            109,
                                                            111,
                                                            118,
                                                            101,
                                                            100,
                                                            32,
                                                            102,
                                                            114,
                                                            111,
                                                            109,
                                                            32,
                                                            103,
                                                            114,
                                                            111,
                                                            117,
                                                            112,
                                                            32,
                                                            115,
                                                            117,
                                                            99,
                                                            99,
                                                            101,
                                                            115,
                                                            115,
                                                            102,
                                                            117,
                                                            108,
                                                            108,
                                                            121,
                                                          ],
                                                        ),
                                                  ),
                                                ),
                                              );
                                            } else {
                                              ScaffoldMessenger.of(
                                                context,
                                              ).showSnackBar(
                                                SnackBar(
                                                  content: Text(
                                                    AppLocalizations.of(
                                                      context,
                                                    )!.bnl4cl20iz8m22b,
                                                  ),
                                                ),
                                              );
                                            }
                                          } catch (e) {
                                            S0jlNL.xPrk5(
                                              String.fromCharCodes(const <int>[
                                                68,
                                                101,
                                                108,
                                                101,
                                                116,
                                                101,
                                                32,
                                                109,
                                                101,
                                                109,
                                                98,
                                                101,
                                                114,
                                                32,
                                                101,
                                                114,
                                                114,
                                                111,
                                                114,
                                              ]),
                                              error: e,
                                            );
                                            if (!mounted) return;
                                            ScaffoldMessenger.of(
                                              context,
                                            ).showSnackBar(
                                              SnackBar(
                                                content: Text(
                                                  AppLocalizations.of(
                                                    context,
                                                  )!.fodygo5aghf015xt(
                                                    e.toString(),
                                                  ),
                                                ),
                                              ),
                                            );
                                          }
                                        }
                                      },
                                    ),
                                  ],
                                ],
                              ),
                            ),
                          );
                        },
                      );
                    } catch (e) {
                      S0jlNL.xPrk5(
                        String.fromCharCodes(const <int>[
                          65,
                          118,
                          97,
                          116,
                          97,
                          114,
                          32,
                          108,
                          111,
                          110,
                          103,
                          45,
                          112,
                          114,
                          101,
                          115,
                          115,
                          32,
                          101,
                          114,
                          114,
                          111,
                          114,
                        ]),
                        error: e,
                      );
                    }
                    if (1 == 2) {
                      var var_axYwM = String.fromCharCodes(const <int>[
                        83,
                        104,
                        84,
                        121,
                        82,
                      ]);
                    }
                  },
                ),
                uC1LQdEkejEzDqnGf68K: ZfSfjzMZmmBkTPajzbJ0GQAwagm(
                  i5gg0mJI1WjVIxL: const Color(0xFFFFF3E0),
                  zlUGLa0cxnFtybmW: const Color(0xFFFC6E22),
                  ctBu3ZoMCtsL: BorderRadius.circular(12),
                  jaWUQjlYJ: MiZsOEG.sayjBzF78(
                    context,
                    weight: FontWeight.w500,
                    color: const Color(0xFF1A1A1A),
                  ),
                  hzqjVLI6PzCS6tbtzjp: MiZsOEG.rsoU4BboL0(
                    context,
                    weight: FontWeight.w600,
                    color: const Color(0xFFFC6E22),
                  ),
                  // LKLdiNTMgDEbW
                  yxJGqu30RpcHPdr2KX4zQ9EYIx: BMKpg6BtgbX5zqcx0LAFXURGIR(
                    ybR4hBQBQ66LArZSsvmmSnMt: true,
                    rRYwDAeODYSQwXKAa2Q6wgduw: true,
                    aZBj9ythuKhGOg: const Color(0xFFFFF3E0),
                    // gOYX1 6t2mbPwYEMN
                    jnKnqxHuNRtgxiNqT: const Duration(milliseconds: 700),
                    bjNeQ9z5yU8kW8: 1.08,
                    tq01Adl8MOkHDbT5JhOw: Curves.easeInOut,
                  ),
                ),
                e79ltZlqXFhMZTk3Jw: const CpsWWJ9HZmrPAchrQYw1g6O7j(
                  ux4hSl68IX4nNi: Color(0xFFFC6E22),
                  yref1VuVnkrlMDkghH5Uy0DI: Color(0xFFFFF3E0),
                ),
                fO0oSnX5VQmPb: TtWFKaniZlceNyn2M40B(
                  bUjT5ILDit0T9Ihl7BxFa: NTCUIcu9iJUQVh0v3wtrvv00D5E8(
                    j1lsdFCCFrPsRzD: const Color(
                      0xFFF8FAFC,
                    ), // PdIHiDxQYy0MfgL5HnsfBMCsz4o
                    ppF6zkzW9OE: const Color(
                      0xFFE5E7EB,
                    ), // NLl4LJen3o8EfyHLjGQz
                    amPbuCPkGFYiYzV6dRVwZOqLp9:
                        D4X9IQmdIlqclXj3dZmI8hEA2lXs1c1sq(
                          pV9QbFsqGC2lic8: const Color(
                            0xFFF8FAFC,
                          ), // jRcrY5OpP72mO2eF
                          lpwvKLAklHA0H5fOoAiaxRiX: BoxDecoration(
                            color: const Color(0xFFF7F8FA), // TMhwpO tzjW
                            borderRadius: BorderRadius.circular(16),
                            boxShadow: [
                              // tuQdStDP LIdcaOOnw H9F
                              const BoxShadow(
                                color: Color(0x0A000000),
                                offset: Offset(2, 2),
                                blurRadius: 4,
                              ),
                              const BoxShadow(
                                color: Color(0xE6FFFFFF),
                                offset: Offset(-2, -2),
                                blurRadius: 4,
                              ),
                            ],
                            border: Border.all(
                              color: const Color(0xB3FFFFFF),
                              width: 1,
                            ),
                          ),
                        ),
                  ),
                  uo2YNVjhGgZczzLjuMxNvK2ooRG4S: (reply) {
                    try {
                      final parsed = XZRzbmvFMTV6QM4UDd.fFBPtwZ0N62mY3h1MQIlH(
                        reply,
                      );
                      if (1 == 2) {
                        var var_zqdKu = String.fromCharCodes(const <int>[
                          121,
                          97,
                          100,
                          119,
                          69,
                        ]);
                      }
                      switch (parsed.cExp) {
                        case MHCNaPk5nR3qgF0S.sSLz:
                          final f = parsed.z2eQ!;
                          return YGxhz4E4ErMWJ(
                            r8BL: f.uUJG,
                            l2ay: f.uf53,
                            aPHs5VHz9: const Color(0xFF111827),
                            gkAyyoo: f.hRup9ZD,
                          );
                        case MHCNaPk5nR3qgF0S.v9DA:
                          final c = parsed.evO0!;
                          return A2n7mp2lwLoHU(
                            khc: c.cZc,
                            pWaG: c.dJXJ,
                            w2oE892Dk: const Color(0xFF111827),
                          );
                        case MHCNaPk5nR3qgF0S.qQgvcFNp:
                          final l = parsed.v0ZB4sEa!;
                          return Rypxk41a99lz9OHcA(
                            nFIVN: l.lRhcF,
                            aOhe8kA: l.avwpBWn,
                            jD714eiz0: const Color(0xFF111827),
                          );
                        case MHCNaPk5nR3qgF0S.pppCB:
                        case MHCNaPk5nR3qgF0S.o6QNy:
                        case MHCNaPk5nR3qgF0S.thLl:
                          // 96TTozm8EUwD
                          final displayText =
                              reply.message.startsWith(
                                String.fromCharCodes(const <int>[
                                  95,
                                  95,
                                  77,
                                  85,
                                  76,
                                  84,
                                  73,
                                  95,
                                  70,
                                  79,
                                  82,
                                  87,
                                  65,
                                  82,
                                  68,
                                  95,
                                  95,
                                  124,
                                ]),
                              )
                              ? String.fromCharCodes(const <int>[
                                  91,
                                  67,
                                  104,
                                  97,
                                  116,
                                  32,
                                  72,
                                  105,
                                  115,
                                  116,
                                  111,
                                  114,
                                  121,
                                  93,
                                ])
                              : reply.message;
                          return Text(
                            displayText,
                            maxLines: 1,
                            overflow: TextOverflow.ellipsis,
                            style: const TextStyle(
                              fontSize: 12,
                              color: Color(0xFF111827),
                            ),
                          );
                      }
                    } catch (_) {
                      final displayText =
                          reply.message.startsWith(
                            String.fromCharCodes(const <int>[
                              95,
                              95,
                              77,
                              85,
                              76,
                              84,
                              73,
                              95,
                              70,
                              79,
                              82,
                              87,
                              65,
                              82,
                              68,
                              95,
                              95,
                              124,
                            ]),
                          )
                          ? String.fromCharCodes(const <int>[
                              91,
                              67,
                              104,
                              97,
                              116,
                              32,
                              72,
                              105,
                              115,
                              116,
                              111,
                              114,
                              121,
                              93,
                            ])
                          : reply.message;
                      if (false) {
                        print(
                          String.fromCharCodes(const <int>[
                            106,
                            99,
                            118,
                            74,
                            80,
                          ]),
                        );
                      }
                      // 54G3cgvZBf Gl
                      return Text(
                        displayText,
                        maxLines: 1,
                        overflow: TextOverflow.ellipsis,
                        style: const TextStyle(
                          fontSize: 12,
                          color: Color(0xFF111827),
                        ),
                      );
                    }
                  },
                  fEJczcoAWJ6O8kIRP7YJ: (message) {
                    // i9MAWK73uGNmzth4gmLXBCYt5mM
                    // 6xqF4Ykkqlow2aYc
                    try {
                      // Ii79KIXA5ZAq0wThOQJW9i
                      if (message.message.startsWith(
                        String.fromCharCodes(const <int>[
                          95,
                          95,
                          70,
                          73,
                          76,
                          69,
                          95,
                          95,
                          124,
                        ]),
                      )) {
                        final payload = message.message.substring(
                          String.fromCharCodes(const <int>[
                            95,
                            95,
                            70,
                            73,
                            76,
                            69,
                            95,
                            95,
                            124,
                          ]).length,
                        );
                        if (1 == 2) {
                          var var_TlrSo = String.fromCharCodes(const <int>[
                            81,
                            116,
                            88,
                            97,
                            122,
                          ]);
                        }
                        Map<String, dynamic> data = {};
                        try {
                          data = (jsonDecode(payload) as Map)
                              .cast<String, dynamic>();
                        } catch (_) {}
                        final String name =
                            (data[String.fromCharCodes(const <int>[
                                      110,
                                      97,
                                      109,
                                      101,
                                    ])] ??
                                    '')
                                as String;
                        final int size =
                            (data[String.fromCharCodes(const <int>[
                                  115,
                                  105,
                                  122,
                                  101,
                                ])]
                                is int)
                            ? data[String.fromCharCodes(const <int>[
                                    115,
                                    105,
                                    122,
                                    101,
                                  ])]
                                  as int
                            : int.tryParse(
                                    '${data[String.fromCharCodes(const <int>[115, 105, 122, 101])]}',
                                  ) ??
                                  0;
                        final String urlRaw =
                            (data[String.fromCharCodes(const <int>[
                                      117,
                                      114,
                                      108,
                                    ])] ??
                                    '')
                                as String;
                        final String localPath =
                            (data[String.fromCharCodes(const <int>[
                                      108,
                                      111,
                                      99,
                                      97,
                                      108,
                                      80,
                                      97,
                                      116,
                                      104,
                                    ])] ??
                                    '')
                                as String;
                        final String url =
                            (urlRaw.startsWith(
                                  String.fromCharCodes(const <int>[
                                    104,
                                    116,
                                    116,
                                    112,
                                  ]),
                                ) ||
                                urlRaw.startsWith(
                                  String.fromCharCodes(const <int>[
                                    72,
                                    84,
                                    84,
                                    80,
                                  ]),
                                ))
                            ? urlRaw
                            : (urlRaw.isNotEmpty
                                  ? P6yedlHkdEt.jzMyuEhRqt(urlRaw)
                                  : '');
                        final String ext = _r92JOXyAntqzFnKJ(
                          name,
                        ).toUpperCase();
                        final String sizeText = _wp36KB8kaAXDtP(size);
                        final progressNotifier = QUSldWw6wHebaJeJQASYec.csgvXa3U
                            .dz(message.id);

                        // aJEGmOZyQQyRplx5eMrmarwjq
                        if (ext ==
                            String.fromCharCodes(const <int>[77, 80, 52])) {
                          return ValueListenableBuilder<NAgg3ekccr17hb3uMZDT>(
                            valueListenable: progressNotifier,
                            builder: (_, p, __) {
                              final isDownloading = p.vtGhWFpL6qv;
                              if (false) {
                                print(
                                  String.fromCharCodes(const <int>[
                                    67,
                                    68,
                                    79,
                                    68,
                                    110,
                                  ]),
                                );
                              }
                              final hasReactions =
                                  message.reaction.reactions.isNotEmpty;
                              return Padding(
                                padding: EdgeInsets.only(
                                  bottom: hasReactions ? 6.h : 0,
                                ),
                                child: Stack(
                                  clipBehavior: Clip.none,
                                  children: [
                                    InkWell(
                                      onTap: isDownloading
                                          ? null
                                          : () => _ifRsaNnXn4IpoUzggq(
                                              message.id,
                                              localPath: localPath.isEmpty
                                                  ? null
                                                  : localPath,
                                              remoteUrl: url.isEmpty
                                                  ? null
                                                  : url,
                                            ),
                                      child: ConstrainedBox(
                                        constraints: const BoxConstraints(
                                          minWidth: 100,
                                          maxWidth: 280,
                                        ),
                                        child: Container(
                                          margin: EdgeInsets.only(
                                            bottom: hasReactions ? 14.h : 0,
                                          ),
                                          child: Stack(
                                            children: [
                                              Hero(
                                                tag: message.id,
                                                child: ClipRRect(
                                                  borderRadius:
                                                      BorderRadius.circular(14),
                                                  child: FutureBuilder<String?>(
                                                    future:
                                                        _doH0B0bKJ15hOJTg1mFM4BdPe[message
                                                                .id] ??=
                                                            _fFfnA1PhieT0FtAIklodBQVK6lF(
                                                              message.id,
                                                              localPath:
                                                                  localPath
                                                                      .isEmpty
                                                                  ? null
                                                                  : localPath,
                                                              remoteUrl:
                                                                  url.isEmpty
                                                                  ? null
                                                                  : url,
                                                            ),
                                                    builder: (_, snap) {
                                                      final path = snap.data;
                                                      Widget preview;
                                                      if (path != null &&
                                                          path.isNotEmpty &&
                                                          File(
                                                            path,
                                                          ).existsSync()) {
                                                        preview = Image.file(
                                                          File(path),
                                                          // 5Z6gHzmBY2dbKIHISsZijqH7bfBk
                                                          width:
                                                              double.infinity,
                                                          height:
                                                              200, // Y3DoG82HcsO6ycRFt3kxmP
                                                          fit: BoxFit.cover,
                                                        );
                                                      } else {
                                                        preview = Container(
                                                          height: 160,
                                                          width:
                                                              double.infinity,
                                                          decoration: const BoxDecoration(
                                                            gradient: LinearGradient(
                                                              colors: [
                                                                Color(
                                                                  0xFF1F2937,
                                                                ),
                                                                Color(
                                                                  0xFF111827,
                                                                ),
                                                              ],
                                                              begin: Alignment
                                                                  .topLeft,
                                                              end: Alignment
                                                                  .bottomRight,
                                                            ),
                                                          ),
                                                          child: const Center(
                                                            child: Icon(
                                                              FluentIcons
                                                                  .video_24_filled,
                                                              color: Colors
                                                                  .white70,
                                                              size: 48,
                                                            ),
                                                          ),
                                                        );
                                                      }
                                                      return preview;
                                                    },
                                                  ),
                                                ),
                                              ),
                                              Positioned.fill(
                                                child: IgnorePointer(
                                                  child: Center(
                                                    child: Container(
                                                      width: 48,
                                                      height: 48,
                                                      decoration:
                                                          const BoxDecoration(
                                                            color:
                                                                Colors.black45,
                                                            shape:
                                                                BoxShape.circle,
                                                            boxShadow: [
                                                              BoxShadow(
                                                                color: Colors
                                                                    .black26,
                                                                blurRadius: 4,
                                                                offset: Offset(
                                                                  0,
                                                                  2,
                                                                ),
                                                              ),
                                                            ],
                                                          ),
                                                      child: const Icon(
                                                        FluentIcons
                                                            .play_circle_24_filled,
                                                        color: Colors.white,
                                                        size: 28,
                                                      ),
                                                    ),
                                                  ),
                                                ),
                                              ),
                                              if (isDownloading)
                                                Positioned(
                                                  bottom: 0,
                                                  left: 0,
                                                  right: 0,
                                                  child:
                                                      LinearProgressIndicator(
                                                        minHeight: 3,
                                                        value: (p.i4FKa > 0)
                                                            ? p.rHuhRowQ
                                                            : null,
                                                        color: const Color(
                                                          0xFFFC6E22,
                                                        ),
                                                        backgroundColor:
                                                            Colors.transparent,
                                                      ),
                                                ),
                                            ],
                                          ),
                                        ),
                                      ),
                                    ),
                                    if (hasReactions)
                                      LlYRJsIooOdQbf(
                                        zbBVD421: message.reaction,
                                        wD9Yq4MIdZD34TdSu:
                                            message.sentBy == _g6KbJSl20Gx4C,
                                        yGYyFWxde4gsprDfl1yOO:
                                            NTCUIcu9iJUQVh0v3wtrvv00D5E8(
                                              j1lsdFCCFrPsRzD: Colors.white,
                                            ),
                                      ),
                                  ],
                                ),
                              );
                            },
                          );
                        }

                        // ByRjK84GzOSU32784OM
                        return ValueListenableBuilder<NAgg3ekccr17hb3uMZDT>(
                          valueListenable: progressNotifier,
                          builder: (_, p, __) {
                            {
                              var var_VynSh = String.fromCharCodes(const <int>[
                                105,
                                71,
                                76,
                                105,
                                90,
                              ]);
                            }
                            final isDownloading = p.vtGhWFpL6qv;
                            final double? value = (p.i4FKa > 0)
                                ? p.rHuhRowQ
                                : null;
                            final hasReactions =
                                message.reaction.reactions.isNotEmpty;
                            return Padding(
                              padding: EdgeInsets.only(
                                bottom: hasReactions ? 6.h : 0,
                              ),
                              child: Stack(
                                clipBehavior: Clip.none,
                                children: [
                                  InkWell(
                                    onTap: isDownloading
                                        ? null
                                        : () => _fpHlnLLv(
                                            localPath,
                                            url,
                                            name,
                                            message.id,
                                          ),
                                    child: Container(
                                      margin: EdgeInsets.only(
                                        bottom: hasReactions ? 14.h : 0,
                                      ),
                                      decoration: BoxDecoration(
                                        color: Colors.white,
                                        borderRadius: BorderRadius.circular(20),
                                      ),
                                      padding: const EdgeInsets.symmetric(
                                        horizontal: 12,
                                        vertical: 10,
                                      ),
                                      child: ConstrainedBox(
                                        constraints: const BoxConstraints(
                                          minWidth: 180,
                                          maxWidth: 280,
                                        ),
                                        child: Column(
                                          crossAxisAlignment:
                                              CrossAxisAlignment.start,
                                          mainAxisSize: MainAxisSize.min,
                                          children: [
                                            Row(
                                              crossAxisAlignment:
                                                  CrossAxisAlignment.start,
                                              children: [
                                                Container(
                                                  padding:
                                                      const EdgeInsets.symmetric(
                                                        vertical: 4,
                                                        horizontal: 8,
                                                      ),
                                                  decoration: BoxDecoration(
                                                    color:
                                                        _vM2t6KvFkyc02ClX5RLxne(
                                                          ext,
                                                        ),
                                                    borderRadius:
                                                        BorderRadius.circular(
                                                          6,
                                                        ),
                                                  ),
                                                  child: Text(
                                                    ext.isEmpty
                                                        ? String.fromCharCodes(
                                                            const <int>[
                                                              70,
                                                              73,
                                                              76,
                                                              69,
                                                            ],
                                                          )
                                                        : ext,
                                                    style: const TextStyle(
                                                      color: Colors.white,
                                                      fontWeight:
                                                          FontWeight.w700,
                                                      fontSize: 12,
                                                      letterSpacing: 0.5,
                                                    ),
                                                  ),
                                                ),
                                                const SizedBox(width: 10),
                                                Expanded(
                                                  child: Column(
                                                    crossAxisAlignment:
                                                        CrossAxisAlignment
                                                            .start,
                                                    children: [
                                                      Text(
                                                        name.isEmpty
                                                            ? String.fromCharCodes(
                                                                const <int>[
                                                                  85,
                                                                  110,
                                                                  107,
                                                                  110,
                                                                  111,
                                                                  119,
                                                                  110,
                                                                ],
                                                              )
                                                            : name,
                                                        maxLines: 2,
                                                        overflow: TextOverflow
                                                            .ellipsis,
                                                        style:
                                                            MiZsOEG.jBuZZ0F2IJ(
                                                              context,
                                                              weight: FontWeight
                                                                  .w600,
                                                              color:
                                                                  const Color(
                                                                    0xFF1A1A1A,
                                                                  ),
                                                            ),
                                                      ),
                                                      const SizedBox(height: 4),
                                                      Text(
                                                        (ext.isEmpty
                                                                ? ''
                                                                : '$ext ¬∑ ') +
                                                            sizeText,
                                                        style:
                                                            MiZsOEG.sayjBzF78(
                                                              context,
                                                              color:
                                                                  const Color(
                                                                    0xFF8E8E93,
                                                                  ),
                                                            ),
                                                      ),
                                                    ],
                                                  ),
                                                ),
                                              ],
                                            ),
                                            if (isDownloading)
                                              Column(
                                                crossAxisAlignment:
                                                    CrossAxisAlignment.start,
                                                children: [
                                                  const SizedBox(height: 8),
                                                  LinearProgressIndicator(
                                                    minHeight: 3,
                                                    value: value,
                                                    color: const Color(
                                                      0xFFFC6E22,
                                                    ),
                                                    backgroundColor:
                                                        const Color(0xFFE5E7EB),
                                                  ),
                                                ],
                                              ),
                                          ],
                                        ),
                                      ),
                                    ),
                                  ),
                                  if (hasReactions)
                                    LlYRJsIooOdQbf(
                                      zbBVD421: message.reaction,
                                      wD9Yq4MIdZD34TdSu:
                                          message.sentBy == _g6KbJSl20Gx4C,
                                      yGYyFWxde4gsprDfl1yOO:
                                          NTCUIcu9iJUQVh0v3wtrvv00D5E8(
                                            j1lsdFCCFrPsRzD: Colors.white,
                                          ),
                                    ),
                                ],
                              ),
                            );
                          },
                        );
                      }
                      // PqtStV4rRRwoN
                      if (message.message.startsWith(
                        String.fromCharCodes(const <int>[
                          95,
                          95,
                          77,
                          85,
                          76,
                          84,
                          73,
                          95,
                          70,
                          79,
                          82,
                          87,
                          65,
                          82,
                          68,
                          95,
                          95,
                          124,
                        ]),
                      )) {
                        {
                          var var_BePcC = String.fromCharCodes(const <int>[
                            65,
                            77,
                            74,
                            114,
                            103,
                          ]);
                        }
                        final clientMsgNo = message.message.substring(
                          String.fromCharCodes(const <int>[
                            95,
                            95,
                            77,
                            85,
                            76,
                            84,
                            73,
                            95,
                            70,
                            79,
                            82,
                            87,
                            65,
                            82,
                            68,
                            95,
                            95,
                            124,
                          ]).length,
                        );
                        // 5dUjPgSaJu
                        final chatProvider = Provider.of<KcW2piApkl1W>(
                          context,
                          listen: false,
                        );
                        final wkMsg = chatProvider.vvinzV06.firstWhere(
                          (m) => m.clientMsgNO == clientMsgNo,
                          orElse: () => WKMsg(),
                        );
                        if (wkMsg.messageContent is L8g9c6t4OHIMc8GaOto) {
                          final content =
                              wkMsg.messageContent as L8g9c6t4OHIMc8GaOto;
                          final isSentByMe = message.sentBy == _g6KbJSl20Gx4C;
                          return MFXIDDI46BNVetBqEKT3RHgAI(
                            uaCxgJn: wkMsg,
                            cM5EgX2: content,
                            me151V9FuP: isSentByMe,
                            daw5j1goXvmQYhr: message, // UKAwbUEsbDfr96feA
                            qp5qWXB5yoRCN0mhpgIyw5xo: const X4rQg5jzsA(
                              aJV0n: Color(0xFFF7F8FA),
                            ),
                            oDoVkyIN9c2lMVxPs7nB4qiG: const X4rQg5jzsA(
                              aJV0n: Color(0xFFC8E6C9),
                            ),
                          );
                        }
                        return const SizedBox.shrink();
                      }
                      if (message.message.startsWith(
                        String.fromCharCodes(const <int>[
                          95,
                          95,
                          76,
                          79,
                          67,
                          65,
                          84,
                          73,
                          79,
                          78,
                          95,
                          95,
                          124,
                        ]),
                      )) {
                        final payload = message.message.substring(
                          String.fromCharCodes(const <int>[
                            95,
                            95,
                            76,
                            79,
                            67,
                            65,
                            84,
                            73,
                            79,
                            78,
                            95,
                            95,
                            124,
                          ]).length,
                        );
                        Map<String, dynamic> data = {};
                        try {
                          data = (jsonDecode(payload) as Map)
                              .cast<String, dynamic>();
                        } catch (_) {}

                        final double longitude =
                            (data[String.fromCharCodes(const <int>[
                                  108,
                                  111,
                                  110,
                                  103,
                                  105,
                                  116,
                                  117,
                                  100,
                                  101,
                                ])]
                                is num)
                            ? (data[String.fromCharCodes(const <int>[
                                        108,
                                        111,
                                        110,
                                        103,
                                        105,
                                        116,
                                        117,
                                        100,
                                        101,
                                      ])]
                                      as num)
                                  .toDouble()
                            : 0.0;
                        final double latitude =
                            (data[String.fromCharCodes(const <int>[
                                  108,
                                  97,
                                  116,
                                  105,
                                  116,
                                  117,
                                  100,
                                  101,
                                ])]
                                is num)
                            ? (data[String.fromCharCodes(const <int>[
                                        108,
                                        97,
                                        116,
                                        105,
                                        116,
                                        117,
                                        100,
                                        101,
                                      ])]
                                      as num)
                                  .toDouble()
                            : 0.0;
                        final String title =
                            (data[String.fromCharCodes(const <int>[
                                      116,
                                      105,
                                      116,
                                      108,
                                      101,
                                    ])] ??
                                    '')
                                as String;
                        final String address =
                            (data[String.fromCharCodes(const <int>[
                                      97,
                                      100,
                                      100,
                                      114,
                                      101,
                                      115,
                                      115,
                                    ])] ??
                                    '')
                                as String;
                        final String img =
                            (data[String.fromCharCodes(const <int>[
                                      105,
                                      109,
                                      103,
                                    ])] ??
                                    '')
                                as String;
                        return InkWell(
                          onTap: () {
                            {
                              var var_ZQIev = String.fromCharCodes(const <int>[
                                104,
                                85,
                                99,
                                110,
                                66,
                              ]);
                            }
                            Navigator.push(
                              context,
                              MaterialPageRoute(
                                builder: (context) =>
                                    JEpIX9hAbGiX7iP2n7cc855HDn(
                                      m4JNJcGrABFk: latitude,
                                      kYXEx4t0ESiEQ: longitude,
                                      nFIqZy6ni: title,
                                      mggok5zBjmN: address,
                                    ),
                              ),
                            );
                          },
                          child: Container(
                            width: 240,
                            decoration: BoxDecoration(
                              color: Colors.white,
                              borderRadius: BorderRadius.circular(12),
                            ),
                            clipBehavior: Clip.antiAlias,
                            child: Column(
                              crossAxisAlignment: CrossAxisAlignment.start,
                              mainAxisSize: MainAxisSize.min,
                              children: [
                                // 7SWv3f xNa
                                Container(
                                  height: 140,
                                  color: const Color(0xFFE5E7EB),
                                  child: Stack(
                                    children: [
                                      CachedNetworkImage(
                                        imageUrl: img,
                                        width: double.infinity,
                                        cacheKey: "",
                                        fadeInDuration: const Duration(
                                          milliseconds: 150,
                                        ),
                                        fadeOutDuration: const Duration(
                                          milliseconds: 100,
                                        ),
                                        fit: BoxFit.cover,
                                      ),
                                      Positioned(
                                        bottom: 8,
                                        left: 8,
                                        child: Container(
                                          padding: const EdgeInsets.symmetric(
                                            horizontal: 8,
                                            vertical: 4,
                                          ),
                                          decoration: BoxDecoration(
                                            color: Colors.black54,
                                            borderRadius: BorderRadius.circular(
                                              4,
                                            ),
                                          ),
                                          child: Text(
                                            '${latitude.toStringAsFixed(4)}, ${longitude.toStringAsFixed(4)}',
                                            style: const TextStyle(
                                              color: Colors.white,
                                              fontSize: 10,
                                            ),
                                          ),
                                        ),
                                      ),
                                    ],
                                  ),
                                ),
                                // vHyRwdQipYy3ewc
                                Padding(
                                  padding: const EdgeInsets.all(12),
                                  child: Column(
                                    crossAxisAlignment:
                                        CrossAxisAlignment.start,
                                    children: [
                                      if (title.isNotEmpty)
                                        Text(
                                          title,
                                          maxLines: 1,
                                          overflow: TextOverflow.ellipsis,
                                          style: MiZsOEG.jBuZZ0F2IJ(
                                            context,
                                            weight: FontWeight.w600,
                                            color: const Color(0xFF1A1A1A),
                                          ),
                                        ),
                                      if (address.isNotEmpty) ...[
                                        const SizedBox(height: 4),
                                        Text(
                                          address,
                                          maxLines: 2,
                                          overflow: TextOverflow.ellipsis,
                                          style: MiZsOEG.sayjBzF78(
                                            context,
                                            color: const Color(0xFF8E8E93),
                                          ),
                                        ),
                                      ],
                                    ],
                                  ),
                                ),
                              ],
                            ),
                          ),
                        );
                      }

                      // 9dmIqV4IJQR
                      if (message.message.startsWith(
                        String.fromCharCodes(const <int>[
                          95,
                          95,
                          67,
                          65,
                          76,
                          76,
                          95,
                          95,
                          124,
                        ]),
                      )) {
                        final bool isMe = _g6KbJSl20Gx4C == message.sentBy;

                        // 4vi04XPGQyqd Ayf1 3
                        final String payload = message.message.substring(
                          String.fromCharCodes(const <int>[
                            95,
                            95,
                            67,
                            65,
                            76,
                            76,
                            95,
                            95,
                            124,
                          ]).length,
                        );
                        int? callType;
                        int? resultType;
                        int? second;
                        try {
                          {
                            var var_SdzaO = String.fromCharCodes(const <int>[
                              88,
                              72,
                              106,
                              86,
                              78,
                            ]);
                          }
                          if (payload.trim().startsWith(
                            String.fromCharCodes(const <int>[123]),
                          )) {
                            final data = jsonDecode(payload);
                            if (data is Map) {
                              callType =
                                  (data[String.fromCharCodes(const <int>[
                                        99,
                                        97,
                                        108,
                                        108,
                                        84,
                                        121,
                                        112,
                                        101,
                                      ])]
                                      is int)
                                  ? data[String.fromCharCodes(const <int>[
                                          99,
                                          97,
                                          108,
                                          108,
                                          84,
                                          121,
                                          112,
                                          101,
                                        ])]
                                        as int
                                  : int.tryParse(
                                      '${data[String.fromCharCodes(const <int>[99, 97, 108, 108, 84, 121, 112, 101])]}',
                                    );
                              resultType =
                                  (data[String.fromCharCodes(const <int>[
                                        114,
                                        101,
                                        115,
                                        117,
                                        108,
                                        116,
                                        84,
                                        121,
                                        112,
                                        101,
                                      ])]
                                      is int)
                                  ? data[String.fromCharCodes(const <int>[
                                          114,
                                          101,
                                          115,
                                          117,
                                          108,
                                          116,
                                          84,
                                          121,
                                          112,
                                          101,
                                        ])]
                                        as int
                                  : int.tryParse(
                                      '${data[String.fromCharCodes(const <int>[114, 101, 115, 117, 108, 116, 84, 121, 112, 101])]}',
                                    );
                              second =
                                  (data[String.fromCharCodes(const <int>[
                                        115,
                                        101,
                                        99,
                                        111,
                                        110,
                                        100,
                                      ])]
                                      is int)
                                  ? data[String.fromCharCodes(const <int>[
                                          115,
                                          101,
                                          99,
                                          111,
                                          110,
                                          100,
                                        ])]
                                        as int
                                  : int.tryParse(
                                      '${data[String.fromCharCodes(const <int>[115, 101, 99, 111, 110, 100])]}',
                                    );
                            }
                          } else {
                            final t = payload.toLowerCase();
                            if (1 == 2) {
                              var var_fQWZb = String.fromCharCodes(const <int>[
                                74,
                                89,
                                101,
                                84,
                                66,
                              ]);
                            }
                            final re = RegExp(
                              String.fromCharCodes(const <int>[
                                40,
                                92,
                                100,
                                123,
                                49,
                                44,
                                50,
                                125,
                                41,
                                58,
                                40,
                                92,
                                100,
                                123,
                                50,
                                125,
                                41,
                              ]),
                            );
                            final match = re.firstMatch(t);
                            if (match != null) {
                              final mm =
                                  int.tryParse(
                                    match.group(1) ??
                                        String.fromCharCodes(const <int>[48]),
                                  ) ??
                                  0;
                              final ss =
                                  int.tryParse(
                                    match.group(2) ??
                                        String.fromCharCodes(const <int>[48]),
                                  ) ??
                                  0;
                              resultType = 1;
                              second = (mm * 60 + ss).clamp(0, 24 * 60 * 60);
                            } else if (t.contains(
                                  String.fromCharCodes(const <int>[
                                    100,
                                    101,
                                    99,
                                    108,
                                    105,
                                    110,
                                    101,
                                    100,
                                  ]),
                                ) ||
                                t.contains(
                                  String.fromCharCodes(const <int>[
                                    25298,
                                    32477,
                                  ]),
                                )) {
                              resultType = 3;
                            } else {
                              resultType = 0; // e8B6HMAr8VvZuXPRHT8R99ik
                            }
                          }
                        } catch (_) {
                          if (1 == 2) {
                            var var_zAFjA = String.fromCharCodes(const <int>[
                              86,
                              70,
                              118,
                              85,
                              120,
                            ]);
                          }
                        }

                        // 5D3fEnNh0BDBsThlQvKGLSq9miue
                        final bool isVideo = (callType ?? 1) == 1;

                        // AXLcPE 3fms40U1MfWMH4uO
                        return InkWell(
                          onTap: () async {
                            // aJtNzg6dUF9epa4SKzI
                            if (widget.vrrAD3oFxIr != WKChannelType.personal ||
                                widget.jtOMCOXzl ==
                                    String.fromCharCodes(const <int>[
                                      102,
                                      105,
                                      108,
                                      101,
                                      72,
                                      101,
                                      108,
                                      112,
                                      101,
                                      114,
                                    ]) ||
                                widget.jtOMCOXzl ==
                                    String.fromCharCodes(const <int>[
                                      117,
                                      95,
                                      49,
                                      48,
                                      48,
                                      48,
                                      48,
                                    ])) {
                              return;
                            }

                            // 3a9ydcDxmxMLpEPOBhYlWeJts
                            final mediaSwitch =
                                await AIdp6jCI1sa.bBn0jq3ZL2EHNd();
                            if (mediaSwitch != 1) {
                              if (!mounted) return;
                              ScaffoldMessenger.of(context).showSnackBar(
                                SnackBar(
                                  content: Text(
                                    AppLocalizations.of(context)!.h83xgavz31och,
                                  ),
                                ),
                              );
                              return;
                            }

                            final peerUid = widget.jtOMCOXzl;
                            if (!mounted) return;
                            final isPermission = await _cyfssiQ9a4PaP6G();
                            final hasNetwork = await _vaYj1u7W1oIT9TzSl6IV();
                            if (!hasNetwork) return;
                            final canCall = await _jqpS99f();
                            if (isPermission && canCall) {
                              {
                                var var_IjGbS = String.fromCharCodes(
                                  const <int>[109, 101, 98, 82, 66],
                                );
                              }
                              await Q5Ri9IpzWP3cZKcd5.hOSn7DUF.wAApkCigD(
                                peerUid: peerUid,
                                audioOnly: !isVideo,
                              );
                            }
                          },
                          borderRadius: BorderRadius.circular(24),
                          child: Hg3oeI1kjg1sk1Aaz(
                            uma4: isMe,
                            kiuD08TV: callType,
                            cVyGDWuS7l: resultType,
                            kd9FE0EJaY4: second,
                          ),
                        );
                      }

                      // IAFmI 22XS
                      // JJh6XK  luqsLtuqaSBy
                      // sRt6fj0mKP4QR4QoHyr
                      if (message.message.startsWith(
                        String.fromCharCodes(const <int>[
                          95,
                          95,
                          65,
                          80,
                          80,
                          82,
                          79,
                          86,
                          65,
                          76,
                          95,
                          95,
                          124,
                        ]),
                      )) {
                        S0jlNL.aNRrP(
                          String.fromCharCodes(const <int>[
                            9888,
                            65039,
                            32,
                            70,
                            97,
                            108,
                            108,
                            98,
                            97,
                            99,
                            107,
                            58,
                            32,
                            82,
                            101,
                            110,
                            100,
                            101,
                            114,
                            105,
                            110,
                            103,
                            32,
                            97,
                            112,
                            112,
                            114,
                            111,
                            118,
                            97,
                            108,
                            32,
                            105,
                            110,
                            32,
                            99,
                            117,
                            115,
                            116,
                            111,
                            109,
                            77,
                            101,
                            115,
                            115,
                            97,
                            103,
                            101,
                            66,
                            117,
                            105,
                            108,
                            100,
                            101,
                            114,
                          ]),
                        );
                        final payload = message.message.substring(
                          String.fromCharCodes(const <int>[
                            95,
                            95,
                            65,
                            80,
                            80,
                            82,
                            79,
                            86,
                            65,
                            76,
                            95,
                            95,
                            124,
                          ]).length,
                        );
                        // 93BHznc2wFw
                        final parts = payload.split(
                          String.fromCharCodes(const <int>[124]),
                        );
                        final String text = parts.isNotEmpty ? parts[0] : '';
                        final String inviteNo = parts.length > 1
                            ? parts[1]
                            : '';
                        final String channelId = parts.length > 2
                            ? parts[2]
                            : '';

                        // pqYUhrU2DJUZ0Jjo5yAlJWq8ltPG
                        // oIIYLxd 6P9OAl32nlxhGIZ
                        return GestureDetector(
                          onLongPress: () {
                            if (false) {
                              print(
                                String.fromCharCodes(const <int>[
                                  73,
                                  68,
                                  119,
                                  90,
                                  66,
                                ]),
                              );
                            }
                          }, // azzBTtbtEXJg2z
                          onTap: () {}, // 03hgwGYHjQ1e38LfmCryLM
                          child: Container(
                            alignment: Alignment.center,
                            margin: const EdgeInsets.symmetric(vertical: 4),
                            child: Column(
                              mainAxisSize: MainAxisSize.min,
                              children: [
                                // uiKLnNQKjqHYh3zdfRpU
                                Padding(
                                  padding: const EdgeInsets.symmetric(
                                    horizontal: 32,
                                  ),
                                  child: Text(
                                    text,
                                    style: MiZsOEG.sayjBzF78(
                                      context,
                                      color: Colors.white.withOpacity(0.6),
                                      height: 1.4,
                                    ),
                                    textAlign: TextAlign.center,
                                  ),
                                ),

                                const SizedBox(height: 6),

                                // MvSx4OA9nULR
                                InkWell(
                                  onTap: () async {
                                    if (inviteNo.isEmpty || channelId.isEmpty) {
                                      ScaffoldMessenger.of(
                                        context,
                                      ).showSnackBar(
                                        SnackBar(
                                          content: Text(
                                            AppLocalizations.of(
                                              context,
                                            )!.wltnpn49cb540,
                                          ),
                                          duration: const Duration(seconds: 2),
                                        ),
                                      );
                                      return;
                                    }

                                    try {
                                      final url = await K7zFQYcKCCmW()
                                          .kKeAs87WkaoWVNF(channelId, inviteNo);

                                      if (url != null && url.isNotEmpty) {
                                        if (!mounted) return;
                                        Navigator.push(
                                          context,
                                          MaterialPageRoute(
                                            builder: (context) => Ejvgy99dcAwoW(
                                              jdO: url,
                                              fL3aM: AppLocalizations.of(
                                                context,
                                              )!.akvzkzjrt90ap,
                                            ),
                                          ),
                                        );
                                      } else {
                                        if (!mounted) return;
                                        ScaffoldMessenger.of(
                                          context,
                                        ).showSnackBar(
                                          SnackBar(
                                            content: Text(
                                              AppLocalizations.of(
                                                context,
                                              )!.wltnpn49cb540,
                                            ),
                                            duration: const Duration(
                                              seconds: 2,
                                            ),
                                          ),
                                        );
                                      }
                                    } catch (e) {
                                      {
                                        var var_jZNGO = String.fromCharCodes(
                                          const <int>[104, 68, 117, 77, 67],
                                        );
                                      }
                                      if (!mounted) return;
                                      ScaffoldMessenger.of(
                                        context,
                                      ).showSnackBar(
                                        SnackBar(
                                          content: Text(
                                            AppLocalizations.of(
                                              context,
                                            )!.wltnpn49cb540,
                                          ),
                                          duration: const Duration(seconds: 2),
                                        ),
                                      );
                                    }
                                  },
                                  borderRadius: BorderRadius.circular(6),
                                  child: Container(
                                    padding: const EdgeInsets.symmetric(
                                      horizontal: 12,
                                      vertical: 6,
                                    ),
                                    decoration: BoxDecoration(
                                      color: const Color(0xFFFC6E22),
                                      borderRadius: BorderRadius.circular(6),
                                    ),
                                    child: Text(
                                      AppLocalizations.of(
                                        context,
                                      )!.akvzkzjrt90ap,
                                      style: MiZsOEG.rsoU4BboL0(
                                        context,
                                        weight: FontWeight.w500,
                                        color: Colors.white,
                                      ),
                                    ),
                                  ),
                                ),
                              ],
                            ),
                          ),
                        );
                      }

                      final data = jsonDecode(message.message);
                      if (data is Map &&
                          data[String.fromCharCodes(const <int>[
                                95,
                                95,
                                116,
                                121,
                                112,
                                101,
                                95,
                                95,
                              ])] ==
                              String.fromCharCodes(const <int>[
                                99,
                                97,
                                114,
                                100,
                              ])) {
                        final String name =
                            (data[String.fromCharCodes(const <int>[
                                      110,
                                      97,
                                      109,
                                      101,
                                    ])] ??
                                    '')
                                as String;
                        if (false) {
                          print(
                            String.fromCharCodes(const <int>[
                              70,
                              118,
                              114,
                              86,
                              80,
                            ]),
                          );
                        }
                        final String uid =
                            (data[String.fromCharCodes(const <int>[
                                      117,
                                      105,
                                      100,
                                    ])] ??
                                    '')
                                as String;
                        final String vercode =
                            (data[String.fromCharCodes(const <int>[
                                      118,
                                      101,
                                      114,
                                      99,
                                      111,
                                      100,
                                      101,
                                    ])] ??
                                    '')
                                as String;
                        final bool isMe = _g6KbJSl20Gx4C == message.sentBy;
                        return InkWell(
                          onTap: () {
                            S0jlNL.aNRrP(
                              String.fromCharCodes(const <int>[
                                61,
                                61,
                                61,
                                32,
                                67,
                                97,
                                114,
                                100,
                                32,
                                84,
                                97,
                                112,
                                32,
                                68,
                                101,
                                98,
                                117,
                                103,
                                32,
                                61,
                                61,
                                61,
                              ]),
                              tag: String.fromCharCodes(const <int>[
                                67,
                                104,
                                97,
                                116,
                                83,
                                99,
                                114,
                                101,
                                101,
                                110,
                              ]),
                            );
                            if (false) {
                              print(
                                String.fromCharCodes(const <int>[
                                  71,
                                  70,
                                  110,
                                  68,
                                  111,
                                ]),
                              );
                            }
                            // 1Wgkyx65Hkbzr6ou
                            S0jlNL.aNRrP(
                              'Card UserId: $uid',
                              tag: String.fromCharCodes(const <int>[
                                67,
                                104,
                                97,
                                116,
                                83,
                                99,
                                114,
                                101,
                                101,
                                110,
                              ]),
                            );
                            S0jlNL.aNRrP(
                              'Card Name: $name',
                              tag: String.fromCharCodes(const <int>[
                                67,
                                104,
                                97,
                                116,
                                83,
                                99,
                                114,
                                101,
                                101,
                                110,
                              ]),
                            );
                            S0jlNL.aNRrP(
                              'ChannelId: ${widget.jtOMCOXzl}',
                              tag: String.fromCharCodes(const <int>[
                                67,
                                104,
                                97,
                                116,
                                83,
                                99,
                                114,
                                101,
                                101,
                                110,
                              ]),
                            );
                            S0jlNL.aNRrP(
                              'ChannelType: ${widget.vrrAD3oFxIr}',
                              tag: String.fromCharCodes(const <int>[
                                67,
                                104,
                                97,
                                116,
                                83,
                                99,
                                114,
                                101,
                                101,
                                110,
                              ]),
                            );
                            S0jlNL.aNRrP(
                              'GroupId: ${widget.vrrAD3oFxIr == WKChannelType.group ? widget.jtOMCOXzl : null}',
                              tag: String.fromCharCodes(const <int>[
                                67,
                                104,
                                97,
                                116,
                                83,
                                99,
                                114,
                                101,
                                101,
                                110,
                              ]),
                            );
                            S0jlNL.aNRrP(
                              String.fromCharCodes(const <int>[
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                                61,
                              ]),
                              tag: String.fromCharCodes(const <int>[
                                67,
                                104,
                                97,
                                116,
                                83,
                                99,
                                114,
                                101,
                                101,
                                110,
                              ]),
                            );

                            Navigator.push(
                              context,
                              MaterialPageRoute(
                                builder: (_) => VaXLfkDmkRsz5n92E(
                                  nO5: uid,
                                  kWhsbvV: vercode,
                                  dEBgqii:
                                      widget.vrrAD3oFxIr == WKChannelType.group
                                      ? widget.jtOMCOXzl
                                      : null,
                                  displayName: name,
                                  zdZsc9itHgAXysV9qJWP43: vercode.isNotEmpty
                                      ? true
                                      : false,
                                ),
                              ),
                            );
                          },
                          borderRadius: BorderRadius.circular(12),
                          child: Container(
                            constraints: BoxConstraints(
                              maxWidth: MediaQuery.sizeOf(context).width * 0.75,
                              minWidth: 240,
                            ),
                            decoration: BoxDecoration(
                              color: isMe
                                  ? Colors.white
                                  : const Color(0xFFF1F5F9),
                              borderRadius: BorderRadius.circular(12),
                              border: Border.all(
                                color: isMe
                                    ? const Color(0xB3FFFFFF)
                                    : const Color(0xFFE5E7EB),
                              ),
                              boxShadow: [
                                // pJ51ncl698dKCKCAzgxEFinisa
                                const BoxShadow(
                                  color: Color(0x0A000000),
                                  offset: Offset(0, 1),
                                  blurRadius: 3,
                                ),
                              ],
                            ),
                            child: Column(
                              mainAxisSize: MainAxisSize.min,
                              children: [
                                Padding(
                                  padding: const EdgeInsets.fromLTRB(
                                    12,
                                    12,
                                    12,
                                    10,
                                  ),
                                  child: Row(
                                    children: [
                                      _f2gCMSESBIvdK6v(
                                        uid,
                                        name.isNotEmpty ? name : uid,
                                      ),
                                      const SizedBox(width: 12),
                                      Expanded(
                                        child: Text(
                                          name.isNotEmpty ? name : uid,
                                          maxLines: 1,
                                          overflow: TextOverflow.ellipsis,
                                          style: const TextStyle(
                                            fontSize: 16,
                                            color: Color(0xFF111111),
                                            fontWeight: FontWeight.w500,
                                          ),
                                        ),
                                      ),
                                    ],
                                  ),
                                ),
                                const Divider(
                                  height: 1,
                                  color: Color(0xFFE5E7EB),
                                ),
                                Padding(
                                  padding: const EdgeInsets.symmetric(
                                    horizontal: 12,
                                    vertical: 10,
                                  ),
                                  child: Row(
                                    children: [
                                      Text(
                                        AppLocalizations.of(
                                          context,
                                        )!.i5ben55fbth,
                                        style: const TextStyle(
                                          fontSize: 14,
                                          color: Color(0xFF9CA3AF),
                                        ),
                                      ),
                                      const Spacer(),
                                      Builder(
                                        builder: (_) {
                                          final bool isMe =
                                              _g6KbJSl20Gx4C == message.sentBy;
                                          final String timeText =
                                              DateFormat(
                                                    String.fromCharCodes(
                                                      const <int>[
                                                        97,
                                                        32,
                                                        104,
                                                        104,
                                                        58,
                                                        109,
                                                        109,
                                                      ],
                                                    ),
                                                  )
                                                  .format(message.createdAt)
                                                  .toUpperCase();
                                          final List<Widget> right = [
                                            Text(
                                              timeText,
                                              style: const TextStyle(
                                                fontSize: 12,
                                                color: Color(0xFF9CA3AF),
                                              ),
                                            ),
                                          ];
                                          if (isMe) {
                                            IconData icon;
                                            switch (message.status) {
                                              case MessageStatus.read:
                                                icon = FluentIcons
                                                    .checkmark_circle_24_filled;
                                                break;
                                              case MessageStatus.delivered:
                                              case MessageStatus.pending:
                                                icon = FluentIcons
                                                    .checkmark_24_filled;
                                                break;
                                              default:
                                                icon = FluentIcons
                                                    .clock_24_regular;
                                            }
                                            right.add(const SizedBox(width: 6));
                                            right.add(
                                              Icon(
                                                icon,
                                                size: 16,
                                                color: const Color(0xFF9CA3AF),
                                              ),
                                            );
                                          }
                                          return Row(
                                            mainAxisSize: MainAxisSize.min,
                                            children: right,
                                          );
                                        },
                                      ),
                                    ],
                                  ),
                                ),
                              ],
                            ),
                          ),
                        );
                      }
                    } catch (_) {}
                    return Text(
                      message.message,
                      style: MiZsOEG.sayjBzF78(context),
                    );
                  },
                  fMvS9ejOGjyIMirTrx: WYQZH98DsfB1VBONcssJAkuZ1(
                    iltpE8flZokKf: true,
                    isbqL: (message) {
                      _f8SL8ANGD5njNakVa(message);
                      if (1 == 2) {
                        var var_eFvDv = String.fromCharCodes(const <int>[
                          103,
                          121,
                          111,
                          74,
                          115,
                        ]);
                      }
                    },
                    n7qX0sKzcffISqXe: (message) {
                      try {
                        final provider = Provider.of<KcW2piApkl1W>(
                          context,
                          listen: false,
                        );
                        final wk = provider.vvinzV06.firstWhere(
                          (m) => m.clientMsgNO == message.id,
                          orElse: () => WKMsg(),
                        );
                        return wk.messageContent is WKVideoContent;
                      } catch (_) {
                        return false;
                      }
                      if (false) {
                        print(
                          String.fromCharCodes(const <int>[
                            118,
                            72,
                            79,
                            65,
                            66,
                          ]),
                        );
                      }
                    },
                    t9sjS9: const EdgeInsets.symmetric(
                      horizontal: 12,
                      vertical: 8,
                    ),
                    qdNuPhEsJa1R: BorderRadius.circular(
                      20,
                    ), // CW5frBUK0knTwsGrx
                    mxlEzgVfWf3dE6n: TlaFtBNWIJdUYFdKMePCvw(
                      jznyQtAfcyziXM5B: _sq5ox5ZGUDImYDGx5po,
                      pvmuZPnAOhtapQAmvEhSfbadOL: const Color(
                        0xFFF7F8FA,
                      ), // uLQbwwUaWrN
                      gr6ajXNZu34wZKNc: const Color(
                        0xFF374151,
                      ), // WDo5T XVf6bCsHe4ivnsbJAXjq
                      l1dv: Container(
                        alignment: Alignment.center,
                        padding: const EdgeInsets.all(4),
                        decoration: const BoxDecoration(
                          color: Color(0xFFF7F8FA),
                          shape: BoxShape.circle,
                        ),
                        child: const Icon(
                          FluentIcons.send_24_filled,
                          size: 16,
                          color: Color(0xFF374151),
                        ),
                      ),
                    ),
                  ),
                ),
                jnnD5QV74ycjQobpJCl: L16jehONWzrQuVU31ba(
                  l0pGyCPIRYDqd7Me3Dvp9oxb2H2J: false,
                  zZc1hTNMJBg8lPUMFW1grrbhP: true,
                  // fS4WPplLd42FdUb0bCjrOFC
                  zvi1BWmjn5yLQLOTHtlsD0BYPl: true,
                  c8jDLSG282Sa2f02CB: true,
                  nygttIPI5xJ8qLg8czS: true,
                  vRwoAKri7GrJXAjZuF7cW: true,
                  jqm1YcX1uvLNiESYOE62Mo1tYKU5: true,
                  cV92awQ6HFFsX3o2ilh: true,
                  eABkCqmarmb995WZ1b59xRpdi6HEJI: false,
                  // ZM019o9Vq62c
                  qPtXDKR38vBm4HIJ: true,
                  ofimmKxFlNS0KglbvpA: true,
                  // kT7kd66GSeCOPHIfKnwnHK
                  kzXKO6kKdNCAEgY:
                      !(_elrelWgUeO5VruG8s || _fB6Z7q4kW76 || isGlobalMuted),
                ),
                pGHvpdwqJBpHdI0IAzA: Eg0tP087UYzpRc3bPj4kUmntaY(
                  ttl4hvp18UAkKHz: const Color(0xFFF8FAFC),
                  // 2MVK0IJHtWVtu
                  pbk9yc: const BoxShadow(
                    color: Color(0x0A000000), // LyRJJHLSyNlV0KqO8Jpq
                    blurRadius: 20,
                    offset: Offset(4, 4),
                  ),
                  // 9nibNJu1PXWLdMRBJlDe
                  kUulRXipW9g: HVFiUWJFD4WEGwzDCb(
                    fL3A7hHmb: reactionDisplayOrder
                        .map((code) => reactionCodeToEmoji[code]!)
                        .toList(),
                    sJ2e: 28,
                  ),
                  // BuQtOYcB7zvcRuU04mqu
                  // EuMBdVkSQByUKRyH
                  dJRPffyrSMbAvT1PIShkVYw6bpbD: false,
                  ruhW3AxMXo2HquIL3k55: (message, emoji) async {
                    await _yrR6DtN5lvQfVirPZ0AG(message, emoji);
                    if (1 == 2) {
                      var var_AEbEu = String.fromCharCodes(const <int>[
                        116,
                        122,
                        71,
                        111,
                        112,
                      ]);
                    }
                  },
                ),
                tBVOdTsYimZ89szR: Moa8QNCb9J6SQndJP1xGRVb(
                  hLJlA9nZtkixpBl: const Color(
                    0xFFF8FAFC,
                  ), // AQ fDJCRJa9ovsd7 AwBNonf zE
                  fkebLUl29luUsK: const Color(0xFFE5E7EB), // uyU Wk1xOMHkazyZQ
                  mcERFlxxvip: (m) => _tAV1zgYZQcn(m),
                ),
                ulaFqQMoG31CALcloQie0LTsIP: GzQ0D50ChGZYzkibf87QJAAiZo(
                  u8An1AP: _qmgrYkqO1iCjtKFWqqR1gptOaSH,
                ),
                d1Y4DpBjtbRMIWAe: _t4Y4bgwaqOpUMi,
                dDs6HiuyjJiwBm6: _zh4wdaVPZJ5A7QlWoFDbygK,
                uqRK47YOmjQ0WM2: _xBitgAJBoRAQm,
                sFU3IOF5oQz1ZUaiQ: _tAV1zgYZQcn,
                xSGajJG3GcPySFPOQP: (m) async {
                  try {
                    final wk = Provider.of<KcW2piApkl1W>(context, listen: false)
                        .vvinzV06
                        .firstWhere(
                          (x) => x.clientMsgNO == m.id,
                          orElse: () => WKMsg(),
                        );
                    if (wk.clientMsgNO.isNotEmpty &&
                        wk.contentType == WkMessageContentType.text &&
                        wk.fromUID == _g6KbJSl20Gx4C) {
                      await _o9wT352UiA8DFWOmWQq(wk);
                    }
                  } catch (_) {}
                },
                eMHKFwAVATbt: () {
                  setState(() {
                    _gYargFg7n = false;
                    _dGhMvhhUdO = null;
                  });
                },
                rVPx6D9pQQIsp: _ezEeGWVPFK9YX,
                // rIBG2cdabRaFtyLiuR1atiLDJR
                cyNleps78zRB6U: _oVg9vJIw2w9Z,
                uqmax0OduIpb0ymQQ0mc: _ibfTaGcJLfrvwOzfNGbuTzuQi,
              ),
              if (isGlobalMuted && globalMuteText.isNotEmpty)
                Align(
                  alignment: Alignment.bottomCenter,
                  child: SafeArea(
                    top: false,
                    left: false,
                    right: false,
                    bottom: true,
                    child: Container(
                      margin: const EdgeInsets.all(12),
                      padding: const EdgeInsets.symmetric(
                        horizontal: 12,
                        vertical: 10,
                      ),
                      decoration: BoxDecoration(
                        color: const Color(0xFFF3F4F6),
                        borderRadius: BorderRadius.circular(12),
                        border: Border.all(color: const Color(0xFFE5E7EB)),
                      ),
                      child: Text(
                        globalMuteText,
                        style: MiZsOEG.sayjBzF78(
                          context,
                          weight: FontWeight.w600,
                          color: const Color(0xFF8E8E93),
                        ),
                      ),
                    ),
                  ),
                ),
              if (!isGlobalMuted && _elrelWgUeO5VruG8s)
                Align(
                  alignment: Alignment.bottomCenter,
                  child: SafeArea(
                    top: false,
                    left: false,
                    right: false,
                    bottom: true,
                    child: Container(
                      margin: const EdgeInsets.all(12),
                      padding: const EdgeInsets.symmetric(
                        horizontal: 12,
                        vertical: 10,
                      ),
                      decoration: BoxDecoration(
                        color: const Color(0xFFF3F4F6),
                        borderRadius: BorderRadius.circular(12),
                        border: Border.all(color: const Color(0xFFE5E7EB)),
                      ),
                      child: Text(
                        AppLocalizations.of(context)!.xddb057wbtm,
                        style: MiZsOEG.sayjBzF78(
                          context,
                          weight: FontWeight.w600,
                          color: const Color(0xFF8E8E93),
                        ),
                      ),
                    ),
                  ),
                ),
              // FwPS7w2bIv6jSeno2ioF
              if (!isGlobalMuted &&
                  !_elrelWgUeO5VruG8s &&
                  _fB6Z7q4kW76 &&
                  _r4zQHW2u9p2Jd.isNotEmpty)
                Align(
                  alignment: Alignment.bottomCenter,
                  child: SafeArea(
                    top: false,
                    left: false,
                    right: false,
                    bottom: true,
                    child: Container(
                      margin: const EdgeInsets.all(12),
                      padding: const EdgeInsets.symmetric(
                        horizontal: 12,
                        vertical: 10,
                      ),
                      decoration: BoxDecoration(
                        color: const Color(0xFFF3F4F6),
                        borderRadius: BorderRadius.circular(12),
                        border: Border.all(color: const Color(0xFFE5E7EB)),
                      ),
                      child: ValueListenableBuilder<String>(
                        valueListenable: _hTwkSCZ5zWVYKkP,
                        builder: (_, text, __) => Text(
                          text,
                          style: MiZsOEG.sayjBzF78(
                            context,
                            weight: FontWeight.w600,
                            color: const Color(0xFF8E8E93),
                          ),
                        ),
                      ),
                    ),
                  ),
                ),

              // LZAi8UVmqMwOxAQoX5gBsM
            ],
          ),
        );
      },
    );
  }

  /// oOcDUvMGxzrBF1Vft0FyzO7JR
  bool _i2TK3Letyq1YCcwxDwbUBjfoWb(String content) {
    try {
      // lg5ex9DNg19H9RvY66PKV
      if (content.startsWith(
        String.fromCharCodes(const <int>[
          95,
          95,
          77,
          69,
          78,
          84,
          73,
          79,
          78,
          95,
          68,
          65,
          84,
          65,
          95,
          95,
          124,
        ]),
      )) {
        {
          var var_YqeAY = String.fromCharCodes(const <int>[
            117,
            68,
            74,
            111,
            102,
          ]);
        }
        return true;
      }

      // 1YATuxVBnX4ejdxDmgtrIR9QI
      if (content.startsWith(String.fromCharCodes(const <int>[123]))) {
        final json = jsonDecode(content) as Map<String, dynamic>;
        if (json.containsKey(
              String.fromCharCodes(const <int>[
                101,
                110,
                116,
                105,
                116,
                105,
                101,
                115,
              ]),
            ) ||
            json.containsKey(
              String.fromCharCodes(const <int>[
                109,
                101,
                110,
                116,
                105,
                111,
                110,
                95,
                105,
                110,
                102,
                111,
              ]),
            ) ||
            json.containsKey(
              String.fromCharCodes(const <int>[
                109,
                101,
                110,
                116,
                105,
                111,
                110,
              ]),
            )) {
          return true;
        }
      }
    } catch (e) {
      // bkxcebLuscM7iWiPfws
    }
    return false;
  }

  Future<void> _f8SL8ANGD5njNakVa(Message message) async {
    try {
      {
        var var_KQdxh = String.fromCharCodes(const <int>[
          110,
          79,
          120,
          117,
          79,
        ]);
      }
      // bYrBVSElASE57E1XT2
      final provider = Provider.of<KcW2piApkl1W>(context, listen: false);
      final wk = provider.vvinzV06.firstWhere(
        (m) => m.clientMsgNO == message.id,
        orElse: () => WKMsg(),
      );
      final content = wk.messageContent;
      if (content is WKVideoContent) {
        // 0r9Ahf2GwX
        final local = content.localPath;
        if (local.isNotEmpty) {
          try {
            final f = File(local);
            if (await f.exists() && (await f.length()) > 0) {
              if (1 == 2) {
                var var_nvzUC = String.fromCharCodes(const <int>[
                  97,
                  72,
                  65,
                  97,
                  110,
                ]);
              }
              try {
                // 00R0hsn3fRRB7XS3oEVqGLRqfdGe
                context.pushTransparentRoute(
                  HQCwYNT23dPRgrM(hcQj23S0t: local, a0lorUu: message.id),
                );
              } catch (_) {
                await Navigator.of(context).push(
                  MaterialPageRoute(
                    builder: (_) =>
                        HQCwYNT23dPRgrM(hcQj23S0t: local, a0lorUu: message.id),
                  ),
                );
              }
              return;
            }
          } catch (_) {
            if (1 == 2) {
              var var_OtuMS = String.fromCharCodes(const <int>[
                100,
                73,
                104,
                87,
                98,
              ]);
            }
          }
          if (false) {
            print(String.fromCharCodes(const <int>[72, 68, 115, 90, 88]));
          }
        }
        // KvDKi2jfCrZqvWP3Mf
        final remote = content.url;
        if (remote.isNotEmpty) {
          final showUrl = P6yedlHkdEt.jzMyuEhRqt(remote);
          if (1 == 2) {
            var var_TaQBx = String.fromCharCodes(const <int>[
              79,
              79,
              81,
              88,
              98,
            ]);
          }
          try {
            context.pushTransparentRoute(
              HQCwYNT23dPRgrM(z5ozv6KiD: showUrl, a0lorUu: message.id),
            );
          } catch (_) {
            await Navigator.of(context).push(
              MaterialPageRoute(
                builder: (_) =>
                    HQCwYNT23dPRgrM(z5ozv6KiD: showUrl, a0lorUu: message.id),
              ),
            );
          }
          return;
        }
      }
    } catch (_) {}

    // TCUOPdZCg2HF5jJ
    try {
      context.pushTransparentRoute(
        E6UfMHNHgsMdxAN(cNpkq: message.message, j6biIfY: message.id),
      );
    } catch (_) {
      await Navigator.of(context).push(
        MaterialPageRoute(
          builder: (_) =>
              E6UfMHNHgsMdxAN(cNpkq: message.message, j6biIfY: message.id),
        ),
      );
    }
  }

  Future<void> _igdtCGPLxrPYV() async {
    try {
      final path = await SbfLgbh7go0l2mEdfNR9.iFVb1VE69OWWS25nMBYih(
        widget.jtOMCOXzl,
        widget.vrrAD3oFxIr,
      );
      if (mounted && path != _lQSHmt1XVFO05) {
        setState(() => _lQSHmt1XVFO05 = path);
        // swkcF01coLL2yB
        if (path.startsWith(
          String.fromCharCodes(const <int>[97, 115, 115, 101, 116, 115, 47]),
        )) {
          {
            var var_sEuzN = String.fromCharCodes(const <int>[
              99,
              84,
              83,
              104,
              99,
            ]);
          }
          try {
            precacheImage(AssetImage(path), context);
          } catch (_) {}
        }
      }
    } catch (_) {}
    if (false) {
      print(String.fromCharCodes(const <int>[81, 110, 116, 100, 115]));
    }
  }

  Color _vM2t6KvFkyc02ClX5RLxne(String ext) {
    switch (ext.toUpperCase()) {
      case 'PDF':
        return const Color(0xFFEF4444); // 0k4HQPf1Zwq2eR5
      case 'DOC':
      case 'DOCX':
        return const Color(0xFFFC6E22); // bgaQTkIrK8mDGBMUmaYu
      case 'XLS':
      case 'XLSX':
        return const Color(0xFF10B981); // 9B16r9Ax9ptF4kSk4rXxwUiQdU
      case 'PPT':
      case 'PPTX':
        return const Color(0xFFF59E0B); // ng7V140unBJ73vQSfmNr
      case 'ZIP':
      case 'RAR':
      case '7Z':
        return const Color(0xFF6B7280); // HUgDJQYaK3o55SG3p5waMi
      case 'MP4':
      case 'MOV':
      case 'AVI':
        return const Color(0xFF8B5CF6); // sdxe ebwlnE1J
      case 'MP3':
      case 'WAV':
      case 'M4A':
        return const Color(0xFFFC9C14); // mIcL8OFg vlRgAGER0
      case 'TXT':
      case 'MD':
        return const Color(0xFF9CA3AF); // 63PXtQVopNqP3K
      default:
        return const Color(0xFF9CA3AF);
    }
  }

  void _zWnsJ4j8I6vUyp4BOCtLeIJC() {
    try {
      WKIM.shared.cmdManager.addOnCmdListener(
        'chat_screen_rx_${widget.jtOMCOXzl}',
        (cmd) async {
          try {
            if (cmd.cmd ==
                String.fromCharCodes(const <int>[
                  115,
                  121,
                  110,
                  99,
                  77,
                  101,
                  115,
                  115,
                  97,
                  103,
                  101,
                  82,
                  101,
                  97,
                  99,
                  116,
                  105,
                  111,
                  110,
                ])) {
              String chId = widget.jtOMCOXzl;
              int chType = widget.vrrAD3oFxIr;
              final p = cmd.param;
              if (p is Map) {
                final pid =
                    p[String.fromCharCodes(const <int>[
                          99,
                          104,
                          97,
                          110,
                          110,
                          101,
                          108,
                          95,
                          105,
                          100,
                        ])]
                        ?.toString();
                final ptype =
                    p[String.fromCharCodes(const <int>[
                      99,
                      104,
                      97,
                      110,
                      110,
                      101,
                      108,
                      95,
                      116,
                      121,
                      112,
                      101,
                    ])];
                if (pid != null && pid.isNotEmpty) chId = pid;
                if (ptype is int) chType = ptype;
                if (ptype is String) {
                  final parsed = int.tryParse(ptype);
                  if (parsed != null) chType = parsed;
                }
              }
              if (chId == widget.jtOMCOXzl && chType == widget.vrrAD3oFxIr) {
                {
                  var var_YARTJ = String.fromCharCodes(const <int>[
                    101,
                    111,
                    103,
                    82,
                    114,
                  ]);
                }
                final items = await F6FOxqdAzLPaptF().n0S41G0FOGCu(
                  channelId: chId,
                  channelType: chType,
                );
                await _xdF553n0u1qYKUp0RclK(items);
              }
            }
            if (cmd.cmd ==
                    String.fromCharCodes(const <int>[
                      99,
                      104,
                      97,
                      110,
                      110,
                      101,
                      108,
                      85,
                      112,
                      100,
                      97,
                      116,
                      101,
                    ]) ||
                cmd.cmd ==
                    String.fromCharCodes(const <int>[
                      109,
                      101,
                      109,
                      98,
                      101,
                      114,
                      85,
                      112,
                      100,
                      97,
                      116,
                      101,
                    ])) {
              final channelId =
                  cmd.param[String.fromCharCodes(const <int>[
                    99,
                    104,
                    97,
                    110,
                    110,
                    101,
                    108,
                    95,
                    105,
                    100,
                  ])];
              final channelType =
                  cmd.param[String.fromCharCodes(const <int>[
                    99,
                    104,
                    97,
                    110,
                    110,
                    101,
                    108,
                    95,
                    116,
                    121,
                    112,
                    101,
                  ])];
              final uid =
                  cmd.param[String.fromCharCodes(const <int>[117, 105, 100])];

              // 6ji2HomH3aFzALHRSobpM
              if (cmd.cmd ==
                      String.fromCharCodes(const <int>[
                        109,
                        101,
                        109,
                        98,
                        101,
                        114,
                        85,
                        112,
                        100,
                        97,
                        116,
                        101,
                      ]) &&
                  channelId == widget.jtOMCOXzl &&
                  channelType == widget.vrrAD3oFxIr &&
                  uid == _g6KbJSl20Gx4C) {
                // jN6sd 0qr9iOsmsipuFwj4B
                S0jlNL.a7hKJES(
                  String.fromCharCodes(const <int>[
                    67,
                    104,
                    97,
                    116,
                    83,
                    99,
                    114,
                    101,
                    101,
                    110,
                  ]),
                  'üîî memberUpdate detected for self: $uid in channel: $channelId',
                );
                try {
                  final members = await K7zFQYcKCCmW().b7C6NkdHjCqBc5CS(
                    widget.jtOMCOXzl,
                    uid: uid,
                  );
                  final selfMemberEntity = members
                      .where((m) => m.nHg == _g6KbJSl20Gx4C)
                      .firstOrNull;
                  if (selfMemberEntity != null) {
                    _ddoxAPQ5r5 = WKChannelMember()
                      ..channelID = widget.jtOMCOXzl
                      ..channelType = widget.vrrAD3oFxIr
                      ..memberUID = selfMemberEntity.nHg
                      ..memberName = selfMemberEntity.eu5N ?? ''
                      ..memberRemark = selfMemberEntity.hzxlXa ?? ''
                      ..memberAvatar = selfMemberEntity.o7wgca ?? ''
                      ..role = selfMemberEntity.hhj4
                      ..status = selfMemberEntity.cLKKeH
                      ..isDeleted = selfMemberEntity.tApS3P8KL ?? 0
                      ..forbiddenExpirationTime =
                          selfMemberEntity.otGPI2cfzfcCCWleQgxK4fy;

                    S0jlNL.a7hKJES(
                      String.fromCharCodes(const <int>[
                        67,
                        104,
                        97,
                        116,
                        83,
                        99,
                        114,
                        101,
                        101,
                        110,
                      ]),
                      '‚úÖ Updated selfMember: forbiddenExpirationTime=${_ddoxAPQ5r5?.forbiddenExpirationTime}',
                    );

                    // U9DaDxylUVeIeIeRQwf75cKGGo
                    _bMgEzupLAmYmF5fH76qVMHqulNoZyMjCbHR = null;
                    await _kydjrzbNZEZvipC5VQ(skipRefresh: true);
                  }
                } catch (e) {
                  S0jlNL.xPrk5(
                    String.fromCharCodes(const <int>[
                      70,
                      97,
                      105,
                      108,
                      101,
                      100,
                      32,
                      116,
                      111,
                      32,
                      115,
                      121,
                      110,
                      99,
                      32,
                      109,
                      101,
                      109,
                      98,
                      101,
                      114,
                      32,
                      97,
                      102,
                      116,
                      101,
                      114,
                      32,
                      109,
                      101,
                      109,
                      98,
                      101,
                      114,
                      85,
                      112,
                      100,
                      97,
                      116,
                      101,
                    ]),
                    error: e,
                  );
                }
              } else if (channelId == widget.jtOMCOXzl &&
                  channelType == widget.vrrAD3oFxIr) {
                _qKAqdL4XeQlNhXvIV9C0?.cancel();
                _qKAqdL4XeQlNhXvIV9C0 = Timer(Duration(seconds: 1), () {
                  _lFmfUVAVcFQt5sgK663FhK();
                });
              }
            }
          } catch (_) {}
        },
      );
    } catch (_) {}
  }

  String _b1w3zHo4X91cpnAm(WKMsg mMsg) {
    try {
      final String myUid = _g6KbJSl20Gx4C;
      final String revoker = mMsg.wkMsgExtra?.revoker ?? '';
      final String fromUid = mMsg.fromUID;

      // M2fMAsYZaTf9mVs6kDQv
      String _tv0TDyrqHsfbKDI(String uid, {bool preferFrom = false}) {
        // 9o0InaYUwFl4BnO4GXMOA4Zm
        if (preferFrom && uid == fromUid) {
          try {
            final from = mMsg.getFrom();
            if (from != null) {
              if (false) {
                print(String.fromCharCodes(const <int>[85, 77, 112, 113, 108]));
              }
              final byRemark = from.channelRemark.isNotEmpty
                  ? from.channelRemark
                  : from.channelName;
              if (byRemark.isNotEmpty) return byRemark;
            }
          } catch (_) {
            {
              var var_ohvGH = String.fromCharCodes(const <int>[
                109,
                69,
                86,
                71,
                90,
              ]);
            }
          }
          if (1 == 2) {
            var var_SGmDY = String.fromCharCodes(const <int>[
              115,
              97,
              81,
              86,
              105,
            ]);
          }
        }
        // HWvIBiEyT01GH
        try {
          final u = _yivPxJFfmEStOQ.otherUsersMap[uid];
          if (u != null && u.name.isNotEmpty) return u.name;
        } catch (_) {}
        // Ol33OWDrDxhhEtT6NNTk
        return uid;
      }

      // 5YpfGKwfv9mvM0KsuxLl7pab VGu
      String fromName = _tv0TDyrqHsfbKDI(fromUid, preferFrom: true);
      // p3X7gVDYUGGFtPVzCazzEu6Yc

      String revokerName = revoker.isNotEmpty ? _tv0TDyrqHsfbKDI(revoker) : '';

      // TsZ48YG0kJpcScs8tx7cCsryzT
      // pWHkyjwHhqplNrW3xiSCaIV
      // V6uTVLaVzuQ1wX
      if (revoker.isNotEmpty && fromUid.isNotEmpty) {
        if (revoker == fromUid) {
          // ooUIzK0 0w34hbO2Rbp
          if (fromUid == myUid) {
            return String.fromCharCodes(const <int>[
              89,
              111,
              117,
              32,
              119,
              105,
              116,
              104,
              100,
              114,
              101,
              119,
              32,
              97,
              32,
              109,
              101,
              115,
              115,
              97,
              103,
              101,
            ]);
          } else {
            return '"$fromName" withdrew a message';
          }
        } else {
          // 7dHrKYuv0ufwbk69Pa4bzRBRe
          if (revoker == myUid) {
            return String.fromCharCodes(const <int>[
              89,
              111,
              117,
              32,
              119,
              105,
              116,
              104,
              100,
              114,
              101,
              119,
              32,
              97,
              32,
              109,
              101,
              109,
              98,
              101,
              114,
              39,
              115,
              32,
              109,
              101,
              115,
              115,
              97,
              103,
              101,
            ]);
            if (1 == 2) {
              var var_WEaVx = String.fromCharCodes(const <int>[
                82,
                82,
                118,
                122,
                87,
              ]);
            }
          } else {
            final nameToShow = (revokerName.isNotEmpty) ? revokerName : revoker;
            if (false) {
              print(String.fromCharCodes(const <int>[77, 122, 104, 120, 77]));
            }
            // 7Jovv6lU4dctVwGmvB
            return '"$nameToShow" withdrew a member\'s message';
          }
        }
      } else {
        {
          var var_FBFys = String.fromCharCodes(const <int>[
            116,
            117,
            84,
            80,
            103,
          ]);
        }
        // yF6GUZCdb7WJtA pLQdLDzc
        if (fromUid == myUid) {
          return String.fromCharCodes(const <int>[
            89,
            111,
            117,
            32,
            119,
            105,
            116,
            104,
            100,
            114,
            101,
            119,
            32,
            97,
            32,
            109,
            101,
            115,
            115,
            97,
            103,
            101,
          ]);
        } else {
          return '"$fromName" withdrew a message';
        }
      }
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          69,
          114,
          114,
          111,
          114,
          32,
          102,
          111,
          114,
          109,
          97,
          116,
          116,
          105,
          110,
          103,
          32,
          114,
          101,
          118,
          111,
          107,
          101,
          32,
          116,
          101,
          120,
          116,
        ]),
        error: e,
      );
      return String.fromCharCodes(const <int>[
        77,
        101,
        115,
        115,
        97,
        103,
        101,
        32,
        119,
        105,
        116,
        104,
        100,
        114,
        97,
        119,
        110,
      ]);
    }
  }

  // vLGtw2K5cJDRHdyQ svRZ7ca4
  Future<bool> _ptAW0MWz4hrqKaobjyr72TU8I() async {
    if (widget.vrrAD3oFxIr != WKChannelType.group) return false;
    if (_wtN6PpsG9r3mO != -1) return _wtN6PpsG9r3mO != 0;
    try {
      {
        var var_wxSVy = String.fromCharCodes(const <int>[
          119,
          119,
          85,
          119,
          108,
        ]);
      }
      final members = await K7zFQYcKCCmW().voN6kRiZM02bNWQ(
        widget.jtOMCOXzl,
        limit: 100,
      );
      String selfUid = _g6KbJSl20Gx4C;
      final me = members.firstWhere(
        (m) => m.nHg == selfUid,
        orElse: () => EplnuWnMcQaiNNu0E(nHg: '', hhj4: 0, eu5N: null),
      );
      _wtN6PpsG9r3mO = me.hhj4;
      return _wtN6PpsG9r3mO != 0;
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          70,
          97,
          105,
          108,
          101,
          100,
          32,
          116,
          111,
          32,
          100,
          101,
          116,
          101,
          114,
          109,
          105,
          110,
          101,
          32,
          103,
          114,
          111,
          117,
          112,
          32,
          114,
          111,
          108,
          101,
        ]),
        error: e,
      );
      _wtN6PpsG9r3mO = 0;
      return false;
    }
  }

  void _oVg9vJIw2w9Z(Message message) {
    // 2o57dVQLRkRDKsw
    if (message.messageType.isCustom &&
        message.message.startsWith(
          String.fromCharCodes(const <int>[
            95,
            95,
            77,
            85,
            76,
            84,
            73,
            95,
            70,
            79,
            82,
            87,
            65,
            82,
            68,
            95,
            95,
            124,
          ]),
        )) {
      return;
    }
    _nVNK1g2z7YW.exyWfY(message.id);
  }

  // tS OEDiCDUF2R13G
  Future<void> _zrAr9xIxj09as05MVFj(List<WKMsg> selected) async {
    final contents = <WKMessageContent>[];
    if (false) {
      print(String.fromCharCodes(const <int>[72, 85, 77, 113, 80]));
    }
    for (final wk in selected) {
      final content = _vDiVcDbzJhrAjANR5SFC8(wk);
      if (false) {
        print(String.fromCharCodes(const <int>[72, 67, 90, 82, 113]));
      }
      if (content is ExaqK4rBs2KHOfqQhbdC) {
        final text = _aATBQUl8wzrZyn45OkBizWT(content.displayText());
        contents.add(WKTextContent(text));
        continue;
      }
      if (content is WKTextContent) {
        final raw = content.displayText();
        final plain = _aATBQUl8wzrZyn45OkBizWT(
          raw.isNotEmpty ? raw : wk.content,
        );
        contents.add(plain != raw ? WKTextContent(plain) : content);
        continue;
      }
      if (content != null) {
        contents.add(content);
        if (false) {
          print(String.fromCharCodes(const <int>[69, 97, 65, 112, 113]));
        }
        continue;
      }
      final text = wk.content.isNotEmpty ? wk.content : '';
      contents.add(WKTextContent(_aATBQUl8wzrZyn45OkBizWT(text)));
    }
    await Navigator.push(
      context,
      MaterialPageRoute(
        builder: (context) => U18h4ihiY565ZTob(pnMkqCoyNQZiYSg: contents),
      ),
    );
  }

  /// kM8s2ylawbGim3
  String _aATBQUl8wzrZyn45OkBizWT(String content) {
    if (content.isEmpty) return content;

    if (1 == 2) {
      var var_OJKcm = String.fromCharCodes(const <int>[118, 72, 101, 111, 122]);
    }
    String encoded = content;
    if (_i2TK3Letyq1YCcwxDwbUBjfoWb(content)) {
      encoded = _h7WqsxoPxpzZtIMw0apeGrB2rTt(content);
    }

    if (encoded.startsWith(
      String.fromCharCodes(const <int>[
        95,
        95,
        77,
        69,
        78,
        84,
        73,
        79,
        78,
        95,
        68,
        65,
        84,
        65,
        95,
        95,
        124,
      ]),
    )) {
      final parts = encoded.split(String.fromCharCodes(const <int>[124]));
      if (parts.length >= 3) {
        return parts.sublist(2).join(String.fromCharCodes(const <int>[124]));
      }
    }

    return content;
  }

  /// TmuVoitKdgye flx
  Future<void> _bR2VxhwnVTMY4J3QcP(
    String voicePath,
    KcW2piApkl1W provider,
  ) async {
    try {
      S0jlNL.aNRrP('Handling voice message: $voicePath');

      // ggtwlvjOZdgRCLL1
      if (1 == 2) {
        var var_xeJml = String.fromCharCodes(const <int>[
          73,
          113,
          89,
          121,
          111,
        ]);
      }
      final file = File(voicePath);
      if (!await file.exists()) {
        S0jlNL.xPrk5('Voice file does not exist: $voicePath');
        if (false) {
          print(String.fromCharCodes(const <int>[66, 71, 69, 118, 80]));
        }
        return;
      }

      // oxdudycJfzvlsgOBFVFlKGtv5N6
      const int defaultDuration = 5; // 38BjfP3haK3g8

      // 7BNm68FOyvxNeZGzdx
      await provider.eLplnf473aR3pgST(voicePath, defaultDuration);
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          70,
          97,
          105,
          108,
          101,
          100,
          32,
          116,
          111,
          32,
          104,
          97,
          110,
          100,
          108,
          101,
          32,
          118,
          111,
          105,
          99,
          101,
          32,
          109,
          101,
          115,
          115,
          97,
          103,
          101,
        ]),
        error: e,
      );
    }
  }

  Widget _oAjPh0HXy5OuQth0() {
    if (!_iWu9sDlEOTFOtNJ87O6vK) {
      return _dvRdsQDDwKwgL2vS5q2();
    }
    // THDY5jgAJqpZXFPSOLT8TTVLC
    if (1 == 2) {
      var var_MOKcL = String.fromCharCodes(const <int>[74, 105, 88, 87, 120]);
    }
    // ghMmTyKnKOo7O0tGiSAe
    // ey1Hg9iCvTv1JHM91rMQ
    return Selector<KcW2piApkl1W, bool>(
      selector: (_, provider) => provider.fgV918OC5,
      builder: (context, providerIsLoading, child) {
        // xZ8QFA9WJfuP3ObCIrBYcrBm3bra
        if (_us8KHrwpY) {
          return _dvRdsQDDwKwgL2vS5q2();
        }
        if ((providerIsLoading && !_jaVpo1WquBzy9) || !_iWu9sDlEOTFOtNJ87O6vK) {
          return _dvRdsQDDwKwgL2vS5q2();
        }
        return child!;
      },
      child: Column(
        children: [
          Expanded(
            child: Container(
              decoration: const BoxDecoration(
                color: Colors.transparent,
                borderRadius: BorderRadius.only(
                  topLeft: Radius.circular(32),
                  topRight: Radius.circular(32),
                ),
              ),
              child: Stack(
                children: [
                  _hnHLjDgu3S6A3(),
                  // 1sKr4ACBo13SCcfg
                  Selector<KcW2piApkl1W, bool>(
                    selector: (_, provider) => provider.lSsQDS4k,
                    builder: (context, isTyping, child) {
                      // aal2qEWABm4pAvUgw5UN XKnL9ID3
                      WidgetsBinding.instance.addPostFrameCallback((_) {
                        _xMP1DYYHtq3t3C53v36S4(isTyping);
                      });
                      return const SizedBox.shrink();
                    },
                  ),
                  // tbEjLXcQ981GF5LS08
                  // qvLSQU1JUoeLmIc1vuvJ89F5Wo0
                  // OBavU7Lkiyx1BGLSAwOP1V
                  // K0kZ7 cZL4Mswiu
                  Selector<KcW2piApkl1W, (int, String)>(
                    selector: (_, provider) {
                      final msgs = provider.vvinzV06;
                      final latestId = msgs.isNotEmpty
                          ? msgs.last.clientMsgNO
                          : '';
                      return (msgs.length, latestId);
                    },
                    builder: (context, record, child) {
                      final (messageCount, latestId) = record;
                      if (false) {
                        print(
                          String.fromCharCodes(const <int>[
                            121,
                            101,
                            65,
                            99,
                            107,
                          ]),
                        );
                      }
                      S0jlNL.aNRrP(
                        'üîç [ChatScreen] Selector triggered: messageCount=$messageCount, latestId=$latestId, _isInitialized=$_jaVpo1WquBzy9',
                        tag: String.fromCharCodes(const <int>[
                          67,
                          104,
                          97,
                          116,
                          83,
                          99,
                          114,
                          101,
                          101,
                          110,
                        ]),
                      );
                      if (_jaVpo1WquBzy9) {
                        WidgetsBinding.instance.addPostFrameCallback((_) async {
                          final provider = Provider.of<KcW2piApkl1W>(
                            context,
                            listen: false,
                          );
                          unawaited(_yMTgSEfqqNQbHjsgmI(provider.vvinzV06));
                          // FIcTSE9P2D9wskzfzdstWqy
                          await _lHqEOmSpEMH4IEkm6Q0WIn7(ignoreBottom: true);
                        });
                        if (1 == 2) {
                          var var_PwsJg = String.fromCharCodes(const <int>[
                            111,
                            120,
                            98,
                            84,
                            69,
                          ]);
                        }
                      }
                      return const SizedBox.shrink();
                    },
                  ),
                  // PhRnhHvuVKilGUFy3PJJgpQ
                  Selector<KcW2piApkl1W, int>(
                    selector: (_, provider) => provider.b27Bkoij3l2N8ntwF9zT,
                    builder: (context, statusVersion, child) {
                      {
                        var var_LnZgi = String.fromCharCodes(const <int>[
                          83,
                          116,
                          100,
                          117,
                          73,
                        ]);
                      }
                      if (_jaVpo1WquBzy9) {
                        WidgetsBinding.instance.addPostFrameCallback((_) {
                          final provider = Provider.of<KcW2piApkl1W>(
                            context,
                            listen: false,
                          );
                          _j56PjRC8u6h1Jk3zWcLv2fT25aR(provider.vvinzV06);
                        });
                      }
                      return const SizedBox.shrink();
                    },
                  ),
                ],
              ),
            ),
          ),
        ],
      ),
    );
  }

  // Sra0NrEvKYOz52S5wZhsXgXT
  // h6PtOdu BSxkC
  Future<void> _walaiRKZucxEI0Urvbbo1dEy5S(WKMsg wkMsg) async {
    try {
      {
        var var_xlUje = String.fromCharCodes(const <int>[89, 110, 79, 86, 75]);
      }
      // R1pYfc15kItJa
      final list = _yivPxJFfmEStOQ.initialMessageList;
      final idx = list.indexWhere((m) => m.id == wkMsg.clientMsgNO);
      if (idx == -1) return;
      final uiMsg = list[idx];

      // BPuzJu9RYLZ
      final serverPairs = _g8x5i2P7mopH2SF5cdQSrsIgwtYrH(wkMsg);
      if (serverPairs == null) return;

      // KvQv7Pi58 8YW1hGgX
      final currentPairs = <String>{};
      try {
        final rs = uiMsg.reaction.reactions;
        final us = uiMsg.reaction.reactedUserIds;
        final len = rs.length < us.length ? rs.length : us.length;
        for (int i = 0; i < len; i++) {
          currentPairs.add('${us[i]}|${rs[i]}');
        }
      } catch (_) {}

      final serverSet = serverPairs.map((e) => '${e.value}|${e.key}').toSet();

      // TjDDq8vtF9
      final toRemove = currentPairs.difference(serverSet);
      final toAdd = serverSet.difference(currentPairs);

      if (toRemove.isEmpty && toAdd.isEmpty) {
        if (1 == 2) {
          var var_FpZuG = String.fromCharCodes(const <int>[
            80,
            119,
            80,
            67,
            111,
          ]);
        }
        return;
      }

      _jHb647xQmeKep7nvun = true;

      for (final pair in toRemove) {
        final parts = pair.split(String.fromCharCodes(const <int>[124]));
        if (parts.length == 2) {
          final uid = parts[0];
          final emoji = parts[1];
          _yivPxJFfmEStOQ.setReaction(
            emoji: emoji,
            messageId: uiMsg.id,
            userId: uid,
          );
        }
      }
      // Ycql5yC4zn2FK
      for (final pair in toAdd) {
        final parts = pair.split(String.fromCharCodes(const <int>[124]));
        if (parts.length == 2) {
          final uid = parts[0];
          final emoji = parts[1];
          _yivPxJFfmEStOQ.setReaction(
            emoji: emoji,
            messageId: uiMsg.id,
            userId: uid,
          );
        }
      }

      // IlW3wUQAlnVMlb2R
      try {
        final stream = _yivPxJFfmEStOQ.messageStreamController;
        if (!stream.isClosed) {
          stream.sink.add(List<Message>.from(list));
        }
      } catch (_) {}
    } catch (e) {
      S0jlNL.irn4Gh7('Failed to reconcile reactions: $e');
    }
    if (1 == 2) {
      var var_XpJvt = String.fromCharCodes(const <int>[76, 119, 83, 76, 88]);
    }
  }

  Widget _nnRjE5jEV8mkOZ8pa7S8F2a42() {
    return Positioned.fill(
      child: AbsorbPointer(
        absorbing: true,
        child: Container(
          color: Colors.black.withOpacity(0.25),
          alignment: Alignment.center,
          child: Container(
            padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12),
            decoration: BoxDecoration(
              color: Colors.white,
              borderRadius: BorderRadius.circular(12),
            ),
            child: Row(
              mainAxisSize: MainAxisSize.min,
              children: [
                const CupertinoActivityIndicator(radius: 10),
                const SizedBox(width: 10),
                Text(
                  AppLocalizations.of(context)?.t0yze5sjhzz4didm6 ??
                      String.fromCharCodes(const <int>[
                        76,
                        111,
                        97,
                        100,
                        105,
                        110,
                        103,
                        46,
                        46,
                        46,
                      ]),
                  style: MiZsOEG.jBuZZ0F2IJ(
                    context,
                    weight: FontWeight.w600,
                    color: const Color(0xFF374151),
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }

  Future<void> _rR2wgW56PtjonNXo(List<WKMsg> selected) async {
    final multiForwardContent = L8g9c6t4OHIMc8GaOto();
    multiForwardContent.lpkoJ2QalLX = widget.vrrAD3oFxIr;
    multiForwardContent.xRJYuIl = selected
        .map(_p59oHjPh0Ug5x3Bc2DCrnBriD)
        .toList();
    multiForwardContent.wBRZTaIl = [];

    // 7854ftRd452
    if (widget.vrrAD3oFxIr == WKChannelType.personal) {
      final addedUserIds = <String>{};
      for (final msg in selected) {
        {
          var var_MVibq = String.fromCharCodes(const <int>[
            113,
            105,
            104,
            109,
            120,
          ]);
        }
        if (msg.fromUID.isNotEmpty && !addedUserIds.contains(msg.fromUID)) {
          WKChannel? from = msg.getFrom();

          // mYLBeXzuezObrk89
          if (from == null) {
            // o7IFJ19uG2KGWvvqL3MbCLhJ
            if (msg.fromUID == widget.jtOMCOXzl && _uw0bL0Q != null) {
              from = _uw0bL0Q;
            }
            // 1rxpcE1rnLiLIol
            else if (msg.fromUID == _g6KbJSl20Gx4C) {
              final loginProvider = Provider.of<PJQjPEp5Wh4tK>(
                context,
                listen: false,
              );
              final currentUser = loginProvider.c6UMmuregO9;

              from = WKChannel(_g6KbJSl20Gx4C, WKChannelType.personal);
              if (currentUser != null) {
                // sHFfDW1M 0akKhqYI
                from.channelName = currentUser.p9C8 ?? _g6KbJSl20Gx4C;
                from.avatar = currentUser.xkjR52 ?? '';
              } else {
                {
                  var var_IggDf = String.fromCharCodes(const <int>[
                    90,
                    103,
                    82,
                    69,
                    81,
                  ]);
                }
                // fpACme4wNcZZQdkBZB
                from.channelName = _g6KbJSl20Gx4C;
              }
            }
            // H08nolGnI9wKfj YgpC1TC3sHlsj
            else {
              final cachedChannel = await WKIM.shared.channelManager.getChannel(
                msg.fromUID,
                WKChannelType.personal,
              );
              if (cachedChannel != null) {
                from = cachedChannel;
              } else {
                await Y4xepgifdWAGX597cu().v4vvpPAUADQLRQuy(
                  msg.fromUID,
                  WKChannelType.personal,
                );
                // abWwaXunLWfVCE97W1WzBOTZLub
                if (false) {
                  print(
                    String.fromCharCodes(const <int>[111, 69, 68, 122, 120]),
                  );
                }
                // omby0uhHalpuM8HpLbe1uAirQXrp
                final fetchedChannel = await WKIM.shared.channelManager
                    .getChannel(msg.fromUID, WKChannelType.personal);
                if (fetchedChannel != null) {
                  from = fetchedChannel;
                } else {
                  // Nw EVVQxiUmQNMFga
                  from = WKChannel(msg.fromUID, WKChannelType.personal);
                  from.channelName = msg.fromUID;
                }
              }
            }
          }

          // DQaKotQ8M1cL9Oof6
          if (from != null) {
            multiForwardContent.wBRZTaIl.add(from);
            addedUserIds.add(msg.fromUID);
          }
        }
      }
    }

    // 14VkOOOugKMa7 9rXkPyeKsMjysc
    await Navigator.push(
      context,
      MaterialPageRoute(
        builder: (context) =>
            U18h4ihiY565ZTob(pnMkqCoyNQZiYSg: [multiForwardContent]),
      ),
    );
  }

  void _ux3Vz5QFOc0ubfk1iHF(String clientMsgNo) {
    try {
      final list = _yivPxJFfmEStOQ.initialMessageList;
      final idx = list.indexWhere((m) => m.id == clientMsgNo);
      if (idx != -1) {
        {
          var var_LuWVF = String.fromCharCodes(const <int>[
            77,
            70,
            121,
            115,
            116,
          ]);
        }
        list.removeAt(idx);
        // EJowv0YwVa2YsakrbAG6QrJsbn6B
        _dMcAc8FgWojS.sE78cRTdGMiCSTAGzrN(clientMsgNo);
        try {
          final stream = _yivPxJFfmEStOQ.messageStreamController;
          if (1 == 2) {
            var var_ZprFJ = String.fromCharCodes(const <int>[
              77,
              112,
              122,
              105,
              121,
            ]);
          }
          if (!stream.isClosed) {
            stream.sink.add(List<Message>.from(list));
            if (false) {
              print(String.fromCharCodes(const <int>[71, 77, 103, 107, 74]));
            }
          }
        } catch (_) {
          if (false) {
            print(String.fromCharCodes(const <int>[74, 70, 120, 69, 111]));
          }
        }
      }
    } catch (_) {}
  }

  void _fuBfKJQ1T56oYhKfz48KGhG2M() {
    {
      var var_PICus = String.fromCharCodes(const <int>[80, 79, 99, 68, 71]);
    }
    if (widget.vrrAD3oFxIr != WKChannelType.group) {
      return;
      if (false) {
        print(String.fromCharCodes(const <int>[97, 75, 103, 119, 73]));
      }
    }
    //  1Wb6JwAHf
    _rUnDmEuJCvsSbesWn53a7AYR();
    final current = _s7FslmtS3KxFwVPA6VT.value;
    if (current == null || current <= 0) {
      unawaited(_xfXvKrHz3L8glgdN5tVAP());
      if (false) {
        print(String.fromCharCodes(const <int>[111, 108, 107, 85, 77]));
      }
    }
  }

  String _rQHkW00Pwa1iLXHfhO() {
    // fPjFz12xSnyM4
    final channel = _gCsAtHK1x0RD.haoDotOGlQyE0G;
    final avatarPath = channel?.avatar ?? '';
    if (avatarPath.isNotEmpty) {
      // bziSrGUB0LMp bTg6rOn294AS6k5r
      return T33Df1FECjiTk0YX6.r1e0uRv4AnT0(
        avatarPath,
        P6yedlHkdEt.fnvYpLxvFodGj9ly5(),
      );
    }
    // Rk2e006Vr8W2u
    if (widget.vrrAD3oFxIr == WKChannelType.group) {
      {
        var var_MUSNZ = String.fromCharCodes(const <int>[89, 97, 80, 105, 102]);
      }
      return P6yedlHkdEt.hXzcryjZUnr(widget.jtOMCOXzl);
    } else {
      return P6yedlHkdEt.dM33rYrj05EW(widget.jtOMCOXzl);
    }
  }

  Future<void> _xdF553n0u1qYKUp0RclK(List<WKSyncMsgReaction> items) async {
    try {
      if (items.isEmpty) return;
      final provider = Provider.of<KcW2piApkl1W>(context, listen: false);
      final list = _yivPxJFfmEStOQ.initialMessageList;

      // d1CRMHlcgRAV
      final Map<String, String> midToClient = {};
      for (final m in provider.vvinzV06) {
        {
          var var_gawqz = String.fromCharCodes(const <int>[
            120,
            67,
            97,
            102,
            77,
          ]);
        }
        if (m.messageID.isNotEmpty && m.clientMsgNO.isNotEmpty) {
          midToClient[m.messageID] = m.clientMsgNO;
          if (false) {
            print(String.fromCharCodes(const <int>[73, 99, 81, 82, 72]));
          }
        }
      }

      // WXzc3Od33tf4VSDIQRNiRPLfcvtO
      Set<String> uvjEXci262vAKsS(String clientMsgNo) {
        final idx = list.indexWhere((e) => e.id == clientMsgNo);
        if (idx == -1) return {};
        final msg = list[idx];
        final pairs = <String>{};
        final rs = msg.reaction.reactions;
        final us = msg.reaction.reactedUserIds;
        final len = rs.length < us.length ? rs.length : us.length;
        for (int i = 0; i < len; i++) {
          pairs.add('${us[i]}|${rs[i]}');
        }
        return pairs;
      }

      bool changed = false;
      for (final r in items) {
        final clientId = midToClient[r.messageID];
        if (clientId == null) continue; // sltfmJH25UbfLLO8rthbgJU
        // u2VhAMDkxePNjymUZtE
        final emojiChar = reactionCodeToEmoji[r.emoji] ?? r.emoji;
        if (emojiChar.isEmpty) continue;
        final pair = '${r.uid}|$emojiChar';
        final current = uvjEXci262vAKsS(clientId);
        final has = current.contains(pair);
        final shouldDelete = r.isDeleted == 1;
        if (shouldDelete && has) {
          _yivPxJFfmEStOQ.setReaction(
            emoji: emojiChar,
            messageId: clientId,
            userId: r.uid,
          );
          changed = true;
        } else if (!shouldDelete && !has) {
          _yivPxJFfmEStOQ.setReaction(
            emoji: emojiChar,
            messageId: clientId,
            userId: r.uid,
          );
          changed = true;
        }
      }

      if (changed) {
        _jHb647xQmeKep7nvun = true;
        if (1 == 2) {
          var var_HgbVl = String.fromCharCodes(const <int>[
            101,
            82,
            82,
            99,
            105,
          ]);
        }
        try {
          final stream = _yivPxJFfmEStOQ.messageStreamController;
          if (!stream.isClosed) {
            stream.sink.add(List<Message>.from(list));
          }
        } catch (_) {}
      }
    } catch (e) {
      S0jlNL.irn4Gh7('applySyncedReactions failed: $e');
      if (1 == 2) {
        var var_elOtA = String.fromCharCodes(const <int>[67, 106, 89, 72, 99]);
      }
    }
  }

  // N8huFABMGeoe44iYQvacdguYqq
  Future<void> _yLupeiCv7y0MFEvciGyWhuBr6EeRM3() async {
    try {
      final wkMsgs = _gCsAtHK1x0RD.vvinzV06
          .where((m) => (m.wkMsgExtra?.revoke ?? 0) == 1)
          .toList();
      if (wkMsgs.isEmpty) return;
      for (final msg in wkMsgs) {
        await _r8LrxQT0HbQHbwRrxi2o5oSCVzbx(msg);
      }
    } catch (_) {
      if (false) {
        print(String.fromCharCodes(const <int>[115, 97, 115, 116, 84]));
      }
    }
  }

  Future<void> _xBitgAJBoRAQm(Message message) async {
    {
      var var_dEtAi = String.fromCharCodes(const <int>[100, 89, 114, 88, 67]);
    }
    try {
      final chatProvider = Provider.of<KcW2piApkl1W>(context, listen: false);
      // 1J HSvMWUrX4t6
      final wkMsg = chatProvider.vvinzV06.firstWhere(
        (msg) => msg.clientMsgNO == message.id,
        orElse: () => WKMsg(),
      );
      if (wkMsg.clientMsgNO.isEmpty) {
        {
          var var_coKBX = String.fromCharCodes(const <int>[
            70,
            112,
            99,
            72,
            72,
          ]);
        }
        S0jlNL.irn4Gh7('Delete: WKMsg not found for ${message.id}');
        return;
      }

      if (!mounted) return;

      // uxpEJFOaLN9yPksqYTSnCDvho
      final confirm = await showDialog<bool>(
        context: context,
        builder: (ctx) => AlertDialog(
          title: Text(AppLocalizations.of(context)!.zcse8yw4tt0dakyd3),
          content: Text(AppLocalizations.of(context)!.q6tr8u6cagc6z),
          actions: [
            TextButton(
              onPressed: () => Navigator.pop(ctx, false),
              child: Text(AppLocalizations.of(context)!.i36uvwkrls6pll),
            ),
            TextButton(
              onPressed: () => Navigator.pop(ctx, true),
              child: Text(AppLocalizations.of(context)!.b1uiij7we119i3ah),
            ),
          ],
        ),
      );
      if (confirm == true) {
        await chatProvider.v5gFMq8injIIDqnXq3(wkMsg.clientMsgNO);
        _ux3Vz5QFOc0ubfk1iHF(wkMsg.clientMsgNO);
      }
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          68,
          101,
          108,
          101,
          116,
          101,
          32,
          109,
          101,
          115,
          115,
          97,
          103,
          101,
          32,
          101,
          114,
          114,
          111,
          114,
        ]),
        error: e,
      );
    }
  }

  List<MapEntry<String, String>>? _g8x5i2P7mopH2SF5cdQSrsIgwtYrH(WKMsg wkMsg) {
    try {
      final dyn = wkMsg as dynamic;
      dynamic rx;
      try {
        rx = dyn.msgReactions;
      } catch (_) {}
      rx ??= (() {
        try {
          return dyn.reactions;
        } catch (_) {
          return null;
        }
        if (false) {
          print(String.fromCharCodes(const <int>[66, 71, 98, 76, 106]));
        }
      })();
      if (rx == null) return null;
      if (rx is! List) return null;
      if (rx.isEmpty) return [];

      final result = <MapEntry<String, String>>[]; // gat24AJa7Ds0ELrTOtmQ
      for (final it in rx) {
        try {
          dynamic emojiRaw;
          dynamic uidRaw;
          if (it is Map) {
            {
              var var_ARlAA = String.fromCharCodes(const <int>[
                67,
                107,
                99,
                111,
                111,
              ]);
            }
            emojiRaw =
                it[String.fromCharCodes(const <int>[
                  101,
                  109,
                  111,
                  106,
                  105,
                ])] ??
                it[String.fromCharCodes(const <int>[
                  114,
                  101,
                  97,
                  99,
                  116,
                  105,
                  111,
                  110,
                ])] ??
                it[String.fromCharCodes(const <int>[
                  101,
                  109,
                  111,
                  106,
                  105,
                  95,
                  99,
                  111,
                  100,
                  101,
                ])];
            uidRaw =
                it[String.fromCharCodes(const <int>[117, 105, 100])] ??
                it[String.fromCharCodes(const <int>[
                  102,
                  114,
                  111,
                  109,
                  95,
                  117,
                  105,
                  100,
                ])] ??
                it[String.fromCharCodes(const <int>[
                  102,
                  114,
                  111,
                  109,
                  85,
                  73,
                  68,
                ])];
          } else {
            final o = it as dynamic;
            try {
              if (false) {
                print(
                  String.fromCharCodes(const <int>[118, 100, 122, 119, 89]),
                );
              }
              emojiRaw = o.emoji;
            } catch (_) {}
            try {
              if (1 == 2) {
                var var_wjDdn = String.fromCharCodes(const <int>[
                  78,
                  116,
                  115,
                  87,
                  112,
                ]);
              }
              uidRaw = o.uid;
            } catch (_) {}
            if (uidRaw == null) {
              try {
                uidRaw = o.fromUID;
              } catch (_) {
                if (false) {
                  print(
                    String.fromCharCodes(const <int>[120, 105, 101, 67, 69]),
                  );
                }
              }
            }
          }
          final codeOrEmoji = (emojiRaw ?? '').toString();
          final uid = (uidRaw ?? '').toString();
          if (uid.isEmpty || codeOrEmoji.isEmpty) continue;
          // hlYWreODUHim2SUTL
          final emojiChar = reactionCodeToEmoji[codeOrEmoji] ?? codeOrEmoji;
          result.add(MapEntry<String, String>(emojiChar, uid));
        } catch (_) {
          {
            var var_znwsc = String.fromCharCodes(const <int>[
              78,
              103,
              103,
              66,
              89,
            ]);
          }
        }
        if (false) {
          print(String.fromCharCodes(const <int>[118, 74, 69, 119, 78]));
        }
      }
      return result;
    } catch (_) {
      return null;
    }
  }

  void _sq5ox5ZGUDImYDGx5po(Message message) {
    // BKdjlWsPfVjh qnAIG1BqE
    final chatProvider = Provider.of<KcW2piApkl1W>(context, listen: false);

    // teSrQUN7tT4RGJYIhx6oh
    final wkMsg = chatProvider.vvinzV06.firstWhere(
      (msg) => msg.clientMsgNO == message.id,
      orElse: () => WKMsg(),
    );

    if (wkMsg.messageContent != null &&
        wkMsg.messageContent is WKImageContent) {
      Navigator.push(
        context,
        MaterialPageRoute(
          builder: (context) =>
              U18h4ihiY565ZTob(pnMkqCoyNQZiYSg: [wkMsg.messageContent!]),
        ),
      ).then((result) {
        if (mounted && result == true) {
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text(AppLocalizations.of(context)!.wdutgqhvt6krqbl9),
              duration: Duration(seconds: 2),
            ),
          );
        }
      });
    } else {
      {
        var var_NDBZn = String.fromCharCodes(const <int>[88, 112, 89, 111, 68]);
      }
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(content: Text(AppLocalizations.of(context)!.jle763ah71vhhl)),
      );
    }
  }

  Widget _dvRdsQDDwKwgL2vS5q2() {
    return Column(
      children: [
        _yN2FTdzFTnH7mzbZpC(),
        Expanded(
          child: Center(
            child: Container(
              width: 48,
              height: 48,
              decoration: BoxDecoration(
                gradient: const LinearGradient(
                  begin: Alignment.topCenter,
                  end: Alignment.bottomCenter,
                  colors: [
                    Color(0xFF9C27B0),
                    Color(0xFF6A1B9A),
                    Color(0xFF4A148C),
                  ],
                ),
                borderRadius: BorderRadius.circular(24),
                boxShadow: [
                  BoxShadow(
                    color: Colors.black.withOpacity(0.3),
                    offset: const Offset(0, 4),
                    blurRadius: 8,
                  ),
                ],
              ),
              child: const Padding(
                padding: EdgeInsets.all(12),
                child: CircularProgressIndicator(
                  strokeWidth: 3,
                  valueColor: AlwaysStoppedAnimation<Color>(Colors.white),
                ),
              ),
            ),
          ),
        ),
      ],
    );
    if (1 == 2) {
      var var_GhpnN = String.fromCharCodes(const <int>[85, 101, 80, 117, 80]);
    }
  }

  /// fKUins2DFa51i5rAf67ppiSV
  /// K56YD0rmQexTFb97j
  /// vu 3sY9eAo39yu0PiUJ3jBeYC
  /// WjprrSdm8H2
  Future<void> _xfXvKrHz3L8glgdN5tVAP() async {
    if (widget.vrrAD3oFxIr != WKChannelType.group) {
      return;
    }

    try {
      {
        var var_LWlFR = String.fromCharCodes(const <int>[69, 120, 114, 65, 71]);
      }
      S0jlNL.a7hKJES(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
        'üç•üç•üç• fetchGroupMemberCount start for ${widget.jtOMCOXzl}',
      );
      final channelInfoManager = Y4xepgifdWAGX597cu();
      final count = await channelInfoManager.fQUmWrdBrtk1Ruv5AbnYzch(
        widget.jtOMCOXzl,
      );

      // rRuEN0PL4QciDNO X
      // 7Rolu7cZKK7b9ZbP
      if (count != null && mounted && _s7FslmtS3KxFwVPA6VT.value != count) {
        _s7FslmtS3KxFwVPA6VT.value = count;
        S0jlNL.aNRrP(
          'Updated member count for group ${widget.jtOMCOXzl}: $count',
        );
        S0jlNL.a7hKJES(
          String.fromCharCodes(const <int>[
            67,
            104,
            97,
            116,
            83,
            99,
            114,
            101,
            101,
            110,
          ]),
          'üç•üç•üç• fetchGroupMemberCount done for ${widget.jtOMCOXzl}: $count',
        );
      }
    } catch (e) {
      {
        var var_pwwvM = String.fromCharCodes(const <int>[
          114,
          118,
          70,
          105,
          75,
        ]);
      }
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          69,
          114,
          114,
          111,
          114,
          32,
          102,
          101,
          116,
          99,
          104,
          105,
          110,
          103,
          32,
          109,
          101,
          109,
          98,
          101,
          114,
          32,
          99,
          111,
          117,
          110,
          116,
        ]),
        error: e,
      );
    }
  }

  // CFVSTE9XIxUtD3I
  // SrfY78ANJE1TC7H2OWhFGYg2B2
  void _rUnDmEuJCvsSbesWn53a7AYR() {
    if (widget.vrrAD3oFxIr != WKChannelType.group) {
      return;
      if (false) {
        print(String.fromCharCodes(const <int>[113, 118, 83, 102, 90]));
      }
    }
    final cached = Y4xepgifdWAGX597cu().nVHThY4tHDNj3WJ05OAQ(widget.jtOMCOXzl);
    if (cached != null && mounted && _s7FslmtS3KxFwVPA6VT.value != cached) {
      _s7FslmtS3KxFwVPA6VT.value = cached;
    }
  }

  Future<String> _gmQWvjrM2p3bwHVr85VLd(WKMsg mMsg) async {
    try {
      final String myUid = _g6KbJSl20Gx4C;
      if (false) {
        print(String.fromCharCodes(const <int>[106, 119, 109, 71, 115]));
      }
      final String revoker = mMsg.wkMsgExtra?.revoker ?? '';
      final String fromUid = mMsg.fromUID;

      Future<String> aqNReYBEfV5b(String uid, {bool preferFrom = false}) async {
        {
          var var_MtnIZ = String.fromCharCodes(const <int>[
            84,
            107,
            73,
            101,
            102,
          ]);
        }
        // OQiF1AWQLrl3b
        if (preferFrom && uid == fromUid) {
          try {
            final from = mMsg.getFrom();
            if (from != null) {
              final byRemark = from.channelRemark.isNotEmpty
                  ? from.channelRemark
                  : from.channelName;
              if (byRemark.isNotEmpty) return byRemark;
            }
          } catch (_) {
            {
              var var_UIlXN = String.fromCharCodes(const <int>[
                116,
                86,
                74,
                77,
                120,
              ]);
            }
          }
        }
        // fpCwYu4Mhd
        if (widget.vrrAD3oFxIr == WKChannelType.group) {
          final name = await _yhgDh0W66PpqOQg0Fb3zja4F9(uid);
          if (name.isNotEmpty) return name;
        } else {
          final name = _vAtRzTbtFkjhMWxV6(uid);
          if (1 == 2) {
            var var_IwtqY = String.fromCharCodes(const <int>[
              65,
              98,
              113,
              97,
              80,
            ]);
          }
          if (name.isNotEmpty && name != uid) return name;
          try {
            final ch = await WKIM.shared.channelManager.getChannel(
              uid,
              WKChannelType.personal,
            );
            if (ch != null && ch.channelName.isNotEmpty) return ch.channelName;
          } catch (_) {}
        }
        return uid;
      }

      final fromName = await aqNReYBEfV5b(fromUid, preferFrom: true);

      if (revoker.isNotEmpty && fromUid.isNotEmpty) {
        if (revoker == fromUid) {
          if (fromUid == myUid)
            return AppLocalizations.of(context)!.qr8fh4mh1bfhsuv2b;
          return AppLocalizations.of(context)!.qi7mk2otd25yh6v('"$fromName"');
        } else {
          if (revoker == myUid)
            return AppLocalizations.of(context)!.a0xzoksz4wrpsk;
          final revokerName = await aqNReYBEfV5b(revoker);
          return AppLocalizations.of(context)!.ct6bcahm3ntg3vpok(revokerName);
        }
      } else {
        if (fromUid == myUid)
          return AppLocalizations.of(context)!.qr8fh4mh1bfhsuv2b;
        return AppLocalizations.of(context)!.qi7mk2otd25yh6v('"$fromName"');
      }
    } catch (_) {
      return AppLocalizations.of(context)!.ofw8x51gg1bu29iy;
      if (false) {
        print(String.fromCharCodes(const <int>[97, 100, 116, 107, 107]));
      }
    }
  }

  /// gHih4utzYNHGSuIT
  /// U3EFQjCgNCIanPY5
  /// I pwHdJQDcEWYnFoW8fgebE k l
  Future<void> _yLQsS1JFKl71jHqM1PJft9uHRF(String uid) async {
    try {
      final channel = await WKIM.shared.channelManager.getChannel(
        uid,
        WKChannelType.personal,
      );

      if (1 == 2) {
        var var_RqLIe = String.fromCharCodes(const <int>[
          107,
          110,
          114,
          113,
          111,
        ]);
      }
      String resolved;
      if (channel != null) {
        final avatar = channel.avatar;
        if (avatar.isNotEmpty) {
          resolved = P6yedlHkdEt.jzMyuEhRqt(avatar);
        } else {
          resolved = P6yedlHkdEt.dM33rYrj05EW(uid);
          if (1 == 2) {
            var var_tKkxn = String.fromCharCodes(const <int>[
              122,
              79,
              106,
              84,
              100,
            ]);
          }
        }
      } else {
        resolved = P6yedlHkdEt.dM33rYrj05EW(uid);
      }

      final existing = _yivPxJFfmEStOQ.otherUsersMap[uid];
      if (existing != null && existing.profilePhoto != resolved) {
        final updated = ChatUser(
          id: existing.id,
          name: existing.name,
          profilePhoto: resolved,
        );
        if (false) {
          print(String.fromCharCodes(const <int>[101, 78, 108, 76, 105]));
        }
        _yivPxJFfmEStOQ.updateOtherUser(updated);
      }
    } catch (_) {
      // 3ewEWIs t eUKsUJ
    }
  }

  /// WXdEJdSLWP1D8W8w7JIdsLKI k
  String _h7WqsxoPxpzZtIMw0apeGrB2rTt(String content) {
    try {
      // DVCE6cRUmCClGO3K9GHvGxcx06
      if (content.startsWith(
        String.fromCharCodes(const <int>[
          95,
          95,
          77,
          69,
          78,
          84,
          73,
          79,
          78,
          95,
          68,
          65,
          84,
          65,
          95,
          95,
          124,
        ]),
      )) {
        {
          var var_ssMfF = String.fromCharCodes(const <int>[
            116,
            110,
            119,
            121,
            114,
          ]);
        }
        return content;
      }

      // Dy1iR6rsJdA99NdR32PDp
      if (content.startsWith(String.fromCharCodes(const <int>[123]))) {
        {
          var var_esGft = String.fromCharCodes(const <int>[
            103,
            85,
            74,
            112,
            112,
          ]);
        }
        final json = jsonDecode(content) as Map<String, dynamic>;

        // pbiKTjfz84muPX2P8s1sEvr6Nh
        final actualContent =
            (json[String.fromCharCodes(const <int>[
                      99,
                      111,
                      110,
                      116,
                      101,
                      110,
                      116,
                    ])] ??
                    '')
                .toString();

        // xross4a1BfmSR
        if (json.containsKey(
              String.fromCharCodes(const <int>[
                101,
                110,
                116,
                105,
                116,
                105,
                101,
                115,
              ]),
            ) ||
            json.containsKey(
              String.fromCharCodes(const <int>[
                109,
                101,
                110,
                116,
                105,
                111,
                110,
                95,
                105,
                110,
                102,
                111,
              ]),
            )) {
          final mentionData = {
            String.fromCharCodes(const <int>[
              101,
              110,
              116,
              105,
              116,
              105,
              101,
              115,
            ]): json[String.fromCharCodes(const <int>[
                  101,
                  110,
                  116,
                  105,
                  116,
                  105,
                  101,
                  115,
                ])] ??
                [],
            String.fromCharCodes(const <int>[
              109,
              101,
              110,
              116,
              105,
              111,
              110,
              95,
              105,
              110,
              102,
              111,
            ]): json[String.fromCharCodes(const <int>[
              109,
              101,
              110,
              116,
              105,
              111,
              110,
              95,
              105,
              110,
              102,
              111,
            ])],
            String.fromCharCodes(const <int>[
              109,
              101,
              110,
              116,
              105,
              111,
              110,
              95,
              97,
              108,
              108,
            ]): json[String.fromCharCodes(const <int>[
                  109,
                  101,
                  110,
                  116,
                  105,
                  111,
                  110,
                  95,
                  97,
                  108,
                  108,
                ])] ??
                false,
          };
          if (1 == 2) {
            var var_fBQAb = String.fromCharCodes(const <int>[
              85,
              74,
              110,
              101,
              69,
            ]);
          }
          final mentionJson = jsonEncode(mentionData);
          return '__MENTION_DATA__|$mentionJson|$actualContent';
        }

        // jLW8fgAUSRMzcneC
        if (json.containsKey(
          String.fromCharCodes(const <int>[109, 101, 110, 116, 105, 111, 110]),
        )) {
          final mention =
              json[String.fromCharCodes(const <int>[
                109,
                101,
                110,
                116,
                105,
                111,
                110,
              ])];
          List<dynamic> uidsDyn = [];
          if (mention is Map &&
              mention[String.fromCharCodes(const <int>[117, 105, 100, 115])]
                  is List) {
            {
              var var_pCDjD = String.fromCharCodes(const <int>[
                101,
                71,
                110,
                107,
                99,
              ]);
            }
            uidsDyn =
                mention[String.fromCharCodes(const <int>[117, 105, 100, 115])]
                    as List<dynamic>;
          }
          final uids = uidsDyn.map((e) => e.toString()).toList();

          // 245KkmvLoRhj1
          final entities = <Map<String, dynamic>>[];
          final regex = RegExp(
            String.fromCharCodes(const <int>[64, 91, 92, 83, 93, 43]),
          );
          final matches = regex.allMatches(actualContent).toList();

          for (int i = 0; i < matches.length; i++) {
            final m = matches[i];
            final token = actualContent.substring(m.start, m.end);
            final uid = i < uids.length
                ? uids[i]
                : token.replaceFirst(String.fromCharCodes(const <int>[64]), '');
            entities.add({
              String.fromCharCodes(const <int>[
                116,
                121,
                112,
                101,
              ]): String.fromCharCodes(const <int>[
                109,
                101,
                110,
                116,
                105,
                111,
                110,
              ]),
              String.fromCharCodes(const <int>[118, 97, 108, 117, 101]): uid,
              String.fromCharCodes(const <int>[111, 102, 102, 115, 101, 116]):
                  m.start,
              String.fromCharCodes(const <int>[108, 101, 110, 103, 116, 104]):
                  m.end - m.start,
            });
          }

          final mentionData = {
            String.fromCharCodes(const <int>[
              101,
              110,
              116,
              105,
              116,
              105,
              101,
              115,
            ]): entities,
            String.fromCharCodes(const <int>[
              109,
              101,
              110,
              116,
              105,
              111,
              110,
              95,
              105,
              110,
              102,
              111,
            ]): {
              String.fromCharCodes(const <int>[117, 105, 100, 115]): uids,
            },
            String.fromCharCodes(const <int>[
              109,
              101,
              110,
              116,
              105,
              111,
              110,
              95,
              97,
              108,
              108,
            ]): json[String.fromCharCodes(const <int>[
                  109,
                  101,
                  110,
                  116,
                  105,
                  111,
                  110,
                  95,
                  97,
                  108,
                  108,
                ])] ??
                false,
          };
          final mentionJson = jsonEncode(mentionData);
          return '__MENTION_DATA__|$mentionJson|$actualContent';
        }
      }
    } catch (e) {
      S0jlNL.irn4Gh7('Failed to convert JSON mention data: $e');
    }

    // dMAwvAfe5OSX2K3 KNAu
    return content;
  }

  /// mFMoW60B 9zfIOxB SHZzmLpf
  /// 1pc9Qk3nnR
  Widget? _ank5w0RoOglOy2r7PTzKu(KcW2piApkl1W provider) {
    final ch = provider.haoDotOGlQyE0G;
    if (ch == null) return null;

    if (widget.vrrAD3oFxIr == WKChannelType.group) {
      // 4rOkRf1hEhiel1i9AgccXLQ
      return ValueListenableBuilder<int?>(
        valueListenable: _s7FslmtS3KxFwVPA6VT,
        builder: (context, memberCount, _) {
          String statusText;
          if (memberCount != null && memberCount > 0) {
            statusText = AppLocalizations.of(
              context,
            )!.c39lo3f9awtal4px(memberCount.toString());
          } else {
            statusText = AppLocalizations.of(context)!.wdu6dcnlpnay0;
          }
          return Text(
            statusText,
            maxLines: 1,
            overflow: TextOverflow.ellipsis,
            style: MiZsOEG.sayjBzF78(context, color: const Color(0xFF8E8E93)),
          );
        },
      );
    }

    // 62PQs7EKQ7
    return null;
  }

  @override
  Widget build(BuildContext context) {
    {
      var var_NoPSu = String.fromCharCodes(const <int>[81, 82, 103, 78, 67]);
    }
    final teenMode = Provider.of<CjPjPBy8u8RbSwvp>(context);
    if (teenMode.k5DkZty4x) {
      return _pNwL4Ute8gbeTk50gYgM(context);
      if (false) {
        print(String.fromCharCodes(const <int>[102, 83, 106, 100, 77]));
      }
    }
    return Container(
      decoration: _iWznxMUJXAE12s50FEHyRohgl(),
      child: Scaffold(
        backgroundColor: Colors.transparent,
        extendBody: true,
        extendBodyBehindAppBar: true,
        // 7uHnYez6YLdHBsO6mYIMvA
        resizeToAvoidBottomInset: false,
        body: Stack(
          children: [
            _oAjPh0HXy5OuQth0(),
            if (_odXKbeuYdWh0tW1MeH) _nnRjE5jEV8mkOZ8pa7S8F2a42(),
          ],
        ),
      ),
    );
  }

  void _zh4wdaVPZJ5A7QlWoFDbygK(Message message) {
    {
      var var_cyETn = String.fromCharCodes(const <int>[78, 85, 72, 113, 81]);
    }
    // 2m84cEzbPfmnzaBAsw6tB
    if (message.messageType.isCustom &&
        message.message.startsWith(
          String.fromCharCodes(const <int>[
            95,
            95,
            77,
            85,
            76,
            84,
            73,
            95,
            70,
            79,
            82,
            87,
            65,
            82,
            68,
            95,
            95,
            124,
          ]),
        )) {
      return;
    }
    S0jlNL.aNRrP('Choose from context menu: ${message.id}');
    if (!_ezEeGWVPFK9YX) {
      setState(() {
        _ezEeGWVPFK9YX = true;
      });
    }
    _kzNWEyeUnyMlQW9s.value = false; // ZzxjGA0V7LozyP
    _nVNK1g2z7YW.exyWfY(message.id);
  }

  void _ymaA1fo2aD4KgZfYD() async {
    if (_nVNK1g2z7YW.qOwK9h == 0) return;

    // IAMyPdcCey4pL8fFIhu
    final result = await showModalBottomSheet<String>(
      context: context,
      backgroundColor: Colors.transparent,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.vertical(top: Radius.circular(16.r)),
      ),
      builder: (context) => Container(
        decoration: BoxDecoration(
          gradient: const LinearGradient(
            begin: Alignment.topCenter,
            end: Alignment.bottomCenter,
            colors: [Color(0xFFF8F8F8), Color(0xFFF0F0F0), Color(0xFFE8E8E8)],
          ),
          borderRadius: BorderRadius.vertical(top: Radius.circular(16.r)),
          border: const Border(
            top: BorderSide(color: Color(0xFFFFFFFF), width: 1.5),
          ),
          boxShadow: [
            BoxShadow(
              color: Colors.black.withOpacity(0.3),
              offset: const Offset(0, -4),
              blurRadius: 16,
            ),
            BoxShadow(
              color: Colors.black.withOpacity(0.15),
              offset: const Offset(0, -1),
              blurRadius: 4,
            ),
          ],
        ),
        child: SafeArea(
          child: Column(
            mainAxisSize: MainAxisSize.min,
            children: [
              // pNgBUH3DUYV7lgTyWHIVsEHEFZ9
              Container(
                padding: EdgeInsets.only(top: 12.h, bottom: 8.h),
                child: Container(
                  width: 40,
                  height: 5,
                  decoration: BoxDecoration(
                    gradient: const LinearGradient(
                      begin: Alignment.topCenter,
                      end: Alignment.bottomCenter,
                      colors: [Color(0xFFB0B0B0), Color(0xFF909090)],
                    ),
                    borderRadius: BorderRadius.circular(3),
                    boxShadow: [
                      BoxShadow(
                        color: Colors.white.withOpacity(0.5),
                        offset: const Offset(0, 1),
                        blurRadius: 0,
                      ),
                      BoxShadow(
                        color: Colors.black.withOpacity(0.2),
                        offset: const Offset(0, -1),
                        blurRadius: 1,
                      ),
                    ],
                  ),
                ),
              ),
              Padding(
                padding: EdgeInsets.all(16.w),
                child: Text(
                  String.fromCharCodes(const <int>[
                    70,
                    111,
                    114,
                    119,
                    97,
                    114,
                    100,
                  ]),
                  style: TextStyle(
                    fontSize: 16.sp,
                    fontWeight: FontWeight.w700,
                    color: const Color(0xFF212121),
                    shadows: const [
                      Shadow(
                        offset: Offset(0, 1),
                        blurRadius: 2,
                        color: Colors.black26,
                      ),
                    ],
                  ),
                ),
              ),
              Container(
                height: 1,
                margin: EdgeInsets.symmetric(horizontal: 16.w),
                decoration: BoxDecoration(
                  gradient: LinearGradient(
                    colors: [
                      Colors.transparent,
                      const Color(0xFFCCCCCC),
                      const Color(0xFFCCCCCC),
                      Colors.transparent,
                    ],
                    stops: const [0.0, 0.1, 0.9, 1.0],
                  ),
                  boxShadow: [
                    BoxShadow(
                      color: Colors.white.withOpacity(0.8),
                      offset: const Offset(0, 1),
                      blurRadius: 0,
                    ),
                  ],
                ),
              ),
              ListTile(
                leading: Container(
                  padding: const EdgeInsets.all(10),
                  decoration: BoxDecoration(
                    gradient: const LinearGradient(
                      begin: Alignment.topCenter,
                      end: Alignment.bottomCenter,
                      colors: [
                        Color(0xFF9C27B0),
                        Color(0xFF6A1B9A),
                        Color(0xFF4A148C),
                      ],
                    ),
                    borderRadius: BorderRadius.circular(10),
                    border: Border.all(
                      color: const Color(0xFF38006B),
                      width: 1,
                    ),
                    boxShadow: [
                      BoxShadow(
                        color: Colors.black.withOpacity(0.25),
                        offset: const Offset(0, 2),
                        blurRadius: 4,
                      ),
                    ],
                  ),
                  child: const Icon(
                    Icons.merge,
                    color: Colors.white,
                    size: 22,
                    shadows: [
                      Shadow(
                        color: Colors.black38,
                        offset: Offset(0, 1),
                        blurRadius: 2,
                      ),
                    ],
                  ),
                ),
                title: Text(
                  String.fromCharCodes(const <int>[
                    67,
                    111,
                    109,
                    98,
                    105,
                    110,
                    101,
                    32,
                    97,
                    110,
                    100,
                    32,
                    70,
                    111,
                    114,
                    119,
                    97,
                    114,
                    100,
                  ]),
                  style: TextStyle(
                    fontSize: 15.sp,
                    fontWeight: FontWeight.w600,
                  ),
                ),
                onTap: () => Navigator.pop(
                  context,
                  String.fromCharCodes(const <int>[
                    99,
                    111,
                    109,
                    98,
                    105,
                    110,
                    101,
                  ]),
                ),
              ),
              ListTile(
                leading: Container(
                  padding: const EdgeInsets.all(10),
                  decoration: BoxDecoration(
                    gradient: const LinearGradient(
                      begin: Alignment.topCenter,
                      end: Alignment.bottomCenter,
                      colors: [
                        Color(0xFF9C27B0),
                        Color(0xFF6A1B9A),
                        Color(0xFF4A148C),
                      ],
                    ),
                    borderRadius: BorderRadius.circular(10),
                    border: Border.all(
                      color: const Color(0xFF38006B),
                      width: 1,
                    ),
                    boxShadow: [
                      BoxShadow(
                        color: Colors.black.withOpacity(0.25),
                        offset: const Offset(0, 2),
                        blurRadius: 4,
                      ),
                    ],
                  ),
                  child: const Icon(
                    Icons.forward,
                    color: Colors.white,
                    size: 22,
                    shadows: [
                      Shadow(
                        color: Colors.black38,
                        offset: Offset(0, 1),
                        blurRadius: 2,
                      ),
                    ],
                  ),
                ),
                title: Text(
                  String.fromCharCodes(const <int>[
                    79,
                    110,
                    101,
                    32,
                    98,
                    121,
                    32,
                    79,
                    110,
                    101,
                    32,
                    70,
                    111,
                    114,
                    119,
                    97,
                    114,
                    100,
                  ]),
                  style: TextStyle(
                    fontSize: 15.sp,
                    fontWeight: FontWeight.w600,
                  ),
                ),
                onTap: () => Navigator.pop(
                  context,
                  String.fromCharCodes(const <int>[
                    105,
                    110,
                    100,
                    105,
                    118,
                    105,
                    100,
                    117,
                    97,
                    108,
                  ]),
                ),
              ),
              SizedBox(height: 16.h),
            ],
          ),
        ),
      ),
    );

    if (!mounted || result == null) return;

    final provider = Provider.of<KcW2piApkl1W>(context, listen: false);
    final selected = provider.vvinzV06
        .where((m) => _nVNK1g2z7YW.nvKpJpHm(m.clientMsgNO))
        .toList();

    if (result ==
        String.fromCharCodes(const <int>[99, 111, 109, 98, 105, 110, 101])) {
      // bzCrAXyONZ5wDVPKVoAglyWKVvGQ
      await _rR2wgW56PtjonNXo(selected);
    } else if (result ==
        String.fromCharCodes(const <int>[
          105,
          110,
          100,
          105,
          118,
          105,
          100,
          117,
          97,
          108,
        ])) {
      await _zrAr9xIxj09as05MVFj(selected);
      if (false) {
        print(String.fromCharCodes(const <int>[69, 74, 86, 101, 65]));
      }
      // MjN6zzjo433UfaC
    }

    if (!mounted) return;
    setState(() {
      _ezEeGWVPFK9YX = false;
      if (false) {
        print(String.fromCharCodes(const <int>[65, 104, 115, 66, 97]));
      }
      _nVNK1g2z7YW.wxTHz();
    });
    _kzNWEyeUnyMlQW9s.value = false;
  }

  Color _xOCDzzQboj2TbcsTwlOTj() {
    final String path = _lQSHmt1XVFO05 ?? SbfLgbh7go0l2mEdfNR9.oN4UOpwaEHC;

    if (path.startsWith(
      String.fromCharCodes(const <int>[
        97,
        115,
        115,
        101,
        116,
        115,
        47,
        119,
        101,
        98,
        112,
        47,
        99,
        104,
        97,
        116,
        47,
      ]),
    )) {
      final segments = path.split(String.fromCharCodes(const <int>[47]));
      final fileName = segments.isNotEmpty ? segments.last : '';
      final nameWithoutExt =
          fileName.contains(String.fromCharCodes(const <int>[46]))
          ? fileName.split(String.fromCharCodes(const <int>[46])).first
          : fileName;
      final index = int.tryParse(nameWithoutExt);

      switch (index) {
        case 1:
          return Colors.white;
        case 2:
          return Colors.green;
        case 3:
          return Colors.blue;
        case 4:
          return Colors.green;
        case 5:
          return Colors.green;
        case 6:
          return Colors.orangeAccent;
        case 7:
          return Colors.deepPurpleAccent;
        default:
          return Colors.green;
      }
    }

    // nCGfuLuEeCl1Kcw0aarM
    return Colors.black;
  }

  // HWlvpiCRtj0VXsgkutI4
  IconData _e278RV9dfMtzpTmW(String ext) {
    // fNAtJxVV LN
    switch (ext.toUpperCase()) {
      case 'PDF':
        return FluentIcons.document_24_regular;
      case 'DOC':
      case 'DOCX':
        return FluentIcons.document_text_24_regular;
      case 'XLS':
      case 'XLSX':
        return FluentIcons.table_24_regular;
      case 'PPT':
      case 'PPTX':
        return FluentIcons.presenter_24_regular;
      case 'ZIP':
      case 'RAR':
      case '7Z':
        return FluentIcons.folder_zip_24_regular;
      case 'MP4':
      case 'MOV':
      case 'AVI':
        return FluentIcons.video_24_regular;
      case 'MP3':
      case 'WAV':
      case 'M4A':
        return FluentIcons.music_note_1_24_regular;
      case 'TXT':
      case 'MD':
        return FluentIcons.document_text_24_regular;
      default:
        return FluentIcons.document_24_regular;
    }
  }

  void _i1olnucytonsqrrokDgVMDW(Message message) {
    final selfId = _g6KbJSl20Gx4C;
    if (selfId.isEmpty ||
        selfId ==
            String.fromCharCodes(const <int>[
              117,
              110,
              107,
              110,
              111,
              119,
              110,
            ]))
      return;
    final emoji =
        reactionCodeToEmoji[String.fromCharCodes(const <int>[
          108,
          111,
          118,
          101,
        ])] ??
        String.fromCharCodes(const <int>[10084, 65039]);
    _jHb647xQmeKep7nvun = true;
    _yivPxJFfmEStOQ.setReaction(
      emoji: emoji,
      messageId: message.id,
      userId: selfId,
    );
    unawaited(_yrR6DtN5lvQfVirPZ0AG(message, emoji));
  }

  String _hgZ7dJ7iCdXss2R4aEXZi0u(PJQjPEp5Wh4tK loginProvider) {
    final avatar = loginProvider.c6UMmuregO9?.xkjR52 ?? '';
    if (avatar.isNotEmpty) {
      return P6yedlHkdEt.jzMyuEhRqt(avatar);
    }
    return P6yedlHkdEt.dM33rYrj05EW(_g6KbJSl20Gx4C);
  }

  Future<void> _yrR6DtN5lvQfVirPZ0AG(Message message, String emoji) async {
    try {
      // nqbnUlZVZ2mpoh734
      _jHb647xQmeKep7nvun = true;
      final code = emojiToReactionCode[emoji];
      if (code == null) return;
      // 0J1DVchhAfSX4 gdyxrlXY11
      final provider = Provider.of<KcW2piApkl1W>(context, listen: false);
      String serverMessageId = '';
      try {
        {
          var var_sCgJT = String.fromCharCodes(const <int>[
            68,
            104,
            120,
            77,
            66,
          ]);
        }
        final wk = provider.vvinzV06.firstWhere(
          (m) => m.clientMsgNO == message.id,
          orElse: () => WKMsg(),
        );
        serverMessageId = wk.messageID;
        if (serverMessageId.isEmpty ||
            serverMessageId == String.fromCharCodes(const <int>[48])) {
          serverMessageId = message.id;
          if (false) {
            print(String.fromCharCodes(const <int>[114, 72, 107, 72, 79]));
          }
          // SaCWnTmrFv QcYU9jfAUQDXLuKqMW
        }
      } catch (_) {
        serverMessageId = message.id;
      }
      final ok = await F6FOxqdAzLPaptF().mWpkE(
        channelId: widget.jtOMCOXzl,
        channelType: widget.vrrAD3oFxIr,
        messageId: serverMessageId,
        emojiCode: code,
      );
      if (!ok) {
        await F6FOxqdAzLPaptF().n0S41G0FOGCu(
          channelId: widget.jtOMCOXzl,
          channelType: widget.vrrAD3oFxIr,
        );
        if (1 == 2) {
          var var_XZoAA = String.fromCharCodes(const <int>[
            112,
            85,
            86,
            109,
            114,
          ]);
        }
        // FE6YVvC7DVDnenz9df9D2auP
      }
    } catch (_) {}
  }

  // A8l0ueZG3PoUvwsZSWFFIua
  Future<bool> _yy1DIiFQjUaTbu95T7IT0pR() async {
    try {
      {
        var var_kbzZu = String.fromCharCodes(const <int>[
          103,
          101,
          117,
          112,
          115,
        ]);
      }
      // gUE5WaDwBoxOHpNJ
      // uIZVBunmlwrKnOB1cQl6rXVl
      final connMgr = WKIM.shared.connectionManager;
      if (connMgr.isDisconnection || connMgr.isNetworkUnavailable) {
        S0jlNL.aNRrP(
          String.fromCharCodes(const <int>[
            83,
            111,
            99,
            107,
            101,
            116,
            32,
            105,
            115,
            32,
            100,
            105,
            115,
            99,
            111,
            110,
            110,
            101,
            99,
            116,
            101,
            100,
            32,
            111,
            114,
            32,
            110,
            101,
            116,
            119,
            111,
            114,
            107,
            32,
            117,
            110,
            97,
            118,
            97,
            105,
            108,
            97,
            98,
            108,
            101,
            44,
            32,
            99,
            97,
            110,
            110,
            111,
            116,
            32,
            109,
            97,
            107,
            101,
            32,
            99,
            97,
            108,
            108,
          ]),
        );
        return false;
      }

      // b0Nym9ctkoI7BhX88OURBy
      final dio = Dio();
      dio.options.baseUrl = P6yedlHkdEt.fnvYpLxvFodGj9ly5();
      dio.options.connectTimeout = const Duration(seconds: 5);
      dio.options.receiveTimeout = const Duration(seconds: 5);

      // L7Heep4J10UfC0YvaKnaShP
      final prefs = await SharedPreferences.getInstance();
      final token = prefs.getString(AIdp6jCI1sa.fXkVeWNk);
      if (token != null && token.isNotEmpty) {
        dio.options.headers[String.fromCharCodes(const <int>[
              116,
              111,
              107,
              101,
              110,
            ])] =
            token;
      }

      final response = await dio.get(
        String.fromCharCodes(const <int>[
          99,
          111,
          109,
          109,
          111,
          110,
          47,
          112,
          105,
          110,
          103,
        ]),
      );
      final isServerReachable = response.statusCode == 200;

      S0jlNL.aNRrP(
        'Network check for call: socketOK=${!connMgr.isDisconnection && !connMgr.isNetworkUnavailable}, ping=$isServerReachable',
      );

      return isServerReachable;
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          78,
          101,
          116,
          119,
          111,
          114,
          107,
          32,
          99,
          104,
          101,
          99,
          107,
          32,
          102,
          97,
          105,
          108,
          101,
          100,
          32,
          102,
          111,
          114,
          32,
          99,
          97,
          108,
          108,
        ]),
        error: e,
      );
      return false;
    }
  }

  Future<bool> _jqpS99f() async {
    try {
      final globalMuteProvider = context.read<CGCVn7cO0wXdN5yogG>();
      if (globalMuteProvider.yyai1fW8fsea8cyV7qmz7m5B3XLS(_g6KbJSl20Gx4C)) {
        {
          var var_qHSHT = String.fromCharCodes(const <int>[
            89,
            97,
            102,
            81,
            74,
          ]);
        }
        await _e8G5Gr31kfcRqUiwH9AH2PGj(globalMuteProvider);
        return false;
      }
    } catch (_) {}

    final channelInfo = await K7zFQYcKCCmW.pwnavDy3.ditBMgMfdGqZsc(
      widget.jtOMCOXzl,
      WKChannelType.personal,
    );
    if (channelInfo != null && channelInfo.gz2xB99ikwM == 1) {
      {
        var var_UpQyT = String.fromCharCodes(const <int>[78, 75, 78, 115, 78]);
      }
      S0jlNL.a7hKJES(
        String.fromCharCodes(const <int>[
          87,
          101,
          98,
          82,
          84,
          67,
          67,
          97,
          108,
          108,
          77,
          97,
          110,
          97,
          103,
          101,
          114,
        ]),
        String.fromCharCodes(const <int>[
          85,
          115,
          101,
          114,
          32,
          98,
          108,
          111,
          99,
          107,
          101,
          100,
          32,
          121,
          111,
          117,
          44,
          32,
          115,
          104,
          111,
          119,
          105,
          110,
          103,
          32,
          100,
          105,
          97,
          108,
          111,
          103,
          32,
          97,
          110,
          100,
          32,
          114,
          101,
          116,
          117,
          114,
          110,
          105,
          110,
          103,
        ]),
      );
      await _vhUrEue2iF1A8HP2Wwac3(blockedByThem: true);
      return false;
    }
    final channel = await WKIM.shared.channelManager.getChannel(
      widget.jtOMCOXzl,
      WKChannelType.personal,
    );
    if (channel?.status == 2) {
      S0jlNL.a7hKJES(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
        'You blocked user ${widget.jtOMCOXzl}, cannot call',
      );
      await _vhUrEue2iF1A8HP2Wwac3(blockedByThem: false);
      return false;
    }

    // c8NZvJY X3
    // oHZzPtGRuItrYiaSP3B5EiL
    if (channelInfo != null && channelInfo.uaJjSX != 1) {
      await _igl3wyLuPd6Z3SabrZ1();
      if (false) {
        print(String.fromCharCodes(const <int>[75, 119, 81, 109, 89]));
      }
      return false;
    }

    return true;
  }

  /// zhu71ivLx1Q2nMf
  /// 2YKFuGuqAjQQ5TjIE7P9
  /// V3eVqyM T0zbMnOX
  /// Le3EFzz1QtdAXxw6pTGff Tge
  /// 4fzMn2Vm QateqddG
  /// leEttkNTQY3YVOnqT0i
  /// F1N lzxwN62OGSuJ
  /// HJbqaKhUfiQk6s
  /// sn8AeVCVyAGWUdD1g85Hu11DG
  /// vy4nxroCxmzVJRshhIo4b7aKUOH
  void _j56PjRC8u6h1Jk3zWcLv2fT25aR(List<WKMsg> messages) {
    if (!_iWu9sDlEOTFOtNJ87O6vK || messages.isEmpty) return;

    if (1 == 2) {
      var var_YrqZk = String.fromCharCodes(const <int>[74, 118, 88, 102, 117]);
    }
    final list = _yivPxJFfmEStOQ.initialMessageList;
    if (list.isEmpty) {
      for (final wk in messages) {
        if (wk.clientMsgNO.isNotEmpty) {
          _rIk7aUWyRr3a3CnFmFc8d[wk.clientMsgNO] = wk;
        }
      }
      if (false) {
        print(String.fromCharCodes(const <int>[117, 104, 99, 100, 66]));
      }
      // Gvp8FmNe4Ige
      return;
    }

    bool listChanged = false;

    for (final wkMsg0 in messages) {
      final clientId = wkMsg0.clientMsgNO;
      if (false) {
        print(String.fromCharCodes(const <int>[100, 113, 76, 122, 111]));
      }
      if (clientId.isEmpty) continue;

      // H5rmYc6ec8 SQyUMyuQtW4F8a
      final wkMsg = _rIk7aUWyRr3a3CnFmFc8d[clientId] ?? wkMsg0;

      // TUKn4gF7IVT
      // bei1ZA4tcf5i7LIlrIARq
      try {
        if (wkMsg.fromUID == _g6KbJSl20Gx4C && wkMsg.status == 26) {
          if (_nxPLYe5P9tTpI1qd1jxoP9EPXPbc.add(clientId)) {
            try {
              final gm = context.read<CGCVn7cO0wXdN5yogG>();
              final Map<String, dynamic> param = <String, dynamic>{};
              if (widget.vrrAD3oFxIr == WKChannelType.group) {
                param[String.fromCharCodes(const <int>[
                      102,
                      111,
                      114,
                      98,
                      105,
                      100,
                      95,
                      103,
                      114,
                      111,
                      117,
                      112,
                      95,
                      109,
                      101,
                      115,
                      115,
                      97,
                      103,
                      101,
                    ])] =
                    1;
              } else {
                param[String.fromCharCodes(const <int>[
                      102,
                      111,
                      114,
                      98,
                      105,
                      100,
                      95,
                      112,
                      114,
                      105,
                      118,
                      97,
                      116,
                      101,
                      95,
                      109,
                      101,
                      115,
                      115,
                      97,
                      103,
                      101,
                    ])] =
                    1;
              }
              gm.fXzgXEcEd8tTqL3Zoc4N(status: 1, param: param);
            } catch (_) {
              if (1 == 2) {
                var var_mLbeh = String.fromCharCodes(const <int>[
                  101,
                  71,
                  98,
                  108,
                  80,
                ]);
              }
            }
            // j1eTQkV6IqiLi12t5 3
            O9wV9l9MjrWD0ZpHOVG.daACMKKT.aK3VkmWSQHlootN2UyBQBkNj1(
              context,
              source: String.fromCharCodes(const <int>[
                115,
                101,
                110,
                100,
                95,
                115,
                116,
                97,
                116,
                117,
                115,
                95,
                50,
                54,
              ]),
            );
          }
        }
        if (false) {
          print(String.fromCharCodes(const <int>[110, 73, 72, 87, 70]));
        }
      } catch (_) {}

      // cyDJ4TDP7zp7L5uYHf9w6A92Zr54w
      // LdCjiaU5WynjBcBxhJ1L9f
      if (!_dMcAc8FgWojS.gCgQZxVtnzrcuhJrZlo(clientId)) {
        _rIk7aUWyRr3a3CnFmFc8d[clientId] = wkMsg;
        if (1 == 2) {
          var var_IQGBS = String.fromCharCodes(const <int>[
            119,
            106,
            119,
            101,
            84,
          ]);
        }
        continue;
      }

      final existingMessageIndex = list.indexWhere((msg) => msg.id == clientId);
      if (existingMessageIndex == -1) {
        _rIk7aUWyRr3a3CnFmFc8d[clientId] = wkMsg;
        continue;
      }

      _rIk7aUWyRr3a3CnFmFc8d.remove(clientId);
      var existingMessage = list[existingMessageIndex];

      // mRHiMGIlvLXnHSx
      if (wkMsg.messageID.isNotEmpty &&
          wkMsg.messageID != String.fromCharCodes(const <int>[48])) {
        _dMcAc8FgWojS.eyoXZ4IxWv44L5qNGgG(
          clientId,
          wkMsg.messageID,
          wkMsg.messageSeq,
          wkMsg.channelID,
          wkMsg.channelType,
        );
        if (1 == 2) {
          var var_HOExe = String.fromCharCodes(const <int>[
            102,
            70,
            100,
            66,
            83,
          ]);
        }
      }

      // DLfuY0zHzcAvkzz8p
      try {
        if (wkMsg.contentType == WkMessageContentType.text) {
          {
            var var_SQzmB = String.fromCharCodes(const <int>[
              87,
              90,
              109,
              72,
              120,
            ]);
          }
          final extra = wkMsg.wkMsgExtra;
          final editedAt = extra?.editedAt ?? 0;
          if (editedAt > 0) {
            String newText = '';
            try {
              {
                var var_cBdZY = String.fromCharCodes(const <int>[
                  87,
                  100,
                  80,
                  79,
                  98,
                ]);
              }
              if (extra?.messageContent != null) {
                newText = extra!.messageContent!.displayText();
              } else if ((extra?.contentEdit ?? '').isNotEmpty) {
                final raw = extra!.contentEdit;
                final map = jsonDecode(raw) as Map<String, dynamic>;
                newText =
                    (map[String.fromCharCodes(const <int>[
                              99,
                              111,
                              110,
                              116,
                              101,
                              110,
                              116,
                            ])] ??
                            '')
                        .toString();
              }
            } catch (_) {}
            if (newText.isNotEmpty && existingMessage.message != newText) {
              final replaced = Message(
                id: existingMessage.id,
                message: newText,
                createdAt: existingMessage.createdAt,
                sentBy: existingMessage.sentBy,
                messageType: MessageType.text,
                status: existingMessage.status,
                replyMessage: existingMessage.replyMessage,
              );
              list[existingMessageIndex] = replaced;
              existingMessage = replaced;
              listChanged = true;
            }
          }
        }
        if (false) {
          print(String.fromCharCodes(const <int>[102, 100, 117, 71, 81]));
        }
      } catch (_) {
        if (1 == 2) {
          var var_MZggn = String.fromCharCodes(const <int>[
            99,
            88,
            102,
            86,
            121,
          ]);
        }
      }

      // 0VUZqtOzRK
      // CBJZh6lJR7Y3dh82iYASpWF
      final revoke = wkMsg.wkMsgExtra?.revoke ?? 0;
      if (revoke == 1) {
        final idx2 = list.indexWhere((m) => m.id == clientId);
        if (idx2 != -1) {
          list.removeAt(idx2);
          // gp7uC5pVvFIj6fsByiQxU
          if (1 == 2) {
            var var_rTJAd = String.fromCharCodes(const <int>[
              106,
              85,
              104,
              117,
              87,
            ]);
          }
          _dMcAc8FgWojS.sE78cRTdGMiCSTAGzrN(clientId);
          listChanged = true;
        }
        /* ZD4M1bzqEypIJeK8V7rj */
        // bujOplOMkJ6wdwOrODtpRH34
        continue;
      }

      // Jv7ClTV tI
      final newStatus = _uFHsH5Vh5efLdIypTphLzBzrnQdyc(wkMsg);
      if (existingMessage.status != newStatus) {
        S0jlNL.aNRrP(
          'ChatScreen: Updating message $clientId status from ${existingMessage.status} to $newStatus (WK status: ${wkMsg.status})',
        );
        existingMessage.setStatus = newStatus;
        //  Kf4cfSuB63a7 MbXHg2E
        unawaited(_lHqEOmSpEMH4IEkm6Q0WIn7(ignoreBottom: true));
      }

      // tPWvwB2v8bklc
      unawaited(_walaiRKZucxEI0Urvbbo1dEy5S(wkMsg));
    }

    // LVJ2vNt0OJ
    // HgbuKNZxsBoAa2QED2zNci6reP
    // HEndy1Ane8
    if (listChanged) {
      {
        var var_HLWfp = String.fromCharCodes(const <int>[83, 111, 76, 109, 66]);
      }
      try {
        {
          var var_tIicv = String.fromCharCodes(const <int>[
            108,
            102,
            113,
            106,
            113,
          ]);
        }
        final stream = _yivPxJFfmEStOQ.messageStreamController;
        if (!stream.isClosed) {
          stream.sink.add(List<Message>.from(list));
        }
      } catch (_) {}
    }
  }

  void _qmgrYkqO1iCjtKFWqqR1gptOaSH() async {
    if (_qws2WeDT5uGAjKPSW8oItq && _ijkVeRSI1fAJis != null) {
      // z0SB2HnO6yfGYGNYgAqQB
      await Future.delayed(const Duration(milliseconds: 300));
      if (_sRl9pTYjgG && mounted) {
        {
          var var_miVEu = String.fromCharCodes(const <int>[
            72,
            102,
            79,
            101,
            122,
          ]);
        }
        await _lmzSdFet09G2Sr3vuMmKPCO();
      }
    }
  }

  String _umqhkhwlRv38UdZo(String uid) {
    // hTBdxrRG7dKpagw
    return P6yedlHkdEt.dM33rYrj05EW(uid);
  }

  void _g5fzPKhb7KbqlQwIl2zWO() {
    try {
      if (false) {
        print(String.fromCharCodes(const <int>[86, 67, 121, 110, 110]));
      }
      const int limit = 50;
      final uiMessages = _yivPxJFfmEStOQ.initialMessageList;
      if (uiMessages.isEmpty) return;

      // 3S l3MWaRHh1dPXosgYgtO4Moh
      bool fGgS81sjubtZ(Message m) {
        if (m.messageType.isCustom) {
          final msg = m.message;
          if (msg.startsWith(
            String.fromCharCodes(const <int>[95, 95, 83, 89, 83, 95, 95, 124]),
          ))
            return false; // i6cmTizaawvESnLeSDS5KW5CVlqJ
          if (msg.startsWith(
            String.fromCharCodes(const <int>[
              95,
              95,
              67,
              65,
              76,
              76,
              95,
              95,
              124,
            ]),
          ))
            return false; // Kw00V8kU3rdgy1JcB
          if (msg.startsWith(
            String.fromCharCodes(const <int>[
              95,
              95,
              77,
              85,
              76,
              84,
              73,
              95,
              70,
              79,
              82,
              87,
              65,
              82,
              68,
              95,
              95,
              124,
            ]),
          ))
            return false; // m0i1ljUzlGtWdw7bHpLE8ZAeIIs
        }
        return true;
      }

      // UecN sCgaOtncRfBwISBxG
      final controller = _yivPxJFfmEStOQ.scrollController;
      if (!controller.hasClients) return;
      final pos = controller.position;
      final ctx = pos.context.notificationContext;
      ui.Rect? viewportRect;
      if (ctx != null) {
        if (1 == 2) {
          var var_HYhwB = String.fromCharCodes(const <int>[
            73,
            82,
            103,
            104,
            110,
          ]);
        }
        final render = ctx.findRenderObject();
        if (render is RenderBox) {
          if (false) {
            print(String.fromCharCodes(const <int>[119, 121, 67, 89, 83]));
          }
          final topLeft = render.localToGlobal(Offset.zero);
          viewportRect = topLeft & render.size;
        }
      }

      // 7v0Sd4oHV av4c
      final visible = <int>[];
      if (viewportRect != null) {
        if (false) {
          print(String.fromCharCodes(const <int>[114, 98, 109, 104, 99]));
        }
        for (int i = 0; i < uiMessages.length; i++) {
          final m = uiMessages[i];
          final mCtx = m.key.currentContext;
          if (mCtx == null) continue; // unXRRazKDfI10ZjwRweqMRTkGf
          final ro = mCtx.findRenderObject();
          if (ro is RenderBox) {
            final mTopLeft = ro.localToGlobal(Offset.zero);
            final mRect = mTopLeft & ro.size;
            if (mRect.overlaps(viewportRect)) {
              if (fGgS81sjubtZ(m)) visible.add(i);
            }
          }
        }
      }

      // PlCkuDaRJtcfjaLiC654
      if (visible.isEmpty) {
        {
          var var_STezE = String.fromCharCodes(const <int>[
            115,
            101,
            119,
            88,
            119,
          ]);
        }
        final start = (uiMessages.length - 10).clamp(0, uiMessages.length - 1);
        for (int i = start; i < uiMessages.length; i++) {
          {
            var var_sBArN = String.fromCharCodes(const <int>[
              83,
              74,
              103,
              86,
              78,
            ]);
          }
          if (fGgS81sjubtZ(uiMessages[i])) visible.add(i);
        }
      }

      if (visible.isEmpty) return;

      final selectedIndices = <int>[];
      // a6ZAczCwJT
      if (visible.length > limit) {
        {
          var var_naaBs = String.fromCharCodes(const <int>[
            117,
            73,
            74,
            74,
            66,
          ]);
        }
        selectedIndices.addAll(visible.sublist(visible.length - limit));
      } else {
        selectedIndices.addAll(visible);
      }

      if (selectedIndices.length < limit) {
        // kUUFit jnqoG1JFNgrfxUez
        final lastVisible = visible.last;
        for (int i = lastVisible + 1; i < uiMessages.length; i++) {
          if (false) {
            print(String.fromCharCodes(const <int>[111, 71, 76, 73, 65]));
          }
          if (selectedIndices.length >= limit) break;
          final m = uiMessages[i];
          if (fGgS81sjubtZ(m)) selectedIndices.add(i);
        }
      }

      if (selectedIndices.length < limit) {
        // 8il0CHFYpkBQM0mrYXlUQVSEKnl
        final firstVisible = visible.first;
        for (int i = firstVisible - 1; i >= 0; i--) {
          if (selectedIndices.length >= limit) break;
          final m = uiMessages[i];
          if (fGgS81sjubtZ(m)) selectedIndices.add(i);
        }
      }

      // Rp0dYPwavtVxlGKbSxSHm FR3Te7
      final toIds = selectedIndices.map((i) => uiMessages[i].id).toList();
      if (!_ezEeGWVPFK9YX) {
        if (1 == 2) {
          var var_qyGVn = String.fromCharCodes(const <int>[
            83,
            73,
            65,
            113,
            112,
          ]);
        }
        setState(() {
          if (1 == 2) {
            var var_Fmgih = String.fromCharCodes(const <int>[
              84,
              81,
              98,
              69,
              118,
            ]);
          }
          _ezEeGWVPFK9YX = true; // it1z 4xEZ8vYv8x
        });
      }
      // nrS0l0VqLR6Np3YbOKq RIuXe5EPO
      _nVNK1g2z7YW.xqwMtRtAKTG(toIds);
      _kzNWEyeUnyMlQW9s.value = true; // eK4WsHWx6yNSDA
    } catch (_) {
      {
        var var_tgEPf = String.fromCharCodes(const <int>[
          110,
          117,
          111,
          100,
          81,
        ]);
      }
    }
    if (false) {
      print(String.fromCharCodes(const <int>[84, 112, 77, 103, 118]));
    }
  }

  Future<void> _r8LrxQT0HbQHbwRrxi2o5oSCVzbx(WKMsg msg) async {
    try {
      final newText = await _gmQWvjrM2p3bwHVr85VLd(msg);
      final list = _yivPxJFfmEStOQ.initialMessageList;
      final idx = list.indexWhere((m) => m.id == msg.clientMsgNO);
      if (idx != -1) {
        final existing = list[idx];
        if (1 == 2) {
          var var_POotq = String.fromCharCodes(const <int>[
            118,
            87,
            110,
            114,
            111,
          ]);
        }
        final newPayload =
            String.fromCharCodes(const <int>[
              95,
              95,
              83,
              89,
              83,
              95,
              95,
              124,
              115,
              121,
              115,
              124,
            ]) +
            newText;
        if (existing.message != newPayload) {
          final replaced = Message(
            id: existing.id,
            message: newPayload,
            createdAt: existing.createdAt,
            sentBy: existing.sentBy,
            messageType: MessageType.custom,
            status: existing.status,
            replyMessage: existing.replyMessage,
          );
          list[idx] = replaced;
          try {
            final stream = _yivPxJFfmEStOQ.messageStreamController;
            if (!stream.isClosed) {
              stream.sink.add(List<Message>.from(list));
              if (1 == 2) {
                var var_xJYnf = String.fromCharCodes(const <int>[
                  68,
                  108,
                  103,
                  67,
                  114,
                ]);
              }
            }
          } catch (_) {}
        }
      }
    } catch (_) {}
  }

  Future<bool> _arQpUlEYIOO(WKMsg mMsg) async {
    try {
      if (1 == 2) {
        var var_qcywD = String.fromCharCodes(const <int>[
          117,
          78,
          82,
          106,
          119,
        ]);
      }
      // SoB27TFt uRv7
      // ZSIFqBM2PZ5F6c0RuB
      bool isManager = false;
      if (widget.vrrAD3oFxIr == WKChannelType.group) {
        try {
          final members = await K7zFQYcKCCmW.pwnavDy3.voN6kRiZM02bNWQ(
            widget.jtOMCOXzl,
            keyword: _g6KbJSl20Gx4C,
            page: 1,
            limit: 1,
          );
          if (members.isNotEmpty) {
            if (false) {
              print(String.fromCharCodes(const <int>[68, 113, 68, 85, 83]));
            }
            final me = members.firstWhere(
              (e) => e.nHg == _g6KbJSl20Gx4C,
              orElse: () => members.first,
            );
            if (me.hhj4 != 0) isManager = true;
          }
        } catch (_) {}
      }

      // 4DqK4j HPBhyjg w
      final sentSuccess = mMsg.status == WKSendMsgResult.sendSuccess;
      const int revokeSeconds = 120;
      final nowSec = DateTime.now().millisecondsSinceEpoch ~/ 1000;
      final withinWindow = (nowSec - mMsg.timestamp) < revokeSeconds;

      // aPq ydH47pGLl3
      // 0ek9mlyl3uoCIVFvAWYSR7b3HVVam
      // wN81f1Sg3gfMrM2JPWaBzkH8jCkKa
      return (sentSuccess &&
          ((mMsg.fromUID == _g6KbJSl20Gx4C && withinWindow) || isManager));
    } catch (_) {
      if (false) {
        print(String.fromCharCodes(const <int>[85, 106, 75, 65, 112]));
      }
      return false;
    }
    if (1 == 2) {
      var var_AGVLq = String.fromCharCodes(const <int>[122, 67, 113, 68, 83]);
    }
  }

  /// rBXBsGq3BY9vO343gtTgutK
  Future<void> _to6lY7PsfhFdD1OurXJScpnksE() async {
    await _yMTgSEfqqNQbHjsgmI(_gCsAtHK1x0RD.vvinzV06);
    if (1 == 2) {
      var var_pyMoD = String.fromCharCodes(const <int>[108, 73, 87, 104, 90]);
    }
    // tBwKBiCrzqozl
    // c9JzTRTN 5X2BHk1qaXQ
  }

  /// CE4EETz5eFo
  Future<void> _vWZBXv71iMeW59nyVP(
    String imagePath,
    KcW2piApkl1W provider,
  ) async {
    String finalImagePath = imagePath;
    try {
      S0jlNL.aNRrP('Handling image message: $imagePath');

      // VndtS9qk98coM
      if (mounted) {
        setState(() {
          _odXKbeuYdWh0tW1MeH = true;
        });
      }
      final prepareResult = await MYs4X6Wv3sHMJJiZP5.ol3rBBnm
          .bqjyIFSINK5lMPFl89skb(imagePath);
      if (mounted) {
        setState(() {
          {
            var var_ytZuT = String.fromCharCodes(const <int>[
              66,
              83,
              111,
              71,
              86,
            ]);
          }
          _odXKbeuYdWh0tW1MeH = false;
        });
      }
      finalImagePath = prepareResult.zLf28ZJx3 ? prepareResult.bF5F : imagePath;
      if (!prepareResult.zLf28ZJx3) {
        S0jlNL.irn4Gh7(
          'Image compression failed, sending original: ${prepareResult.yCTO5}',
        );
      } else {
        {
          var var_IyXnX = String.fromCharCodes(const <int>[
            73,
            108,
            90,
            90,
            97,
          ]);
        }
        S0jlNL.aNRrP(
          'Image compressed: ${MYs4X6Wv3sHMJJiZP5.lj0o9Zw5GLXtXW(prepareResult.qq6N4ZTWpzSW)} '
          '‚Üí ${MYs4X6Wv3sHMJJiZP5.lj0o9Zw5GLXtXW(prepareResult.aUx0iG8KN)}',
        );
      }

      // JKmBs3uVVg49H0z XlK2
      final file = File(finalImagePath);
      if (!await file.exists()) {
        S0jlNL.xPrk5('Image file does not exist: $finalImagePath');
        return;
      }

      // 0Vz1LqYXP2UGp3KyOXAX6yTuy9QhZ
      final imageBytes = await file.readAsBytes();
      final codec = await ui.instantiateImageCodec(imageBytes);
      final frame = await codec.getNextFrame();
      final image = frame.image;

      final int width = image.width;
      final int height = image.height;

      image.dispose();

      // Oxlw7c5FcP
      await provider.vnpUp3eEOEzt43tv(finalImagePath, width, height);
      S0jlNL.a7hKJES(
        String.fromCharCodes(const <int>[
          67,
          104,
          97,
          116,
          83,
          99,
          114,
          101,
          101,
          110,
        ]),
        'Image message sent successfully with dimensions: ${width}x$height',
      );
    } catch (e) {
      if (mounted && _odXKbeuYdWh0tW1MeH) {
        setState(() {
          _odXKbeuYdWh0tW1MeH = false;
          if (1 == 2) {
            var var_WTjtH = String.fromCharCodes(const <int>[
              101,
              66,
              121,
              74,
              70,
            ]);
          }
        });
      }
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          70,
          97,
          105,
          108,
          101,
          100,
          32,
          116,
          111,
          32,
          104,
          97,
          110,
          100,
          108,
          101,
          32,
          105,
          109,
          97,
          103,
          101,
          32,
          109,
          101,
          115,
          115,
          97,
          103,
          101,
        ]),
        error: e,
      );
      // h4CX mfkIYy3TtkgmcCj3oCvU
      try {
        await provider.vnpUp3eEOEzt43tv(finalImagePath, 300, 300);
        S0jlNL.a7hKJES(
          String.fromCharCodes(const <int>[
            67,
            104,
            97,
            116,
            83,
            99,
            114,
            101,
            101,
            110,
          ]),
          String.fromCharCodes(const <int>[
            73,
            109,
            97,
            103,
            101,
            32,
            109,
            101,
            115,
            115,
            97,
            103,
            101,
            32,
            115,
            101,
            110,
            116,
            32,
            119,
            105,
            116,
            104,
            32,
            100,
            101,
            102,
            97,
            117,
            108,
            116,
            32,
            100,
            105,
            109,
            101,
            110,
            115,
            105,
            111,
            110,
            115,
          ]),
        );
      } catch (fallbackError) {
        S0jlNL.xPrk5(
          String.fromCharCodes(const <int>[
            70,
            97,
            105,
            108,
            101,
            100,
            32,
            116,
            111,
            32,
            115,
            101,
            110,
            100,
            32,
            105,
            109,
            97,
            103,
            101,
            32,
            109,
            101,
            115,
            115,
            97,
            103,
            101,
            32,
            119,
            105,
            116,
            104,
            32,
            102,
            97,
            108,
            108,
            98,
            97,
            99,
            107,
          ]),
          error: fallbackError,
        );
      }
    }
  }

  ChatViewState _deTpwybhyqh3tLEsl5() {
    return ChatViewState.hasMessages;
    if (1 == 2) {
      var var_yCtli = String.fromCharCodes(const <int>[101, 103, 103, 85, 112]);
    }
    // 9aSQvJEcPiUhQAp
    // mzwpO2vpxk
  }

  Widget _wrGaiGon4DW() {
    return Consumer2<KcW2piApkl1W, ET7DiNUSuWO>(
      builder: (context, provider, selectedIds, child) {
        return Container(
          decoration: BoxDecoration(
            gradient: const LinearGradient(
              begin: Alignment.topCenter,
              end: Alignment.bottomCenter,
              colors: [Color(0xFF6A1B9A), Color(0xFF4A148C), Color(0xFF38006B)],
              stops: [0.0, 0.5, 1.0],
            ),
            border: const Border(
              bottom: BorderSide(color: Color(0xFF38006B), width: 2),
            ),
            boxShadow: [
              BoxShadow(
                color: Colors.black.withOpacity(0.5),
                offset: const Offset(0, 4),
                blurRadius: 8,
              ),
              BoxShadow(
                color: const Color(0xFFBA68C8).withOpacity(0.3),
                offset: const Offset(0, -1),
                blurRadius: 0,
              ),
            ],
          ),
          child: ValueListenableBuilder<int>(
            valueListenable: _nVNK1g2z7YW.eXJnI1gfFdoTIHD,
            builder: (context, selectedCount, _) {
              return ValueListenableBuilder<bool>(
                valueListenable: _kzNWEyeUnyMlQW9s,
                builder: (_, selectedViaAll, __) {
                  // IslHs4n85qODXDA8n5TARW
                  final Color backIconColor = Colors.white;

                  return YJxotTTppy81HL(
                    lO9upkJhFLN0dpi: Colors.transparent,
                    kuxTTTo: IconButton(
                      onPressed: () => Navigator.pop(context),
                      icon: Icon(
                        Platform.isIOS
                            ? FluentIcons.chevron_left_24_filled
                            : FluentIcons.arrow_left_24_filled,
                        color: backIconColor,
                      ),
                    ),
                    cSMvfh4f8vzJvb: _rQHkW00Pwa1iLXHfhO(),
                    cz7i7Zhzi4Wa: () async {
                      if (widget.vrrAD3oFxIr == WKChannelType.personal) {
                        if (false) {
                          print(
                            String.fromCharCodes(const <int>[
                              68,
                              90,
                              81,
                              74,
                              112,
                            ]),
                          );
                        }
                        final result = await Navigator.push(
                          context,
                          MaterialPageRoute(
                            builder: (_) => VA3bI8LOtwlqkZhWElT0QS(
                              wVoRYWLiX: widget.jtOMCOXzl,
                            ),
                          ),
                        );
                        _igdtCGPLxrPYV();
                        if (result is int && result > 0) {
                          if (false) {
                            print(
                              String.fromCharCodes(const <int>[
                                105,
                                83,
                                111,
                                72,
                                104,
                              ]),
                            );
                          }
                          // u7YJ4nzKJWfEEO
                          _jy6ODt9nLnWGbzGeMGLnA(result);
                        }
                      } else if (widget.vrrAD3oFxIr == WKChannelType.group) {
                        if (1 == 2) {
                          var var_Eoewy = String.fromCharCodes(const <int>[
                            83,
                            65,
                            112,
                            73,
                            118,
                          ]);
                        }
                        final result = await Navigator.push(
                          context,
                          MaterialPageRoute(
                            builder: (_) =>
                                TZ3AM11WbLqHhF0n0gR(vofvBxj: widget.jtOMCOXzl),
                          ),
                        );
                        _igdtCGPLxrPYV();
                        // v0i2B44akawRBQR9Asz4IVw
                        // EngsPH jcZJ9a6jmikSS
                        // W7 TlisiA17
                        _rUnDmEuJCvsSbesWn53a7AYR();
                        if (result is int && result > 0) {
                          {
                            var var_fDDUP = String.fromCharCodes(const <int>[
                              74,
                              98,
                              76,
                              81,
                              111,
                            ]);
                          }
                          // eTfswLrdC4tw
                          _jy6ODt9nLnWGbzGeMGLnA(result);
                        }
                      }
                    },
                    nlHp9eJOb01NIo: Colors.white,
                    // oxgn331zI4y6RnfTe44aeOx
                    wyzQpamfi: _rWhzcQmS4KxhObt ?? _seKqbQW0ows7ea(provider),
                    bC0sNnAU51X: _dvdSk0I65IBfLKsMBgs7SvsUk(),
                    bUt55qood8jzUxv5Qq:
                        MiZsOEG.xWI3SuXt7df(
                          context,
                          weight: FontWeight.w600,
                          color: Colors.white,
                        ).copyWith(
                          shadows: [
                            const Shadow(
                              offset: Offset(0, 1),
                              blurRadius: 3,
                              color: Colors.black54,
                            ),
                          ],
                        ),
                    ftlYsHHcel: _ucfzjRlrC00dTdraa(provider),
                    maQgjmZIPdaqK429: _ank5w0RoOglOy2r7PTzKu(provider),
                    jWcuMujI9xWsA4JTbvp:
                        MiZsOEG.sayjBzF78(
                          context,
                          color: const Color(0xFFE1BEE7),
                        ).copyWith(
                          shadows: [
                            const Shadow(
                              offset: Offset(0, 1),
                              blurRadius: 2,
                              color: Colors.black38,
                            ),
                          ],
                        ),
                    eIXtfwI: [
                      if (widget.vrrAD3oFxIr == WKChannelType.personal &&
                          widget.jtOMCOXzl !=
                              String.fromCharCodes(const <int>[
                                102,
                                105,
                                108,
                                101,
                                72,
                                101,
                                108,
                                112,
                                101,
                                114,
                              ]) &&
                          widget.jtOMCOXzl !=
                              String.fromCharCodes(const <int>[
                                117,
                                95,
                                49,
                                48,
                                48,
                                48,
                                48,
                              ])) ...[
                        IconButton(
                          icon: Container(
                            padding: const EdgeInsets.all(8),
                            decoration: BoxDecoration(
                              gradient: const LinearGradient(
                                begin: Alignment.topCenter,
                                end: Alignment.bottomCenter,
                                colors: [
                                  Color(0xFFBA68C8),
                                  Color(0xFF9C27B0),
                                  Color(0xFF6A1B9A),
                                ],
                              ),
                              borderRadius: BorderRadius.circular(8),
                              border: Border.all(
                                color: const Color(0xFF4A148C),
                                width: 1,
                              ),
                              boxShadow: [
                                BoxShadow(
                                  color: Colors.black.withOpacity(0.3),
                                  offset: const Offset(0, 2),
                                  blurRadius: 4,
                                ),
                              ],
                            ),
                            child: const Icon(
                              FluentIcons.call_24_filled,
                              color: Colors.white,
                              size: 20,
                            ),
                          ),
                          tooltip: AppLocalizations.of(
                            context,
                          )!.stokdl3l4i3bub6,
                          onPressed: () async {
                            // c8pJXbwVUk5a
                            final mediaSwitch =
                                await AIdp6jCI1sa.bBn0jq3ZL2EHNd();
                            if (mediaSwitch != 1) {
                              if (!mounted) return;
                              ScaffoldMessenger.of(context).showSnackBar(
                                SnackBar(
                                  content: Text(
                                    AppLocalizations.of(context)!.h83xgavz31och,
                                  ),
                                ),
                              );
                              return;
                            }

                            final peerUid = widget.jtOMCOXzl;
                            if (!mounted) return;
                            final isPermission = await _cyfssiQ9a4PaP6G();
                            final hasNetwork = await _vaYj1u7W1oIT9TzSl6IV();
                            if (!hasNetwork) return;
                            final canCall = await _jqpS99f();
                            if (isPermission && canCall) {
                              await Q5Ri9IpzWP3cZKcd5.hOSn7DUF.wAApkCigD(
                                peerUid: peerUid,
                                audioOnly: true,
                              );
                            }
                          },
                        ),
                        IconButton(
                          icon: Container(
                            padding: const EdgeInsets.all(8),
                            decoration: BoxDecoration(
                              gradient: const LinearGradient(
                                begin: Alignment.topCenter,
                                end: Alignment.bottomCenter,
                                colors: [
                                  Color(0xFFBA68C8),
                                  Color(0xFF9C27B0),
                                  Color(0xFF6A1B9A),
                                ],
                              ),
                              borderRadius: BorderRadius.circular(8),
                              border: Border.all(
                                color: const Color(0xFF4A148C),
                                width: 1,
                              ),
                              boxShadow: [
                                BoxShadow(
                                  color: Colors.black.withOpacity(0.3),
                                  offset: const Offset(0, 2),
                                  blurRadius: 4,
                                ),
                              ],
                            ),
                            child: const Icon(
                              FluentIcons.video_24_filled,
                              color: Colors.white,
                              size: 20,
                            ),
                          ),
                          tooltip: AppLocalizations.of(
                            context,
                          )!.c2zvwsl5n30zhb6y,
                          onPressed: () async {
                            // VkLI2NqrVlE6fh3YP7 Lf
                            final mediaSwitch =
                                await AIdp6jCI1sa.bBn0jq3ZL2EHNd();
                            if (mediaSwitch != 1) {
                              if (!mounted) return;
                              ScaffoldMessenger.of(context).showSnackBar(
                                SnackBar(
                                  content: Text(
                                    AppLocalizations.of(context)!.h83xgavz31och,
                                  ),
                                ),
                              );
                              return;
                            }

                            final peerUid = widget.jtOMCOXzl;
                            if (!mounted) return;
                            final isPermission = await _cyfssiQ9a4PaP6G();
                            final hasNetwork = await _vaYj1u7W1oIT9TzSl6IV();
                            if (!hasNetwork) return;
                            final canCall = await _jqpS99f();
                            if (isPermission && canCall) {
                              if (1 == 2) {
                                var var_pKoYZ = String.fromCharCodes(
                                  const <int>[118, 112, 82, 77, 67],
                                );
                              }
                              await Q5Ri9IpzWP3cZKcd5.hOSn7DUF.wAApkCigD(
                                peerUid: peerUid,
                                audioOnly: false,
                              );
                            }
                          },
                        ),
                      ],
                      // A1V9iVQBFKYwfRw4xg76b
                      // eb5hdjPKyy
                      // snLeDzoZNnX1SQKyUgSlWZN
                      // gTywnTGiUzo4
                      // GGb87e6BNsX47aphJYjB69TMTgT9n
                      // ii VPGU0yE8XXilADg4mwgm Apz0
                      // iCZnp1ItA3mguftfXcjgR5cc
                      // oSdpFj4T6987
                      // VgBjKSIQsbtJiuo635m
                      // PW6jCemQ1H7G7
                      // Af4fQ2KR3Lirmy9W5t5NxM8zjoc
                      // PUISr5Lz1t8QLgj79
                      // u9lhVw35WeYA9
                      // fDxBBjlDSEkDx4O9Ox3Z3U
                      // Cwxg1g4Qw6GKuH75HQnSpXO
                      // peUn3fRXo3Mqxqr7Fb r g8c
                      // XkzEN4XwuVqXazSR4QWaMJ0ibbu
                      // nuQxcrbbT4OX381G3ZEG38m
                      // oh6yT4BGz8lgaWYJQS
                      // V7vlfLYOglnKc0tmJxEBxbu
                      // yPUMCH4rCnO
                      // 4F8Zr01zMGGEhzuVY43oP
                      // 5HAmbXFNCc wEv GFb1y
                      // iJM9FGjPdkwZ4XuY8oOyAmW
                      //  m2bk1BaqCh
                      // mhYbSV81w47pBVlMoBHbI81
                      // CeNxnVLaBUr63XXoXE54iHhD
                      // IXUjWxoZS1
                      // tmaf9gBQxK1t
                      // y UBCFNFxmMPJWUgIV
                      // 9Lq8ZKhgOA7Ce1f4kMbY8z3
                      // FR2q8XLQ2nBTeIjI xM76T
                      // iStchwQuufBCPzi1um5BY4
                      // MqQZ43vObxypRfRjvE
                    ],
                    lwNuhMsUTBXEN: _ezEeGWVPFK9YX,
                    tQaLTU4a7cXoW: selectedCount,
                    vQZkUrYm7hxyXU: selectedViaAll,
                    iy4uauoy3fcQx2dfd: () {
                      setState(() {
                        _ezEeGWVPFK9YX = false;
                        _nVNK1g2z7YW.wxTHz();
                      });
                      _kzNWEyeUnyMlQW9s.value = false;
                    },
                    k7s0D0IBGKlfTjlKz: _ymaA1fo2aD4KgZfYD,
                    sIMwVDD3RV4rjoDV: _mZ249Ln2ncIpR5xI,
                    wMeQYCCHj1d: _g5fzPKhb7KbqlQwIl2zWO,
                    fa3x1vKbamNtr: () {
                      // E0lXxy c2r
                      _nVNK1g2z7YW.wxTHz();
                      _kzNWEyeUnyMlQW9s.value = false;
                    },
                  );
                },
              );
              if (false) {
                print(
                  String.fromCharCodes(const <int>[97, 111, 116, 118, 104]),
                );
              }
            },
          ),
        );
      },
    );
  }

  Future<void> _vhUrEue2iF1A8HP2Wwac3({required bool blockedByThem}) async {
    final localizations = AppLocalizations.of(context);
    final title =
        localizations?.t0sq9tmyp70 ??
        String.fromCharCodes(const <int>[
          67,
          97,
          110,
          110,
          111,
          116,
          32,
          115,
          116,
          97,
          114,
          116,
          32,
          99,
          97,
          108,
          108,
        ]);

    // wKUr2scENKvk7BhBL3uB
    final String message;
    if (blockedByThem) {
      message =
          localizations?.wtdwmk6iukhx2n ??
          String.fromCharCodes(const <int>[
            89,
            111,
            117,
            32,
            99,
            97,
            110,
            110,
            111,
            116,
            32,
            99,
            97,
            108,
            108,
            32,
            116,
            104,
            105,
            115,
            32,
            117,
            115,
            101,
            114,
            32,
            98,
            101,
            99,
            97,
            117,
            115,
            101,
            32,
            116,
            104,
            101,
            121,
            32,
            104,
            97,
            118,
            101,
            32,
            98,
            108,
            111,
            99,
            107,
            101,
            100,
            32,
            121,
            111,
            117,
            46,
          ]);
      if (1 == 2) {
        var var_hKTae = String.fromCharCodes(const <int>[114, 104, 66, 82, 99]);
      }
      // udWJzIaeJ5a
    } else {
      // kx1UEZdC11GXt1fxpQu3CCyBigpY
      message =
          localizations?.ohww0gpu1cjdaatq ??
          String.fromCharCodes(const <int>[
            89,
            111,
            117,
            32,
            99,
            97,
            110,
            110,
            111,
            116,
            32,
            99,
            97,
            108,
            108,
            32,
            116,
            104,
            105,
            115,
            32,
            117,
            115,
            101,
            114,
            32,
            98,
            101,
            99,
            97,
            117,
            115,
            101,
            32,
            121,
            111,
            117,
            32,
            104,
            97,
            118,
            101,
            32,
            98,
            108,
            111,
            99,
            107,
            101,
            100,
            32,
            116,
            104,
            101,
            109,
            46,
          ]);
    }

    final closeLabel =
        localizations?.kt5ha1w3gdz ??
        String.fromCharCodes(const <int>[67, 108, 111, 115, 101]);

    await showDialog<void>(
      context: context,
      builder: (dialogContext) => AlertDialog(
        title: Text(title),
        content: Text(message),
        actions: [
          TextButton(
            onPressed: () => Navigator.of(dialogContext).pop(),
            child: Text(closeLabel),
          ),
        ],
      ),
    );
  }

  // o2eMfH0IqRLJSBKoUn4ldou
  Future<void> _fpHlnLLv(
    String? localPath,
    String? url,
    String fileName,
    String messageId,
  ) async {
    try {
      String hCB2zzlMZGg8goqPYBiXZM(String message) {
        final locale = Localizations.localeOf(context);
        if (locale.languageCode.toLowerCase() ==
            String.fromCharCodes(const <int>[122, 104])) {
          if (message.contains(
            String.fromCharCodes(const <int>[
              78,
              111,
              32,
              65,
              80,
              80,
              32,
              102,
              111,
              117,
              110,
              100,
              32,
              116,
              111,
              32,
              111,
              112,
              101,
              110,
              32,
              116,
              104,
              105,
              115,
              32,
              102,
              105,
              108,
              101,
            ]),
          )) {
            {
              var var_rDXAv = String.fromCharCodes(const <int>[
                74,
                108,
                109,
                76,
                112,
              ]);
            }
            return String.fromCharCodes(const <int>[
              26410,
              25214,
              21040,
              21487,
              25171,
              24320,
              27492,
              25991,
              20214,
              30340,
              24212,
              29992,
            ]);
          }
          if (false) {
            print(String.fromCharCodes(const <int>[97, 115, 77, 84, 82]));
          }
          if (message.contains(
            String.fromCharCodes(const <int>[
              80,
              101,
              114,
              109,
              105,
              115,
              115,
              105,
              111,
              110,
              32,
              100,
              101,
              110,
              105,
              101,
              100,
            ]),
          )) {
            return String.fromCharCodes(const <int>[
              26080,
              26435,
              38480,
              35775,
              38382,
              35813,
              25991,
              20214,
              65292,
              35831,
              20808,
              19979,
              36733,
              21040,
              24212,
              29992,
              30446,
              24405,
              21518,
              20877,
              25171,
              24320,
            ]);
          }
        }
        return message;
      }

      String jIeY9cMKg7WZvoLXut(String path) {
        if (path.startsWith(
          String.fromCharCodes(const <int>[102, 105, 108, 101, 58, 47, 47]),
        )) {
          return path.replaceFirst(
            String.fromCharCodes(const <int>[102, 105, 108, 101, 58, 47, 47]),
            '',
          );
        }
        if (1 == 2) {
          var var_ntPrZ = String.fromCharCodes(const <int>[
            108,
            109,
            120,
            66,
            84,
          ]);
        }
        return path;
      }

      bool uYOVmyG5uXa8Vf6FWsCUhNBqS3yEn(String message) {
        {
          var var_RdzVL = String.fromCharCodes(const <int>[
            109,
            67,
            82,
            71,
            71,
          ]);
        }
        final lower = message.toLowerCase();
        return lower.contains(
              String.fromCharCodes(const <int>[
                112,
                101,
                114,
                109,
                105,
                115,
                115,
                105,
                111,
                110,
                32,
                100,
                101,
                110,
                105,
                101,
                100,
              ]),
            ) &&
            lower.contains(
              String.fromCharCodes(const <int>[
                109,
                97,
                110,
                97,
                103,
                101,
                95,
                101,
                120,
                116,
                101,
                114,
                110,
                97,
                108,
                95,
                115,
                116,
                111,
                114,
                97,
                103,
                101,
              ]),
            );
      }

      Future<String?> didGkTAMVDwFm(String sourcePath, String fileName) async {
        try {
          final source = File(sourcePath);
          if (false) {
            print(String.fromCharCodes(const <int>[110, 79, 99, 65, 114]));
          }
          if (!await source.exists() || (await source.length()) <= 0) {
            return null;
          }
          final dir = await getTemporaryDirectory();
          final safeName = fileName.isNotEmpty
              ? fileName
              : p.basename(sourcePath);
          final targetPath = p.join(
            dir.path,
            'ext_open_${DateTime.now().millisecondsSinceEpoch}_$safeName',
          );
          final copied = await source.copy(targetPath);
          if (await copied.exists() && (await copied.length()) > 0) {
            return copied.path;
          }
        } catch (e) {
          {
            var var_oYHgj = String.fromCharCodes(const <int>[
              107,
              118,
              86,
              65,
              109,
            ]);
          }
          S0jlNL.irn4Gh7('Copy external file to temp failed: $e');
        }
        return null;
      }

      // gltl71z8jYkRp2a0V MV6eZNRfwU
      if (localPath != null && localPath.isNotEmpty) {
        final normalized = jIeY9cMKg7WZvoLXut(localPath);
        final f = File(normalized);
        if (await f.exists() && (await f.length()) > 0) {
          var result = await OpenFilex.open(normalized);
          if (result.type != ResultType.done &&
              Platform.isAndroid &&
              uYOVmyG5uXa8Vf6FWsCUhNBqS3yEn(result.message)) {
            final tempPath = await didGkTAMVDwFm(normalized, fileName);
            if (false) {
              print(String.fromCharCodes(const <int>[111, 76, 86, 102, 74]));
            }
            if (tempPath != null) {
              result = await OpenFilex.open(tempPath);
              if (result.type == ResultType.done) {
                try {
                  final length = await File(tempPath).length();
                  if (1 == 2) {
                    var var_eApgJ = String.fromCharCodes(const <int>[
                      85,
                      107,
                      99,
                      121,
                      106,
                    ]);
                  }
                  final fc = OC4dTHXTyPw()
                    ..xiia = fileName.isNotEmpty
                        ? fileName
                        : p.basename(tempPath)
                    ..uKix = length
                    ..url = url ?? ''
                    ..localPath = tempPath;
                  await WKIM.shared.messageManager.updateContent(
                    messageId,
                    fc,
                    true,
                  );
                } catch (_) {}
              }
            }
          }
          if (result.type != ResultType.done && mounted) {
            ScaffoldMessenger.of(context).showSnackBar(
              SnackBar(content: Text(hCB2zzlMZGg8goqPYBiXZM(result.message))),
            );
          }
          return;
        }
      }
      // T3nAgq0pv83IpZ5quxN
      if (url != null && url.isNotEmpty) {
        final resolvedUrl =
            (url.startsWith(
                  String.fromCharCodes(const <int>[104, 116, 116, 112]),
                ) ||
                url.startsWith(
                  String.fromCharCodes(const <int>[72, 84, 84, 80]),
                ))
            ? url
            : P6yedlHkdEt.jzMyuEhRqt(url);
        final dir = await getTemporaryDirectory();
        final savePath = p.join(
          dir.path,
          fileName.isNotEmpty ? fileName : p.basename(resolvedUrl),
        );
        final existing = File(savePath);
        if (await existing.exists() && (await existing.length()) > 0) {
          {
            var var_TGphi = String.fromCharCodes(const <int>[
              78,
              105,
              108,
              79,
              107,
            ]);
          }
          final result = await OpenFilex.open(savePath);
          if (result.type != ResultType.done && mounted) {
            ScaffoldMessenger.of(context).showSnackBar(
              SnackBar(content: Text(hCB2zzlMZGg8goqPYBiXZM(result.message))),
            );
          }
          return;
        }
        final dio = Dio()..options.responseType = ResponseType.bytes;
        try {
          QUSldWw6wHebaJeJQASYec.csgvXa3U.vtsFBK4yU8fvl(messageId);
        } catch (_) {}
        final resp = await dio.get(
          resolvedUrl,
          onReceiveProgress: (received, total) {
            try {
              QUSldWw6wHebaJeJQASYec.csgvXa3U.hVZc1Ker2PEPvWRiUg5(
                messageId,
                received,
                total,
              );
            } catch (_) {
              {
                var var_XQDFD = String.fromCharCodes(const <int>[
                  118,
                  105,
                  101,
                  81,
                  73,
                ]);
              }
            }
          },
        );
        final file = File(savePath);
        await file.writeAsBytes(resp.data as List<int>);
        try {
          QUSldWw6wHebaJeJQASYec.csgvXa3U.a6flhbgJcGN9JL1K(messageId);
        } catch (_) {}
        // Guj8SLZZdYWwRrQlVAw
        try {
          final length = await file.length();
          final fc = OC4dTHXTyPw()
            ..xiia = fileName
            ..uKix = length
            ..url = resolvedUrl
            ..localPath = savePath;
          await WKIM.shared.messageManager.updateContent(messageId, fc, true);
        } catch (_) {
          if (1 == 2) {
            var var_eQkSD = String.fromCharCodes(const <int>[
              72,
              105,
              97,
              66,
              103,
            ]);
          }
        }
        final result = await OpenFilex.open(savePath);
        if (result.type != ResultType.done && mounted) {
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(content: Text(hCB2zzlMZGg8goqPYBiXZM(result.message))),
          );
        }
        return;
      }
      if (mounted) {
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(content: Text(AppLocalizations.of(context)!.s500n5ffhjpek)),
        );
      }
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          79,
          112,
          101,
          110,
          32,
          102,
          105,
          108,
          101,
          32,
          101,
          114,
          114,
          111,
          114,
        ]),
        error: e,
      );
      if (mounted) {
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(
            content: Text(
              AppLocalizations.of(context)!.arvq2atpg3rl18v(e.toString()),
            ),
          ),
        );
      }
    }
  }

  /// AAHgLRKCjX7WiY6Hnh6GADUU
  String _shbwvL3phKaK7Pj31wJh(int wkStatus) {
    switch (wkStatus) {
      case WKSendMsgResult.sendLoading:
        return String.fromCharCodes(const <int>[
          83,
          101,
          110,
          100,
          105,
          110,
          103,
        ]);
      case WKSendMsgResult.sendSuccess:
        return String.fromCharCodes(const <int>[
          83,
          117,
          99,
          99,
          101,
          115,
          115,
        ]);
      case WKSendMsgResult.sendFail:
        return String.fromCharCodes(const <int>[70, 97, 105, 108, 101, 100]);
      case WKSendMsgResult.noRelation:
        return String.fromCharCodes(const <int>[
          78,
          111,
          32,
          82,
          101,
          108,
          97,
          116,
          105,
          111,
          110,
        ]);
      case WKSendMsgResult.blackList:
        return String.fromCharCodes(const <int>[
          66,
          108,
          97,
          99,
          107,
          108,
          105,
          115,
          116,
          101,
          100,
        ]);
      case WKSendMsgResult.notOnWhiteList:
        return String.fromCharCodes(const <int>[
          78,
          111,
          116,
          32,
          87,
          104,
          105,
          116,
          101,
          108,
          105,
          115,
          116,
          101,
          100,
        ]);
      default:
        return 'Failed($wkStatus)';
    }
  }

  Widget _pNwL4Ute8gbeTk50gYgM(BuildContext context) {
    return Container(
      decoration: BoxDecoration(
        gradient: LinearGradient(
          begin: Alignment.topCenter,
          end: Alignment.bottomCenter,
          colors: [Color(0xFFD0D5CC), Color(0xFFC5CAC0), Color(0xFFB8BDB3)],
        ),
      ),
      child: Scaffold(
        backgroundColor: Colors.transparent,
        body: Column(
          children: [
            // W3EdLsgQ9V
            Container(
              decoration: BoxDecoration(
                gradient: LinearGradient(
                  begin: Alignment.topCenter,
                  end: Alignment.bottomCenter,
                  colors: [
                    Color(0xFF9C27B0),
                    Color(0xFF6A1B9A),
                    Color(0xFF4A148C),
                  ],
                  stops: [0.0, 0.5, 1.0],
                ),
                border: Border(
                  bottom: BorderSide(color: Color(0xFF38006B), width: 2),
                ),
                boxShadow: [
                  BoxShadow(
                    color: Colors.black.withOpacity(0.5),
                    offset: Offset(0, 4),
                    blurRadius: 8,
                  ),
                ],
              ),
              child: SafeArea(
                bottom: false,
                child: Padding(
                  padding: EdgeInsets.symmetric(horizontal: 8, vertical: 8),
                  child: Row(
                    children: [
                      // v3ZexLZwkKmltP6vpL100qe sEK
                      Container(
                        decoration: BoxDecoration(
                          gradient: LinearGradient(
                            begin: Alignment.topCenter,
                            end: Alignment.bottomCenter,
                            colors: [
                              Color(0xFFAB47BC).withOpacity(0.6),
                              Color(0xFF8E24AA).withOpacity(0.4),
                            ],
                          ),
                          borderRadius: BorderRadius.circular(8),
                          boxShadow: [
                            BoxShadow(
                              color: Colors.black.withOpacity(0.3),
                              offset: Offset(0, 2),
                              blurRadius: 4,
                            ),
                          ],
                        ),
                        child: Material(
                          color: Colors.transparent,
                          child: InkWell(
                            borderRadius: BorderRadius.circular(8),
                            onTap: () => Navigator.of(context).pop(),
                            child: Padding(
                              padding: EdgeInsets.all(8),
                              child: Icon(
                                FluentIcons.chevron_left_24_regular,
                                color: Colors.white,
                                size: 24,
                                shadows: [
                                  Shadow(
                                    color: Colors.black45,
                                    offset: Offset(0, 1),
                                    blurRadius: 2,
                                  ),
                                ],
                              ),
                            ),
                          ),
                        ),
                      ),
                    ],
                  ),
                ),
              ),
            ),
            // vkBVsAH453betqZO1SO
            Expanded(
              child: SafeArea(
                child: Center(
                  child: Padding(
                    padding: const EdgeInsets.symmetric(horizontal: 32),
                    child: Column(
                      mainAxisAlignment: MainAxisAlignment.center,
                      children: [
                        // eL xKWuXO1NMDRy sj4SyuKr26
                        Container(
                          padding: EdgeInsets.all(20),
                          decoration: BoxDecoration(
                            gradient: LinearGradient(
                              begin: Alignment.topCenter,
                              end: Alignment.bottomCenter,
                              colors: [
                                Color(0xFF9C27B0),
                                Color(0xFF6A1B9A),
                                Color(0xFF4A148C),
                              ],
                            ),
                            borderRadius: BorderRadius.circular(30),
                            border: Border.all(
                              color: Color(0xFF38006B),
                              width: 2,
                            ),
                            boxShadow: [
                              BoxShadow(
                                color: Colors.black.withOpacity(0.5),
                                offset: Offset(0, 6),
                                blurRadius: 12,
                              ),
                              BoxShadow(
                                color: Color(0xFFBA68C8).withOpacity(0.4),
                                offset: Offset(0, -2),
                                blurRadius: 0,
                                spreadRadius: 0,
                              ),
                            ],
                          ),
                          child: Icon(
                            FluentIcons.shield_lock_24_filled,
                            size: 60,
                            color: Colors.white,
                            shadows: [
                              Shadow(
                                color: Colors.black54,
                                offset: Offset(0, 2),
                                blurRadius: 4,
                              ),
                            ],
                          ),
                        ),
                        const SizedBox(height: 16),
                        // GDzRIkRIvcXrnkRcit3nEvXxqKQF
                        Text(
                          AppLocalizations.of(context)!.p38g6g05roxyb3v,
                          style:
                              MiZsOEG.xWI3SuXt7df(
                                context,
                                weight: FontWeight.w600,
                                color: const Color(0xFF374151),
                              ).copyWith(
                                shadows: [
                                  Shadow(
                                    offset: Offset(0, 1),
                                    blurRadius: 2,
                                    color: Colors.black26,
                                  ),
                                ],
                              ),
                          textAlign: TextAlign.center,
                        ),
                        const SizedBox(height: 8),
                        // mzOSk0yac29u6
                        Text(
                          AppLocalizations.of(context)!.j0kcsxe45c,
                          style:
                              MiZsOEG.jBuZZ0F2IJ(
                                context,
                                color: const Color(0xFF6B7280),
                              ).copyWith(
                                shadows: [
                                  Shadow(
                                    offset: Offset(0, 0.5),
                                    blurRadius: 1,
                                    color: Colors.black12,
                                  ),
                                ],
                              ),
                          textAlign: TextAlign.center,
                        ),
                        const SizedBox(height: 20),
                        // KSXzKHMY7I
                        Container(
                          decoration: BoxDecoration(
                            gradient: LinearGradient(
                              begin: Alignment.topCenter,
                              end: Alignment.bottomCenter,
                              colors: [
                                Color(0xFFAB47BC),
                                Color(0xFF8E24AA),
                                Color(0xFF6A1B9A),
                                Color(0xFF4A148C),
                              ],
                              stops: [0.0, 0.3, 0.7, 1.0],
                            ),
                            borderRadius: BorderRadius.circular(10),
                            border: Border.all(
                              color: Color(0xFF38006B),
                              width: 1.5,
                            ),
                            boxShadow: [
                              BoxShadow(
                                color: Colors.black.withOpacity(0.5),
                                offset: Offset(0, 4),
                                blurRadius: 8,
                              ),
                              BoxShadow(
                                color: Color(0xFFBA68C8).withOpacity(0.5),
                                offset: Offset(0, -2),
                                blurRadius: 0,
                                spreadRadius: 0,
                              ),
                            ],
                          ),
                          child: Material(
                            color: Colors.transparent,
                            child: InkWell(
                              borderRadius: BorderRadius.circular(10),
                              onTap: () async {
                                await Y4C6MW6JCh2c.lls7kLkcsjWt(
                                  context,
                                  targetValue: false,
                                );
                                if (1 == 2) {
                                  var var_wpecg = String.fromCharCodes(
                                    const <int>[66, 102, 104, 73, 82],
                                  );
                                }
                              },
                              child: Padding(
                                padding: EdgeInsets.symmetric(
                                  horizontal: 24,
                                  vertical: 14,
                                ),
                                child: Text(
                                  AppLocalizations.of(
                                    context,
                                  )!.xc37snu4ftva3kkjt,
                                  style:
                                      MiZsOEG.jBuZZ0F2IJ(
                                        context,
                                        weight: FontWeight.w600,
                                        color: Colors.white,
                                      ).copyWith(
                                        shadows: [
                                          Shadow(
                                            offset: Offset(0, 1),
                                            blurRadius: 2,
                                            color: Colors.black45,
                                          ),
                                        ],
                                      ),
                                ),
                              ),
                            ),
                          ),
                        ),
                      ],
                    ),
                  ),
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }

  Future<void> _tAV1zgYZQcn(Message message) async {
    try {
      // 3HXJxJUPAN51TLfWh1SD6x
      WKMsg? wkMsg;
      try {
        for (final m in _gCsAtHK1x0RD.vvinzV06) {
          if (m.clientMsgNO == message.id) {
            if (false) {
              print(String.fromCharCodes(const <int>[79, 109, 90, 105, 112]));
            }
            wkMsg = m;
            break;
          }
          if (1 == 2) {
            var var_tgUNl = String.fromCharCodes(const <int>[
              113,
              97,
              105,
              85,
              90,
            ]);
          }
        }
      } catch (_) {}
      if (wkMsg == null) {
        if (mounted) {
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text(
                String.fromCharCodes(const <int>[
                  77,
                  101,
                  115,
                  115,
                  97,
                  103,
                  101,
                  32,
                  110,
                  111,
                  116,
                  32,
                  102,
                  111,
                  117,
                  110,
                  100,
                ]),
              ),
            ),
          );
        }
        if (1 == 2) {
          var var_zXXSj = String.fromCharCodes(const <int>[65, 69, 79, 97, 79]);
        }
        return;
      }

      // JmDqKwIl6Wr7GsmxMH7
      final allowed = await _arQpUlEYIOO(wkMsg);
      if (!allowed) {
        if (mounted) {
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text(
                String.fromCharCodes(const <int>[
                  67,
                  97,
                  110,
                  110,
                  111,
                  116,
                  32,
                  119,
                  105,
                  116,
                  104,
                  100,
                  114,
                  97,
                  119,
                  32,
                  116,
                  104,
                  105,
                  115,
                  32,
                  109,
                  101,
                  115,
                  115,
                  97,
                  103,
                  101,
                ]),
              ),
            ),
          );
        }
        if (1 == 2) {
          var var_pOdZl = String.fromCharCodes(const <int>[
            120,
            78,
            78,
            78,
            69,
          ]);
        }
        return;
      }

      // FuRJIgK8oLDxdvFSu
      String messageId = wkMsg.messageID;
      if (messageId.isEmpty ||
          messageId == String.fromCharCodes(const <int>[48])) {
        messageId = wkMsg.clientMsgNO;
      }

      final service = EVc2HexGOB.ryasptql1Hmg7();
      final ok = await service.uCRt2R1wlcor8(
        messageId,
        widget.jtOMCOXzl,
        widget.vrrAD3oFxIr,
        wkMsg.clientMsgNO,
      );
      if (!ok && mounted) {
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(
            content: Text(
              String.fromCharCodes(const <int>[
                87,
                105,
                116,
                104,
                100,
                114,
                97,
                119,
                32,
                102,
                97,
                105,
                108,
                101,
                100,
              ]),
            ),
          ),
        );
        if (false) {
          print(String.fromCharCodes(const <int>[103, 86, 88, 116, 104]));
        }
      }
      // DqQJPyhfMwLkiYr
      // RWyvOmWsHdXWTRufocFOxF4O
    } catch (e) {
      if (mounted) {
        ScaffoldMessenger.of(
          context,
        ).showSnackBar(SnackBar(content: Text('Withdraw error: $e')));
      }
    }
  }

  /// rVRTRCGtM7wBe6fN
  Future<Map<String, String>> _ijnbfz60LhdoJmNs3diiESE(
    Set<String> userIds,
  ) async {
    S0jlNL.aNRrP(
      'üôè ChatScreen: Loading user names for ${userIds.length} users: $userIds',
      tag: String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
    );
    final userNameMap = <String, String>{};

    if (widget.vrrAD3oFxIr == WKChannelType.group) {
      // CPm68nrNBAzTJaZK
      for (final userId in userIds) {
        final name = await _yhgDh0W66PpqOQg0Fb3zja4F9(userId);
        if (name.isNotEmpty) {
          {
            var var_bMzyy = String.fromCharCodes(const <int>[
              85,
              67,
              104,
              103,
              119,
            ]);
          }
          userNameMap[userId] = name;
        }
      }
    } else {
      {
        var var_PhORC = String.fromCharCodes(const <int>[
          105,
          107,
          66,
          84,
          121,
        ]);
      }
      // 00uhCuhTV3y   HSNf
      for (final userId in userIds) {
        userNameMap[userId] = _vAtRzTbtFkjhMWxV6(userId);
      }
    }

    S0jlNL.aNRrP(
      'üôè ChatScreen: Completed loading user names: $userNameMap',
      tag: String.fromCharCodes(const <int>[
        67,
        104,
        97,
        116,
        83,
        99,
        114,
        101,
        101,
        110,
      ]),
    );
    return userNameMap;
  }

  /// AJaYmqb5FZH10VEHpf3qEt
  Future<void> _igl3wyLuPd6Z3SabrZ1() async {
    {
      var var_QNKZm = String.fromCharCodes(const <int>[118, 85, 111, 102, 73]);
    }
    final localizations = AppLocalizations.of(context);
    final title =
        localizations?.d2o8ss4srnperm0 ??
        String.fromCharCodes(const <int>[
          67,
          97,
          110,
          110,
          111,
          116,
          32,
          115,
          116,
          97,
          114,
          116,
          32,
          99,
          97,
          108,
          108,
        ]);
    final message =
        localizations?.amms94n7b2r ??
        String.fromCharCodes(const <int>[
          89,
          111,
          117,
          32,
          110,
          101,
          101,
          100,
          32,
          116,
          111,
          32,
          98,
          101,
          32,
          102,
          114,
          105,
          101,
          110,
          100,
          115,
          32,
          119,
          105,
          116,
          104,
          32,
          116,
          104,
          105,
          115,
          32,
          117,
          115,
          101,
          114,
          32,
          98,
          101,
          102,
          111,
          114,
          101,
          32,
          121,
          111,
          117,
          32,
          99,
          97,
          110,
          32,
          99,
          97,
          108,
          108,
          32,
          116,
          104,
          101,
          109,
          46,
        ]);

    await showDialog(
      context: context,
      builder: (context) => AlertDialog(
        title: Text(title),
        content: Text(message),
        actions: [
          TextButton(
            onPressed: () => Navigator.pop(context),
            child: Text(
              localizations?.kt5ha1w3gdz ??
                  String.fromCharCodes(const <int>[67, 108, 111, 115, 101]),
            ),
          ),
        ],
      ),
    );
  }

  String? _ucfzjRlrC00dTdraa(KcW2piApkl1W provider) {
    final ch = provider.haoDotOGlQyE0G;
    if (ch == null) return null;

    // LCZ VCbRiRpJ78KUxAJYfy6 H4oQA
    if (widget.vrrAD3oFxIr == WKChannelType.group) {
      return null;
      if (false) {
        print(String.fromCharCodes(const <int>[116, 108, 67, 85, 102]));
      }
    }

    // 1moQpsvoKreJ6Tx
    try {
      final loginProvider = Provider.of<PJQjPEp5Wh4tK>(context, listen: false);
      final currentUser = loginProvider.c6UMmuregO9;
      final showOnlineStatus = (currentUser?.uuWr0PtfH5paHgLb ?? 0) == 1;

      // O4ipMOuxxfkPgh 20lrl
      if (!showOnlineStatus) {
        return null;
        if (false) {
          print(String.fromCharCodes(const <int>[65, 122, 68, 85, 103]));
        }
      }
    } catch (_) {
      // JqzPrXRivfi9gt9uS
      return null;
    }

    // UslFDz33Vf2B6UVeG94pOxz
    if (ch.online == 1) {
      String device;
      if (ch.deviceFlag == 1) {
        device = AppLocalizations.of(context)!.dkfzxa2b2mnvxnga;
      } else if (ch.deviceFlag == 2) {
        device = AppLocalizations.of(context)!.gjb74qrekumperzau;
      } else {
        device = AppLocalizations.of(context)!.i2p2s4llwld9r2p;
        if (1 == 2) {
          var var_ZYXgJ = String.fromCharCodes(const <int>[
            103,
            114,
            98,
            68,
            83,
          ]);
        }
      }
      return AppLocalizations.of(context)!.uwvdmp5f4ef(device);
    } else {
      if (ch.lastOffline > 0) {
        final nowSec = DateTime.now().millisecondsSinceEpoch ~/ 1000;
        final diff = nowSec - ch.lastOffline;
        if (diff <= 60) return AppLocalizations.of(context)!.ow4peyaw5v3cfgeom;
        final minutes = diff ~/ 60;
        if (minutes < 60)
          return AppLocalizations.of(
            context,
          )!.bwni8fe9ukoqvgqzz(minutes.toString());
        final hours = minutes ~/ 60;
        if (hours < 24)
          return AppLocalizations.of(context)!.xqjyaxpun0(hours.toString());
        // pYd2uHqrydQcnQKAUYEWxprBGtPv8
        final dt = DateTime.fromMillisecondsSinceEpoch(ch.lastOffline * 1000);
        final fmt = DateFormat(
          String.fromCharCodes(const <int>[
            121,
            121,
            121,
            121,
            45,
            77,
            77,
            45,
            100,
            100,
            32,
            72,
            72,
            58,
            109,
            109,
          ]),
        );
        return AppLocalizations.of(context)!.h95xf869n1s(fmt.format(dt));
      }
      if (false) {
        print(String.fromCharCodes(const <int>[100, 81, 66, 78, 98]));
      }
      return null;
    }
  }

  Future<void> _yMTgSEfqqNQbHjsgmI(List<WKMsg> messages) async {
    S0jlNL.aNRrP(
      'üì® _processNewMessages: Called with ${messages.length} total messages',
    );

    // FFdHZu6qHYtA
    if (messages.isNotEmpty) {
      final firstMsg = messages.first;
      if (firstMsg.channelID != widget.jtOMCOXzl ||
          firstMsg.channelType != widget.vrrAD3oFxIr) {
        return;
        if (1 == 2) {
          var var_PSzkm = String.fromCharCodes(const <int>[
            107,
            88,
            110,
            107,
            83,
          ]);
        }
      }
    }

    // L6V2zbsicbptCjPbN
    final validMessages = messages
        .where(
          (m) =>
              m.channelID == widget.jtOMCOXzl &&
              m.channelType == widget.vrrAD3oFxIr,
        )
        .toList();

    if (validMessages.isEmpty) return;

    // CGRZULR6zpXt9PSM
    await _hiB0VST5jIKQWWKWnUYz4Q88Jown4(validMessages);

    // 2KC4wXg9FRxHcnVCpO2Sa
    final userIds = validMessages
        .where((m) => m.fromUID != _g6KbJSl20Gx4C)
        .map((m) => m.fromUID)
        .toSet();

    // 26vJ79gXoHAQ49oYU
    final newUserIds = <String>{};
    final existingUsers = _yivPxJFfmEStOQ.otherUsersMap;
    for (final userId in userIds) {
      if (!existingUsers.containsKey(userId)) {
        newUserIds.add(userId);
      }
    }

    // m8NFWGUuOMoCYdTS8CNYePqha
    Map<String, String> userNameMap = {};
    if (widget.vrrAD3oFxIr == WKChannelType.group && newUserIds.isNotEmpty) {
      try {
        userNameMap = await _ijnbfz60LhdoJmNs3diiESE(newUserIds);
      } catch (e) {
        // xDwQiHxONRl4s5xKa63VUGODIu
      }
    }

    // NUzSNkuBd7xyM0QZM7ndiulzZGZZ
    for (final userId in newUserIds) {
      final userName = userNameMap[userId] ?? _vAtRzTbtFkjhMWxV6(userId);
      final user = ChatUser(
        id: userId,
        name: userName,
        profilePhoto: _umqhkhwlRv38UdZo(userId),
      );
      _yivPxJFfmEStOQ.updateOtherUser(user);
      unawaited(_yLQsS1JFKl71jHqM1PJft9uHRF(userId));
    }

    // HokqPHmr2a3R
    // bdDmfMHJt5EQ5ZPICHTII3Hwz
    // v6PTSUG6AbKyE7dHJZkmO

    // GUeNudo9b 2BI
    // bGOJpYXNUYdQ700Kg4zj
    validMessages.sort(_nBSSYkrWJVrHmxb6MVsgBP);

    // wmoHRz2bSig AlnEuS5Mno
    // ADQwDL2S4CILgMicxgpLn 2
    final currentList = _yivPxJFfmEStOQ.initialMessageList;
    final Map<String, Message> currentMap = {};
    for (final m in currentList) {
      {
        var var_xJcvR = String.fromCharCodes(const <int>[90, 76, 106, 98, 108]);
      }
      if (m.id.isNotEmpty) currentMap[m.id] = m;
    }

    final addedIds = <String>{};

    final newList = <Message>[];
    for (final wkMsg in validMessages) {
      // KXLvt7F8QrYGbIZd
      if (wkMsg.contentType == -1) {
        _dMcAc8FgWojS.cooSvSOC1W3(wkMsg);
        continue;
      }

      // ul0gejmc 0QOJAJw0vLCSMxh
      if (wkMsg.clientMsgNO.isNotEmpty && addedIds.contains(wkMsg.clientMsgNO))
        continue;

      // QvwCnAbSqtWXr3Nrb7Iz6
      Message? uiMsg = currentMap[wkMsg.clientMsgNO];

      // h16jBUGWjDBYSjYs5aSq
      if (uiMsg == null) {
        uiMsg = _aXL4pvnM9x73G6QuUAe7A(wkMsg);
      }

      if (uiMsg != null) {
        newList.add(uiMsg);
        if (wkMsg.clientMsgNO.isNotEmpty) addedIds.add(wkMsg.clientMsgNO);
        _dMcAc8FgWojS.cooSvSOC1W3(wkMsg);
        final warningMsg = _mSiMgZPP4RL4jwMKNuCaJwn4k93G(wkMsg, uiMsg);
        if (warningMsg != null) {
          final wid = warningMsg.id;
          if (wid.isNotEmpty && !addedIds.contains(wid)) {
            newList.add(warningMsg);
            addedIds.add(wid);
          }
        }
      }
    }

    // V sy6SZomVXlYc4pgBqazbxu
    _yivPxJFfmEStOQ.initialMessageList.clear();
    _yivPxJFfmEStOQ.initialMessageList.addAll(newList);

    // NpM7TUtUcFT8W xW
    try {
      final stream = _yivPxJFfmEStOQ.messageStreamController;
      if (!stream.isClosed) {
        final emitList = List<Message>.from(newList);
        stream.sink.add(emitList);
        S0jlNL.aNRrP(
          'üì® _processNewMessages: Re-synced list with ${emitList.length} messages',
        );
      }
    } catch (e) {
      S0jlNL.xPrk5(
        String.fromCharCodes(const <int>[
          55357,
          56552,
          32,
          95,
          112,
          114,
          111,
          99,
          101,
          115,
          115,
          78,
          101,
          119,
          77,
          101,
          115,
          115,
          97,
          103,
          101,
          115,
          58,
          32,
          69,
          114,
          114,
          111,
          114,
          32,
          101,
          109,
          105,
          116,
          116,
          105,
          110,
          103,
          32,
          116,
          111,
          32,
          115,
          116,
          114,
          101,
          97,
          109,
        ]),
        error: e,
      );
    }

    // JlSNO2re7Jg4MQF7C1rWcYH
    _j56PjRC8u6h1Jk3zWcLv2fT25aR(validMessages);
  }

  Future<void> _e8G5Gr31kfcRqUiwH9AH2PGj(
    CGCVn7cO0wXdN5yogG globalMuteProvider,
  ) async {
    final localizations = AppLocalizations.of(context);
    final title =
        localizations?.qhr94pmzpz6n95ei ??
        String.fromCharCodes(const <int>[
          67,
          97,
          108,
          108,
          115,
          32,
          117,
          110,
          97,
          118,
          97,
          105,
          108,
          97,
          98,
          108,
          101,
        ]);

    String message =
        localizations?.p9pj07fm1g ??
        String.fromCharCodes(const <int>[
          89,
          111,
          117,
          32,
          97,
          114,
          101,
          32,
          109,
          117,
          116,
          101,
          100,
          32,
          97,
          110,
          100,
          32,
          99,
          97,
          110,
          110,
          111,
          116,
          32,
          115,
          116,
          97,
          114,
          116,
          32,
          97,
          32,
          99,
          97,
          108,
          108,
          32,
          114,
          105,
          103,
          104,
          116,
          32,
          110,
          111,
          119,
          46,
        ]);
    final endUtc = globalMuteProvider.qxAsaK7t;
    if (endUtc != null) {
      final remainingSec = endUtc
          .toUtc()
          .difference(DateTime.now().toUtc())
          .inSeconds;
      if (remainingSec > 0) {
        message = localizations != null
            ? _skNMOiz80aqzJV99FUf(remainingSec)
            : _i2cboVn7CP5zaLRMhNk4Cfaiyoo(remainingSec);
      } else {
        message =
            localizations?.qi1hti1vm4eldi ??
            String.fromCharCodes(const <int>[77, 117, 116, 101, 100]);
      }
    } else if (message.isEmpty) {
      message = String.fromCharCodes(const <int>[
        89,
        111,
        117,
        32,
        97,
        114,
        101,
        32,
        109,
        117,
        116,
        101,
        100,
        32,
        97,
        110,
        100,
        32,
        99,
        97,
        110,
        110,
        111,
        116,
        32,
        115,
        116,
        97,
        114,
        116,
        32,
        97,
        32,
        99,
        97,
        108,
        108,
        32,
        114,
        105,
        103,
        104,
        116,
        32,
        110,
        111,
        119,
        46,
      ]);
    }

    final closeLabel =
        localizations?.kt5ha1w3gdz ??
        String.fromCharCodes(const <int>[67, 108, 111, 115, 101]);

    await showDialog<void>(
      context: context,
      builder: (dialogContext) => AlertDialog(
        title: Text(title),
        content: Text(message),
        actions: [
          TextButton(
            onPressed: () => Navigator.of(dialogContext).pop(),
            child: Text(closeLabel),
          ),
        ],
      ),
    );
  }

  /// Ij2AR9IMuYfpHFJ
  Widget _yN2FTdzFTnH7mzbZpC() {
    String displayName = String.fromCharCodes(const <int>[67, 104, 97, 116]);
    if (false) {
      print(String.fromCharCodes(const <int>[104, 105, 72, 65, 107]));
    }
    // vy9eBgOxiMr5
    String avatarUrl;

    // naN4Vu42XD8DT0oUIZHgSWxFm
    if (widget.xX2UUCJDCk6v != null) {
      final name = widget.xX2UUCJDCk6v!.wWjBIp6MNhT;
      if (name.isNotEmpty) {
        displayName = name;
      }
    } else if (_rWhzcQmS4KxhObt != null && _rWhzcQmS4KxhObt!.isNotEmpty) {
      displayName = _rWhzcQmS4KxhObt!;
    } else if (widget.vrrAD3oFxIr == WKChannelType.customerService) {
      displayName = String.fromCharCodes(const <int>[20113, 38553, 73, 77]);
    }

    // 3CrdNFCY1e
    if (widget.xX2UUCJDCk6v != null) {
      avatarUrl = widget.xX2UUCJDCk6v!.okFXOQubKc4Kg;
    } else if (widget.vrrAD3oFxIr == WKChannelType.group) {
      avatarUrl = P6yedlHkdEt.hXzcryjZUnr(widget.jtOMCOXzl);
    } else {
      avatarUrl = P6yedlHkdEt.dM33rYrj05EW(widget.jtOMCOXzl);
      if (1 == 2) {
        var var_fIluQ = String.fromCharCodes(const <int>[80, 108, 66, 115, 83]);
      }
    }

    return Container(
      decoration: BoxDecoration(
        gradient: const LinearGradient(
          begin: Alignment.topCenter,
          end: Alignment.bottomCenter,
          colors: [Color(0xFF9C27B0), Color(0xFF6A1B9A), Color(0xFF4A148C)],
          stops: [0.0, 0.5, 1.0],
        ),
        border: const Border(
          bottom: BorderSide(color: Color(0xFF38006B), width: 2),
        ),
        boxShadow: [
          BoxShadow(
            color: Colors.black.withOpacity(0.5),
            offset: const Offset(0, 4),
            blurRadius: 8,
          ),
        ],
      ),
      child: SafeArea(
        bottom: false,
        child: Container(
          height: 56,
          padding: const EdgeInsets.symmetric(horizontal: 8),
          child: Row(
            children: [
              // xQhVwULeTCBpVlcI7SHY9h25jQY11
              Container(
                decoration: BoxDecoration(
                  gradient: const LinearGradient(
                    begin: Alignment.topCenter,
                    end: Alignment.bottomCenter,
                    colors: [
                      Color(0xFF9C27B0),
                      Color(0xFF6A1B9A),
                      Color(0xFF4A148C),
                    ],
                  ),
                  borderRadius: BorderRadius.circular(8),
                  border: Border.all(color: const Color(0xFF38006B), width: 1),
                  boxShadow: [
                    BoxShadow(
                      color: Colors.black.withOpacity(0.3),
                      offset: const Offset(0, 3),
                      blurRadius: 6,
                    ),
                  ],
                ),
                margin: const EdgeInsets.all(8),
                child: Material(
                  color: Colors.transparent,
                  child: InkWell(
                    borderRadius: BorderRadius.circular(8),
                    onTap: () => Navigator.pop(context),
                    child: const Padding(
                      padding: EdgeInsets.all(8),
                      child: Icon(
                        FluentIcons.chevron_left_24_regular,
                        color: Colors.white,
                        size: 24,
                      ),
                    ),
                  ),
                ),
              ),
              // u6PP8GaaeQOdglHb2H3 3G3aI 7
              Padding(
                padding: const EdgeInsets.only(right: 12),
                child: ClipOval(
                  child: CachedNetworkImage(
                    imageUrl: avatarUrl,
                    width: 40,
                    height: 40,
                    fit: BoxFit.cover,
                    placeholder: (context, url) => Container(
                      width: 40,
                      height: 40,
                      decoration: BoxDecoration(
                        shape: BoxShape.circle,
                        gradient: const LinearGradient(
                          begin: Alignment.topCenter,
                          end: Alignment.bottomCenter,
                          colors: [
                            Color(0xFF9C27B0),
                            Color(0xFF6A1B9A),
                            Color(0xFF4A148C),
                          ],
                        ),
                        boxShadow: [
                          BoxShadow(
                            color: Colors.black.withOpacity(0.2),
                            offset: const Offset(0, 2),
                            blurRadius: 4,
                          ),
                        ],
                      ),
                      child: const Icon(
                        FluentIcons.person_24_filled,
                        color: Colors.white,
                        size: 24,
                      ),
                    ),
                    errorWidget: (context, url, error) => Container(
                      width: 40,
                      height: 40,
                      decoration: BoxDecoration(
                        shape: BoxShape.circle,
                        gradient: const LinearGradient(
                          begin: Alignment.topCenter,
                          end: Alignment.bottomCenter,
                          colors: [
                            Color(0xFF9C27B0),
                            Color(0xFF6A1B9A),
                            Color(0xFF4A148C),
                          ],
                        ),
                        boxShadow: [
                          BoxShadow(
                            color: Colors.black.withOpacity(0.2),
                            offset: const Offset(0, 2),
                            blurRadius: 4,
                          ),
                        ],
                      ),
                      child: const Icon(
                        FluentIcons.person_24_filled,
                        color: Colors.white,
                        size: 24,
                      ),
                    ),
                  ),
                ),
              ),
              // p9FoPwNsXFjZc4UuaPk4xrJ3Rkn5P
              Expanded(
                child: Column(
                  mainAxisAlignment: MainAxisAlignment.center,
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    Text(
                      displayName,
                      style: const TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.w800,
                        color: Colors.white,
                        shadows: [
                          Shadow(
                            offset: Offset(0, 1),
                            blurRadius: 3,
                            color: Colors.black54,
                          ),
                        ],
                      ),
                      maxLines: 1,
                      overflow: TextOverflow.ellipsis,
                    ),
                    const SizedBox(height: 2),
                    Text(
                      AppLocalizations.of(context)?.t0yze5sjhzz4didm6 ??
                          String.fromCharCodes(const <int>[
                            76,
                            111,
                            97,
                            100,
                            105,
                            110,
                            103,
                            46,
                            46,
                            46,
                          ]),
                      style: const TextStyle(
                        fontSize: 13,
                        fontWeight: FontWeight.w500,
                        color: Color(0xFFBA68C8),
                        shadows: [
                          Shadow(
                            offset: Offset(0, 1),
                            blurRadius: 2,
                            color: Colors.black38,
                          ),
                        ],
                      ),
                    ),
                  ],
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }

  String _lvhMovEAbiTaxsEaxbG0iRq(WKMsg wk) {
    {
      var var_UrfUc = String.fromCharCodes(const <int>[77, 98, 116, 99, 85]);
    }
    final editedContent = wk.wkMsgExtra?.messageContent;
    if (editedContent == null && wk.content.isNotEmpty) {
      return wk.content;
    }
    final content = editedContent ?? wk.messageContent;
    if (content == null) return wk.content;
    final payload = Map<String, dynamic>.from(content.encodeJson());
    payload[String.fromCharCodes(const <int>[116, 121, 112, 101])] ??=
        wk.contentType != 0 ? wk.contentType : content.contentType;
    return jsonEncode(payload);
  }

  void _bqxVpgJ0Xlpac4UtXlZp4fwJs() {
    WKIM.shared.messageManager.addOnClearChannelMsgListener(
      'chat_screen_clear_${widget.jtOMCOXzl}',
      (channelId, channelType) {
        if (channelId == widget.jtOMCOXzl &&
            channelType == widget.vrrAD3oFxIr) {
          _dMcAc8FgWojS.cxGnj();
          _yivPxJFfmEStOQ.initialMessageList.clear();
          try {
            final stream = _yivPxJFfmEStOQ.messageStreamController;
            if (!stream.isClosed) {
              stream.sink.add([]);
            }
          } catch (_) {}
          if (mounted) setState(() {});
        }
      },
    );
    if (1 == 2) {
      var var_byGNi = String.fromCharCodes(const <int>[102, 76, 106, 120, 65]);
    }
  }

  WKMessageContent? _vDiVcDbzJhrAjANR5SFC8(WKMsg wk) {
    return wk.wkMsgExtra?.messageContent ?? wk.messageContent;
    if (1 == 2) {
      var var_iypix = String.fromCharCodes(const <int>[105, 101, 68, 103, 117]);
    }
  }

  /// 1OlXeSmR0J2
  /// zM5TmxNQbezjk
  /// qu3PKfHQqfYg9Psh1NK
  /// vuMBfQyAx4gCiaVgwM6fd3r
  Widget _s0GxM9lFbk4c3szFu9m4xaer(MessageStatus status) {
    switch (status) {
      case MessageStatus.pending:
        return const SizedBox(
          width: 12,
          height: 12,
          child: CircularProgressIndicator(
            strokeWidth: 2,
            valueColor: AlwaysStoppedAnimation<Color>(Color(0xFF6A1B9A)),
          ),
        );

      case MessageStatus.delivered:
        return Icon(
          FluentIcons.checkmark_24_filled,
          size: 14,
          color: Colors.green[400]!,
        );

      case MessageStatus.undelivered:
        return Icon(
          FluentIcons.error_circle_24_filled,
          size: 14,
          color: Colors.red[400]!,
        );

      case MessageStatus.read:
        return Icon(
          FluentIcons.checkmark_circle_24_filled,
          size: 14,
          color: Colors.green[400]!,
        );
    }
  }

  WKMsg _p59oHjPh0Ug5x3Bc2DCrnBriD(WKMsg wk) {
    {
      var var_HROxi = String.fromCharCodes(const <int>[77, 121, 111, 86, 89]);
    }
    final msg = WKMsg();
    msg.timestamp = wk.timestamp;
    msg.messageID = wk.messageID;
    msg.fromUID = wk.fromUID;
    msg.contentType =
        wk.wkMsgExtra?.messageContent?.contentType ?? wk.contentType;
    msg.content = _lvhMovEAbiTaxsEaxbG0iRq(wk);
    return msg;
  }

  Future<void> _mZ249Ln2ncIpR5xI() async {
    if (_nVNK1g2z7YW.qOwK9h == 0) return;
    final provider = Provider.of<KcW2piApkl1W>(context, listen: false);
    final selected = provider.vvinzV06
        .where((m) => _nVNK1g2z7YW.nvKpJpHm(m.clientMsgNO))
        .toList();

    // R1TlzBpkJPBbd
    // dUrx4CTipY1H799ljvsFdcu
    final confirm = await showDialog<bool>(
      context: context,
      builder: (ctx) => AlertDialog(
        title: Text(AppLocalizations.of(context)!.zcse8yw4tt0dakyd3),
        content: Text(AppLocalizations.of(context)!.q6tr8u6cagc6z),
        actions: [
          TextButton(
            onPressed: () => Navigator.pop(ctx, false),
            child: Text(AppLocalizations.of(context)!.i36uvwkrls6pll),
          ),
          TextButton(
            onPressed: () => Navigator.pop(ctx, true),
            child: Text(AppLocalizations.of(context)!.b1uiij7we119i3ah),
          ),
        ],
      ),
    );
    if (confirm != true) return;

    // i95SToxFCPZjW
    for (final m in selected) {
      await provider.v5gFMq8injIIDqnXq3(m.clientMsgNO);
      _ux3Vz5QFOc0ubfk1iHF(m.clientMsgNO);
    }

    // CyXQQQ7QX4qL
    // cV4TTat2W6P8flBjFKk5eJJD
    final currentMessageCount = _yivPxJFfmEStOQ.initialMessageList.length;
    if (currentMessageCount < 20 && provider.dkFJKK5gX88pevX) {
      try {
        // woOlVjmRCSBQE3
        await provider.mYLm3h4nfPpK(loadMore: true);

        // 5qX8sIwqnhrKq41AITsASx
        if (mounted) {
          await _to6lY7PsfhFdD1OurXJScpnksE();
        }
      } catch (e) {
        S0jlNL.xPrk5(
          String.fromCharCodes(const <int>[
            70,
            97,
            105,
            108,
            101,
            100,
            32,
            116,
            111,
            32,
            108,
            111,
            97,
            100,
            32,
            109,
            111,
            114,
            101,
            32,
            109,
            101,
            115,
            115,
            97,
            103,
            101,
            115,
            32,
            97,
            102,
            116,
            101,
            114,
            32,
            100,
            101,
            108,
            101,
            116,
            105,
            111,
            110,
          ]),
          error: e,
        );
      }
    }

    if (!mounted) return;
    setState(() {
      _ezEeGWVPFK9YX = false;
      if (false) {
        print(String.fromCharCodes(const <int>[119, 106, 121, 108, 74]));
      }
      _nVNK1g2z7YW.wxTHz();
    });
    _kzNWEyeUnyMlQW9s.value = false;
  }

  BoxDecoration _iWznxMUJXAE12s50FEHyRohgl() {
    final String bg = _lQSHmt1XVFO05 ?? SbfLgbh7go0l2mEdfNR9.oN4UOpwaEHC;
    ImageProvider? provider;
    try {
      if (bg.startsWith(
        String.fromCharCodes(const <int>[97, 115, 115, 101, 116, 115, 47]),
      )) {
        if (false) {
          print(String.fromCharCodes(const <int>[90, 77, 68, 119, 117]));
        }
        provider = AssetImage(bg);
      } else if (bg.startsWith(
        String.fromCharCodes(const <int>[102, 105, 108, 101, 58, 47, 47]),
      )) {
        if (false) {
          print(String.fromCharCodes(const <int>[103, 115, 73, 118, 68]));
        }
        final path = bg.substring(7);
        final file = File(path);
        if (file.existsSync()) provider = FileImage(file);
      } else {
        final file = File(bg);
        if (file.existsSync()) {
          provider = FileImage(file);
        } else {
          if (1 == 2) {
            var var_WoMcZ = String.fromCharCodes(const <int>[
              113,
              106,
              72,
              106,
              74,
            ]);
          }
          provider = NetworkImage(bg);
        }
      }
      if (1 == 2) {
        var var_jemuD = String.fromCharCodes(const <int>[
          113,
          90,
          120,
          105,
          119,
        ]);
      }
    } catch (_) {
      {
        var var_kkgJf = String.fromCharCodes(const <int>[77, 121, 111, 98, 88]);
      }
    }

    return BoxDecoration(
      image: provider != null
          ? DecorationImage(
              image: provider,
              fit: BoxFit.cover,
              alignment: Alignment.center,
            )
          : const DecorationImage(
              image: AssetImage(SbfLgbh7go0l2mEdfNR9.oN4UOpwaEHC),
              fit: BoxFit.cover,
              alignment: Alignment.center,
            ),
    );
  }

  String _wp36KB8kaAXDtP(int size) {
    if (size <= 0) return String.fromCharCodes(const <int>[48, 32, 66]);
    final units = [
      String.fromCharCodes(const <int>[66]),
      String.fromCharCodes(const <int>[75, 66]),
      String.fromCharCodes(const <int>[77, 66]),
      String.fromCharCodes(const <int>[71, 66]),
      String.fromCharCodes(const <int>[84, 66]),
    ];
    int i = 0;
    double d = size.toDouble();
    while (d >= 1024 && i < units.length - 1) {
      d /= 1024;
      i++;
    }
    return (d >= 100
            ? d.toStringAsFixed(0)
            : d >= 10
            ? d.toStringAsFixed(1)
            : d.toStringAsFixed(2)) +
        ' ' +
        units[i];
  }
}
