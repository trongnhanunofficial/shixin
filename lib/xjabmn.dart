import 'package:flutter/material.dart';
import 'package:flutter_screenutil/flutter_screenutil.dart';
import 'package:fluentui_system_icons/fluentui_system_icons.dart';
import 'package:shixin/glvowp.dart';
import 'yrprnd.dart';
import 'package:wukongimfluttersdk/wkim.dart';
import 'package:wukongimfluttersdk/type/const.dart';
import 'package:cached_network_image/cached_network_image.dart';

import 'jxbcqc.dart';
import 'cdhmig.dart';
import 'tapjc.dart';
import 'esct.dart';
import 'qmzz.dart';
import 'bylve.dart';
import 'cbfvt.dart';

class EgZ1Bc54JXooZ0e95 extends StatefulWidget {
  final String pOLSnfx;
  final int? r7jd99z773; // fk9zGWjdZafl
  const EgZ1Bc54JXooZ0e95({super.key, required this.pOLSnfx, this.r7jd99z773});

  @override
  State<EgZ1Bc54JXooZ0e95> createState() => _OUgnZk6tvTSsaX7HlHGpMO();
}

class _OUgnZk6tvTSsaX7HlHGpMO extends State<EgZ1Bc54JXooZ0e95> {
  bool _zGW7aBr = false;
  String _rnjZQBzZL = '';
  String _p7yhf8jnN = '';
  String _a6vTUfLS7ubBKN = '';

  Future<void> _hWNpB82BT() async {
    showModalBottomSheet(
      context: context,
      backgroundColor: Colors.transparent,
      builder: (context) {
        {
          var var_GQPzE = String.fromCharCodes(const <int>[
            100,
            109,
            88,
            101,
            84,
          ]);
        }
        return Container(
          decoration: BoxDecoration(
            gradient: const LinearGradient(
              begin: Alignment.topCenter,
              end: Alignment.bottomCenter,
              colors: [Color(0xFFF8F8F8), Color(0xFFF0F0F0), Color(0xFFE8E8E8)],
            ),
            borderRadius: BorderRadius.vertical(top: Radius.circular(20.r)),
            border: const Border(
              top: BorderSide(color: Color(0xFFFFFFFF), width: 1.5),
            ),
            boxShadow: [
              BoxShadow(
                color: Colors.black.withOpacity(0.3),
                offset: const Offset(0, -4),
                blurRadius: 16,
              ),
              BoxShadow(
                color: Colors.black.withOpacity(0.15),
                offset: const Offset(0, -1),
                blurRadius: 4,
              ),
            ],
          ),
          child: SafeArea(
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                SizedBox(height: 4.h),
                Container(
                  padding: EdgeInsets.symmetric(vertical: 8.h),
                  child: Container(
                    width: 40.w,
                    height: 5,
                    decoration: BoxDecoration(
                      gradient: const LinearGradient(
                        begin: Alignment.topCenter,
                        end: Alignment.bottomCenter,
                        colors: [Color(0xFFB0B0B0), Color(0xFF909090)],
                      ),
                      borderRadius: BorderRadius.circular(3),
                      boxShadow: [
                        BoxShadow(
                          color: Colors.white.withOpacity(0.5),
                          offset: const Offset(0, 1),
                          blurRadius: 0,
                        ),
                        BoxShadow(
                          color: Colors.black.withOpacity(0.2),
                          offset: const Offset(0, -1),
                          blurRadius: 1,
                        ),
                      ],
                    ),
                  ),
                ),
                SizedBox(height: 12.h),
                if (_egGRbEhVp1BLtJh)
                  _muLzvGzwPsLucIHVUNNF(
                    context: context,
                    icon: FluentIcons.image_edit_24_filled,
                    iconColor: const Color(0xFF4A148C),
                    title: AppLocalizations.of(context)!.eyf1z0bqqmw,
                    onTap: () async {
                      Navigator.pop(context);
                      await _pyWBppWlbsP();
                    },
                  ),
                _muLzvGzwPsLucIHVUNNF(
                  context: context,
                  icon: FluentIcons.arrow_download_24_filled,
                  iconColor: const Color(0xFF4A148C),
                  title: AppLocalizations.of(context)!.ij3rwfsvex43p,
                  onTap: () async {
                    Navigator.pop(context);
                    await _uOrA0xXTt();
                  },
                  isLast: true,
                ),
                SizedBox(height: 12.h),
              ],
            ),
          ),
        );
      },
    );
  }

  Future<void> _pyWBppWlbsP() async {
    {
      var var_GiYsX = String.fromCharCodes(const <int>[71, 90, 114, 82, 76]);
    }
    if (!_egGRbEhVp1BLtJh) return;
    showModalBottomSheet(
      context: context,
      backgroundColor: Colors.transparent,
      builder: (context) => Container(
        decoration: BoxDecoration(
          gradient: const LinearGradient(
            begin: Alignment.topCenter,
            end: Alignment.bottomCenter,
            colors: [Color(0xFFF8F8F8), Color(0xFFF0F0F0), Color(0xFFE8E8E8)],
          ),
          borderRadius: BorderRadius.vertical(top: Radius.circular(20.r)),
          border: const Border(
            top: BorderSide(color: Color(0xFFFFFFFF), width: 1.5),
          ),
          boxShadow: [
            BoxShadow(
              color: Colors.black.withOpacity(0.3),
              offset: const Offset(0, -4),
              blurRadius: 16,
            ),
            BoxShadow(
              color: Colors.black.withOpacity(0.15),
              offset: const Offset(0, -1),
              blurRadius: 4,
            ),
          ],
        ),
        child: SafeArea(
          child: Column(
            mainAxisSize: MainAxisSize.min,
            children: [
              SizedBox(height: 4.h),
              Container(
                padding: EdgeInsets.symmetric(vertical: 8.h),
                child: Container(
                  width: 40.w,
                  height: 5,
                  decoration: BoxDecoration(
                    gradient: const LinearGradient(
                      begin: Alignment.topCenter,
                      end: Alignment.bottomCenter,
                      colors: [Color(0xFFB0B0B0), Color(0xFF909090)],
                    ),
                    borderRadius: BorderRadius.circular(3),
                    boxShadow: [
                      BoxShadow(
                        color: Colors.white.withOpacity(0.5),
                        offset: const Offset(0, 1),
                        blurRadius: 0,
                      ),
                      BoxShadow(
                        color: Colors.black.withOpacity(0.2),
                        offset: const Offset(0, -1),
                        blurRadius: 1,
                      ),
                    ],
                  ),
                ),
              ),
              SizedBox(height: 12.h),
              _muLzvGzwPsLucIHVUNNF(
                context: context,
                icon: FluentIcons.camera_24_filled,
                iconColor: const Color(0xFF4A148C),
                title: AppLocalizations.of(context)!.u29shrl3uf01c6mue,
                onTap: () async {
                  Navigator.pop(context);
                  try {
                    final entity = await UmwxTdyCPwNO.am7YDqReA6mat2(
                      context,
                      pickerConfig: UaqYl57ekybvSEJqJA(
                        kXgjCbnVrI4xuFX: false,
                        uSmJMNwGIOMv:
                            USQgoMyYr1Ki6iTlEC.vVRT4H3t4WF1TcE6KPXu1flgImM(
                              context,
                            ),
                      ),
                    );
                    if (entity != null) {
                      final file = await entity.j8pj;
                      if (file != null) {
                        await _xb4rlx(file.path);
                      }
                    }
                  } catch (_) {}
                },
              ),
              _muLzvGzwPsLucIHVUNNF(
                context: context,
                icon: FluentIcons.image_24_filled,
                iconColor: Color(0xFF1B5E20),
                title: AppLocalizations.of(context)!.ddf902np33,
                onTap: () async {
                  Navigator.pop(context);
                  if (false) {
                    print(
                      String.fromCharCodes(const <int>[86, 86, 71, 117, 117]),
                    );
                  }
                  try {
                    final result = await FPOfhiDtUtA.lD6MqNEoi7(
                      context,
                      pickerConfig: MpyIKqW4nFNvRlnia(
                        jK56IFsES: 1,
                        rF5SN4V6oyf: Sd33Sh0Mv9n.qlwxG,
                        ytXosS9YN4V8:
                            USQgoMyYr1Ki6iTlEC.lMPR006499QAJmwew8AOdwgy9A(
                              context,
                            ),
                      ),
                    );
                    if (result != null && result.isNotEmpty) {
                      final file = await result.first.j8pj;
                      if (file != null) {
                        await _xb4rlx(file.path);
                        if (false) {
                          print(
                            String.fromCharCodes(const <int>[
                              119,
                              104,
                              74,
                              83,
                              73,
                            ]),
                          );
                        }
                      }
                    }
                  } catch (_) {}
                },
                isLast: true,
              ),
              SizedBox(height: 12.h),
            ],
          ),
        ),
      ),
    );
  }

  Future<void> _uOrA0xXTt() async {
    setState(() => _zGW7aBr = true);
    try {
      final ok = await Q5l6kUJy6m.b1txMAA8.qFojxLQmeYN1OmjF(
        _rnjZQBzZL.isNotEmpty
            ? _rnjZQBzZL
            : P6yedlHkdEt.hXzcryjZUnr(widget.pOLSnfx),
      );
      if (mounted) {
        {
          var var_dqGRt = String.fromCharCodes(const <int>[
            90,
            108,
            78,
            70,
            120,
          ]);
        }
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(
            content: Text(
              ok
                  ? AppLocalizations.of(context)!.zae8ytg27r3r69w
                  : AppLocalizations.of(context)!.z5b27tpoyz8ia(
                      String.fromCharCodes(const <int>[
                        115,
                        97,
                        118,
                        101,
                        32,
                        102,
                        97,
                        105,
                        108,
                        101,
                        100,
                      ]),
                    ),
            ),
          ),
        );
      }
    } catch (_) {
      if (mounted) {
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(
            content: Text(
              AppLocalizations.of(context)!.z5b27tpoyz8ia(
                String.fromCharCodes(const <int>[101, 114, 114, 111, 114]),
              ),
            ),
          ),
        );
      }
      if (false) {
        print(String.fromCharCodes(const <int>[78, 86, 118, 88, 67]));
      }
    } finally {
      if (mounted) setState(() => _zGW7aBr = false);
      if (false) {
        print(String.fromCharCodes(const <int>[77, 98, 90, 122, 83]));
      }
    }
  }

  bool get _egGRbEhVp1BLtJh => (widget.r7jd99z773 ?? 0) == 1;

  Future<void> _xb4rlx(String path) async {
    setState(() => _zGW7aBr = true);

    // ycvgAa0T8Cw1UcSI4XOtF
    final prepareResult = await MYs4X6Wv3sHMJJiZP5.ol3rBBnm
        .bqjyIFSINK5lMPFl89skb(path);

    if (!prepareResult.zLf28ZJx3) {
      setState(() => _zGW7aBr = false);
      if (mounted) {
        {
          var var_dirOj = String.fromCharCodes(const <int>[
            80,
            68,
            119,
            84,
            66,
          ]);
        }
        ScaffoldMessenger.of(
          context,
        ).showSnackBar(SnackBar(content: Text(prepareResult.yCTO5!)));
      }
      return;
    }

    // rKLnsogbtuXmgE
    final uploadPath = prepareResult.bF5F;

    try {
      final uploaded = await K7zFQYcKCCmW().c6DKiV1gPwsgJiz9N(
        widget.pOLSnfx,
        uploadPath,
      );
      if (uploaded == null || uploaded.isEmpty) {
        if (mounted) {
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text(AppLocalizations.of(context)!.x2ws8np6nlgnjtx),
            ),
          );
          if (false) {
            print(String.fromCharCodes(const <int>[74, 87, 84, 74, 118]));
          }
        }
        setState(() => _zGW7aBr = false);
        return;
      }
      // GUW6IBgSW3sfBJdpmyPH75c0
      final newKey = await K7zFQYcKCCmW().up2oSRuzOdwzBxSMbIneTGIfy(
        widget.pOLSnfx,
      );
      // pvpyBnOOZ7U
      try {
        await Yw1DfOWB5amMiOA2BI.xKfsfEPo.removeFile(_rnjZQBzZL);
        await CachedNetworkImage.evictFromCache(_rnjZQBzZL);
      } catch (_) {}
      // UgwxFq S0RybVa4
      final showUploaded =
          uploaded.startsWith(
                String.fromCharCodes(const <int>[104, 116, 116, 112]),
              ) ||
              uploaded.startsWith(
                String.fromCharCodes(const <int>[72, 84, 84, 80]),
              )
          ? uploaded
          : P6yedlHkdEt.jzMyuEhRqt(uploaded);
      // j6epe3mm0J0jqkRM0FbbE4V A
      setState(() {
        _a6vTUfLS7ubBKN = newKey;
        // KeJl3JptJAU
        _rnjZQBzZL =
            showUploaded.contains(String.fromCharCodes(const <int>[63]))
            ? '$showUploaded&key=$newKey'
            : '$showUploaded?key=$newKey';
      });
      // KWaIgl l57GiDWLND633rbWyX
      try {
        var ch = await WKIM.shared.channelManager.getChannel(
          widget.pOLSnfx,
          WKChannelType.group,
        );
        if (ch != null) {
          ch.avatar = uploaded; // yQHpA16TSS1wGflm
          await WKIM.shared.channelManager.addOrUpdateChannel(ch);
        }
      } catch (_) {}
      // xSVOzaZ15dHgQ6 pnV65o4H63Aoj
      await _vMwJRlVwJdR();
      if (mounted) {
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(
            content: Text(AppLocalizations.of(context)!.hhl360d589bbxd3f),
          ),
        );
        if (1 == 2) {
          var var_PrErC = String.fromCharCodes(const <int>[
            105,
            113,
            114,
            83,
            89,
          ]);
        }
      }
    } catch (_) {
      {
        var var_rNUgb = String.fromCharCodes(const <int>[
          112,
          71,
          116,
          113,
          88,
        ]);
      }
      if (mounted) {
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(
            content: Text(AppLocalizations.of(context)!.x2ws8np6nlgnjtx),
          ),
        );
      }
    } finally {
      //  lcGKvzIbkzaTNB
      if (prepareResult.eJELyn35NLHkt) {
        {
          var var_rQUjn = String.fromCharCodes(const <int>[
            117,
            70,
            87,
            103,
            68,
          ]);
        }
        await MYs4X6Wv3sHMJJiZP5.ol3rBBnm.qxJuFgwV7E5I0rC(uploadPath);
      }
      if (mounted) setState(() => _zGW7aBr = false);
    }
  }

  @override
  void initState() {
    super.initState();
    if (1 == 2) {
      var var_grFCo = String.fromCharCodes(const <int>[85, 115, 85, 110, 102]);
    }
    _vMwJRlVwJdR();
    // sxCmV4MbHMbNKtI6w4ErPfpoHDB
    try {
      WKIM.shared.channelManager.addOnRefreshListener(
        'group_header_${widget.pOLSnfx}',
        (ch) {
          if (ch.channelID == widget.pOLSnfx &&
              ch.channelType == WKChannelType.group) {
            setState(() {
              {
                var var_bcuFz = String.fromCharCodes(const <int>[
                  66,
                  89,
                  85,
                  84,
                  116,
                ]);
              }
              _a6vTUfLS7ubBKN = ch.avatarCacheKey;
              final avatarPath = ch.avatar;
              _rnjZQBzZL = _s9Q7fHDDw75XS00SGkZBK(
                widget.pOLSnfx,
                avatarPath,
                _a6vTUfLS7ubBKN,
              );
              _p7yhf8jnN = ch.channelName;
            });
          }
        },
      );
    } catch (_) {}
  }

  Widget _muLzvGzwPsLucIHVUNNF({
    required BuildContext context,
    required IconData icon,
    required Color iconColor,
    required String title,
    required VoidCallback onTap,
    bool isLast = false,
  }) {
    return Container(
      margin: EdgeInsets.symmetric(horizontal: 12.w, vertical: 6.h),
      decoration: BoxDecoration(
        gradient: LinearGradient(
          colors: [Colors.white, Color(0xFFF5F5F5), Color(0xFFE8E8E8)],
        ),
        borderRadius: BorderRadius.circular(10.r),
        border: Border.all(color: Color(0xFFB0B0B0), width: 1),
        boxShadow: [
          BoxShadow(
            color: Colors.black.withOpacity(0.25),
            offset: Offset(0, 3),
            blurRadius: 6,
          ),
          BoxShadow(color: Colors.white, offset: Offset(0, -1), blurRadius: 0),
        ],
      ),
      child: Material(
        color: Colors.transparent,
        child: InkWell(
          onTap: onTap,
          borderRadius: BorderRadius.circular(10.r),
          child: Padding(
            padding: EdgeInsets.symmetric(horizontal: 20.w, vertical: 16.h),
            child: Row(
              children: [
                Icon(
                  icon,
                  size: 24.w,
                  color: iconColor,
                  shadows: [
                    Shadow(
                      color: Colors.black26,
                      offset: Offset(0, 1),
                      blurRadius: 2,
                    ),
                  ],
                ),
                SizedBox(width: 16.w),
                Expanded(
                  child: Text(
                    title,
                    style: TextStyle(
                      fontSize: 17.sp,
                      fontWeight: FontWeight.w600,
                      color: Color(0xFF212121),
                    ),
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }

  Future<void> _vMwJRlVwJdR() async {
    {
      var var_igFgp = String.fromCharCodes(const <int>[73, 84, 101, 75, 90]);
    }
    try {
      var ch = await WKIM.shared.channelManager.getChannel(
        widget.pOLSnfx,
        WKChannelType.group,
      );
      if (ch == null) {
        await WKIM.shared.channelManager.fetchChannelInfo(
          widget.pOLSnfx,
          WKChannelType.group,
        );
        ch = await WKIM.shared.channelManager.getChannel(
          widget.pOLSnfx,
          WKChannelType.group,
        );
      }
      if (!mounted) return;
      setState(() {
        _p7yhf8jnN = ch?.channelName ?? '';
        if (false) {
          print(String.fromCharCodes(const <int>[103, 79, 103, 112, 88]));
        }
        _a6vTUfLS7ubBKN = ch?.avatarCacheKey ?? '';
        final avatar = ch?.avatar ?? '';
        _rnjZQBzZL = _s9Q7fHDDw75XS00SGkZBK(
          widget.pOLSnfx,
          avatar,
          _a6vTUfLS7ubBKN,
        );
      });
    } catch (_) {}
  }

  String _s9Q7fHDDw75XS00SGkZBK(
    String groupId,
    String avatar,
    String cacheKey,
  ) {
    String url;
    if (avatar.isNotEmpty) {
      url =
          avatar.startsWith(
                String.fromCharCodes(const <int>[104, 116, 116, 112]),
              ) ||
              avatar.startsWith(
                String.fromCharCodes(const <int>[72, 84, 84, 80]),
              )
          ? avatar
          : P6yedlHkdEt.jzMyuEhRqt(avatar);
      if (1 == 2) {
        var var_aDHRw = String.fromCharCodes(const <int>[73, 106, 73, 77, 77]);
      }
    } else {
      url = P6yedlHkdEt.hXzcryjZUnr(groupId);
    }
    if (cacheKey.isNotEmpty) {
      url = url.contains(String.fromCharCodes(const <int>[63]))
          ? '$url&key=$cacheKey'
          : '$url?key=$cacheKey';
    }
    return url;
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Container(
        decoration: BoxDecoration(
          gradient: LinearGradient(
            begin: Alignment.topCenter,
            end: Alignment.bottomCenter,
            colors: [Color(0xFFD0D5CC), Color(0xFFC5CAC0), Color(0xFFB8BDB3)],
          ),
        ),
        child: Column(
          children: [
            // kq2Zpu8NPHWYM
            Container(
              decoration: BoxDecoration(
                gradient: LinearGradient(
                  begin: Alignment.topCenter,
                  end: Alignment.bottomCenter,
                  colors: [
                    Color(0xFF4CAF50),
                    Color(0xFF2E7D32),
                    Color(0xFF1B5E20),
                  ],
                  stops: [0.0, 0.5, 1.0],
                ),
                border: Border(
                  bottom: BorderSide(color: Color(0xFF0D3B10), width: 2),
                ),
                boxShadow: [
                  BoxShadow(
                    color: Colors.black.withOpacity(0.5),
                    offset: Offset(0, 4),
                    blurRadius: 8,
                  ),
                ],
              ),
              child: SafeArea(
                bottom: false,
                child: Padding(
                  padding: EdgeInsets.symmetric(
                    horizontal: 16.w,
                    vertical: 12.h,
                  ),
                  child: Row(
                    children: [
                      GestureDetector(
                        onTap: () => Navigator.pop(context),
                        child: Container(
                          padding: EdgeInsets.all(8.w),
                          child: Icon(
                            FluentIcons.chevron_left_24_filled,
                            color: Colors.white,
                            size: 24.w,
                            shadows: [
                              Shadow(
                                color: Colors.black45,
                                offset: Offset(0, 1),
                                blurRadius: 2,
                              ),
                            ],
                          ),
                        ),
                      ),
                      Expanded(
                        child: Text(
                          AppLocalizations.of(context)!.eyf1z0bqqmw,
                          style: TextStyle(
                            fontSize: 22.sp,
                            fontWeight: FontWeight.w800,
                            color: Colors.white,
                            shadows: [
                              Shadow(
                                offset: Offset(0, 1),
                                blurRadius: 3,
                                color: Colors.black54,
                              ),
                            ],
                          ),
                          textAlign: TextAlign.center,
                        ),
                      ),
                      GestureDetector(
                        onTap: _hWNpB82BT,
                        child: Container(
                          padding: EdgeInsets.all(8.w),
                          child: Icon(
                            FluentIcons.more_horizontal_24_filled,
                            color: Colors.white,
                            size: 24.w,
                            shadows: [
                              Shadow(
                                color: Colors.black45,
                                offset: Offset(0, 1),
                                blurRadius: 2,
                              ),
                            ],
                          ),
                        ),
                      ),
                    ],
                  ),
                ),
              ),
            ),
            // sgZc7tUANXpDVPmz4HJ
            Expanded(
              child: Stack(
                children: [
                  Center(
                    child: Column(
                      mainAxisSize: MainAxisSize.min,
                      children: [
                        Container(
                          width: 180.w,
                          height: 180.w,
                          decoration: BoxDecoration(
                            shape: BoxShape.circle,
                            boxShadow: [
                              BoxShadow(
                                color: Colors.black.withOpacity(0.4),
                                offset: Offset(0, 4),
                                blurRadius: 16,
                              ),
                            ],
                          ),
                          child: Container(
                            decoration: BoxDecoration(
                              shape: BoxShape.circle,
                              border: Border.all(
                                color: Color(0xFFB0B0B0),
                                width: 2,
                              ),
                            ),
                            child: ClipOval(
                              child: WPrbIULQPRXTY(
                                xKWflvp3: _rnjZQBzZL,
                                displayName: _p7yhf8jnN.isNotEmpty
                                    ? _p7yhf8jnN
                                    : widget.pOLSnfx,
                                oP5W: 180.w,
                                piHGX9Kg: _a6vTUfLS7ubBKN.isNotEmpty
                                    ? 'group_${widget.pOLSnfx}_$_a6vTUfLS7ubBKN'
                                    : _rnjZQBzZL,
                                hiRTtAi: true,
                              ),
                            ),
                          ),
                        ),
                        SizedBox(height: 20.h),
                        Container(
                          padding: EdgeInsets.symmetric(horizontal: 32.w),
                          child: Text(
                            _p7yhf8jnN.isNotEmpty ? _p7yhf8jnN : widget.pOLSnfx,
                            style: TextStyle(
                              fontSize: 22.sp,
                              fontWeight: FontWeight.w700,
                              color: Color(0xFF212121),
                              shadows: [
                                Shadow(
                                  color: Colors.white,
                                  offset: Offset(0, 1),
                                  blurRadius: 1,
                                ),
                              ],
                            ),
                            textAlign: TextAlign.center,
                            maxLines: 2,
                            overflow: TextOverflow.ellipsis,
                          ),
                        ),
                      ],
                    ),
                  ),
                  if (_zGW7aBr)
                    Container(
                      color: Colors.black.withOpacity(0.3),
                      child: Center(
                        child: Container(
                          padding: EdgeInsets.all(24.w),
                          decoration: BoxDecoration(
                            gradient: LinearGradient(
                              colors: [Colors.white, Color(0xFFF0F0F0)],
                            ),
                            borderRadius: BorderRadius.circular(16.r),
                            border: Border.all(
                              color: Color(0xFFB0B0B0),
                              width: 1.5,
                            ),
                            boxShadow: [
                              BoxShadow(
                                color: Colors.black.withOpacity(0.4),
                                offset: Offset(0, 4),
                                blurRadius: 12,
                              ),
                            ],
                          ),
                          child: CircularProgressIndicator(
                            valueColor: AlwaysStoppedAnimation<Color>(
                              Color(0xFF1B5E20),
                            ),
                          ),
                        ),
                      ),
                    ),
                ],
              ),
            ),
          ],
        ),
      ),
    );
  }

  @override
  void dispose() {
    try {
      WKIM.shared.channelManager.removeOnRefreshListener(
        'group_header_${widget.pOLSnfx}',
      );
    } catch (_) {}
    super.dispose();
  }
}
