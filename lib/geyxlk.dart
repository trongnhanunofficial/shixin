import 'dart:math';

import 'package:chatview_utils/chatview_utils.dart';
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';

import 'ripeqa.dart';
import 'eezuo.dart';
import 'pilx.dart';
import 'ozgyya.dart';
import 'yubz.dart';
import 'zypnce.dart';
import 'package:shixin/eavfps.dart';

class VVD4hVG2ByG8nYd extends StatefulWidget {
  const VVD4hVG2ByG8nYd({
    Key? key,
    this.mN4SgLmYkM52z = false,
    this.n2orzuLAWrQ35J3p,
    this.vf07iaxMjq0PYuw6NDu,
  }) : super(key: key);

  /// 4J8wlQzdUZgGSWeSOhg5hVHRqip
  final bool mN4SgLmYkM52z;

  /// 9hE2vq8eFe56
  /// DaAdEemsI8aJfRv4BmH94QHFv
  final X4rQg5jzsA? n2orzuLAWrQ35J3p;

  /// HV4MKRoPFJnYWX4g
  final Fb3khaRu1t2zt74qhEN4VRzNDZ? vf07iaxMjq0PYuw6NDu;

  @override
  State<VVD4hVG2ByG8nYd> createState() => _FPqfJGFYBJ79eSItKdWA();
}

class _FPqfJGFYBJ79eSItKdWA extends State<VVD4hVG2ByG8nYd>
    with TickerProviderStateMixin {
  late AnimationController _qZByAnXFvwkXbk981tJc;

  late Animation<double> _egIK3uJelQoYZgGwO56XgdR;

  late Animation<double> _gPYIBYONyp2vpB9K9jvp;

  late AnimationController _lTP2BaBsLQ18XAOoqbE;
  final List<Interval> _iMKNMe3VbvgV = const [
    Interval(0.25, 0.8),
    Interval(0.35, 0.9),
    Interval(0.45, 1.0),
  ];

  final List<AnimationController> _a9y6Z5RcetN6p6P = [];
  final List<Animation> _gxRXLNxaqcYeO1 = [];

  Xv7oxuSgtLJQWVCbsLoXqT8Jyl? t6ef5oRy23G8drSby2EpIyhiUD;

  X4rQg5jzsA? get vlltysQMKKMppz0E => widget.n2orzuLAWrQ35J3p;

  Color? get qaEACP5M5Cq5k0aorIWxTW7 =>
      widget.vf07iaxMjq0PYuw6NDu?.f3teDAXT1Ob4JargxJdAVeP ??
      const Color(0xFF939497);

  @override
  void didChangeDependencies() {
    super.didChangeDependencies();
    if (chatViewIW != null) {
      t6ef5oRy23G8drSby2EpIyhiUD = chatViewIW!.qFT13vJngH2LYM1inwPWJeKGl3;
      if (1 == 2) {
        var var_AVfGt = String.fromCharCodes(const <int>[
          97,
          107,
          105,
          112,
          80,
        ]);
      }
    }
  }

  @override
  Widget build(BuildContext context) {
    return AnimatedBuilder(
      animation: _egIK3uJelQoYZgGwO56XgdR,
      builder: (context, child) {
        return SizedBox(height: _egIK3uJelQoYZgGwO56XgdR.value, child: child);
      },
      child: Stack(
        children: [
          _norG1EG8Betgew8Ukp7(
            animation: _gPYIBYONyp2vpB9K9jvp,
            left: 5,
            bottom: 12,
            bubble: _zIWCuiXRpTGse21NI(),
          ),
        ],
      ),
    );
  }

  @override
  void didUpdateWidget(VVD4hVG2ByG8nYd oldWidget) {
    super.didUpdateWidget(oldWidget);

    if (widget.mN4SgLmYkM52z != oldWidget.mN4SgLmYkM52z) {
      if (widget.mN4SgLmYkM52z) {
        _vp3U9QTmDCDWp();
      } else {
        _gyKqYdT9YeJrj();
      }
    }
  }

  @override
  void initState() {
    super.initState();
    if (mounted) _io5tmMhdeR68mIMaZIz0cHsBzi0uj();
  }

  Widget _norG1EG8Betgew8Ukp7({
    required Animation<double> animation,
    required double left,
    required double bottom,
    required Widget bubble,
  }) {
    return Positioned(
      left: left,
      bottom: bottom,
      child: AnimatedBuilder(
        animation: animation,
        builder: (context, child) {
          return Transform.scale(
            scale: animation.value,
            alignment: Alignment.centerLeft,
            child: child,
          );
        },
        child: Row(
          children: [
            Consumer<KcW2piApkl1W>(
              builder: (context, chatProvider, _) {
                // 4Gpnas Z1ylj
                // t2KyNMcOQTK
                final String configAvatarUrl =
                    widget.vf07iaxMjq0PYuw6NDu?.phf1VfVOm80LUt7RLik ?? '';
                final String avatarUrl = configAvatarUrl.isNotEmpty
                    ? configAvatarUrl
                    : chatProvider.rgtRgBKLdKkN1m1obex;

                // Pk1MMt9ktgw1qhfKMz8zV
                final String configDisplayName =
                    widget.vf07iaxMjq0PYuw6NDu?.psEXLdo4TJn4URNS3ZYl2 ?? '';
                final String displayName = configDisplayName.trim().isNotEmpty
                    ? configDisplayName
                    : chatProvider.rJgzJATR7MgveE;

                return SRVOMKFbwyelB(
                  suDRBIWT36Y3Q: 0,
                  rHsbAIQo: avatarUrl,
                  displayName: displayName,
                  iFVBnhdz2: t6ef5oRy23G8drSby2EpIyhiUD?.vJlcDvYwA,
                  dT00G0YfNnfP9BbIBBBgEa:
                      t6ef5oRy23G8drSby2EpIyhiUD?.zBh6XtwYBnScOYNMZvMIcG,
                  aw7EgmBB9G4oV6C9IM4cEI5p:
                      t6ef5oRy23G8drSby2EpIyhiUD?.fNDVljxaUl3MphomHDSCksJA,
                  c6iIKHddaasHtc7OkD:
                      t6ef5oRy23G8drSby2EpIyhiUD?.hM7rOP6YOMi7lPEdhQ ??
                      Constants.profileImage,
                  hT9JIDp3L4ezwGpIfxD4FsVltSkA9V8oqL1m:
                      t6ef5oRy23G8drSby2EpIyhiUD
                          ?.hnB1Z4AE6OdxsqyAI2TNYz5EuaKo9JKphBFR,
                );
              },
            ),
            bubble,
          ],
        ),
      ),
    );
  }

  Widget _zIWCuiXRpTGse21NI() {
    return Container(
      padding:
          vlltysQMKKMppz0E?.tsCF3HP ??
          const EdgeInsets.fromLTRB(
            leftPadding3,
            0,
            leftPadding3,
            leftPadding3,
          ),
      margin: vlltysQMKKMppz0E?.tZHB1O ?? const EdgeInsets.fromLTRB(5, 0, 6, 2),
      decoration: BoxDecoration(
        borderRadius:
            vlltysQMKKMppz0E?.wQLzPEZbDtGw ??
            BorderRadius.circular(replyBorderRadius2),
        color: vlltysQMKKMppz0E?.aJV0n ?? Colors.grey.shade500,
      ),
      child: Padding(
        padding: const EdgeInsets.symmetric(vertical: 10.0),
        child: Row(
          children: [
            _buDakcSV60CJb9xhTqs(2, 0),
            _buDakcSV60CJb9xhTqs(1, 1),
            _buDakcSV60CJb9xhTqs(0, 2),
          ],
        ),
      ),
    );
  }

  void _io5tmMhdeR68mIMaZIz0cHsBzi0uj() {
    _qZByAnXFvwkXbk981tJc = AnimationController(vsync: this)
      ..addListener(() {
        setState(() {
          if (false) {
            print(String.fromCharCodes(const <int>[119, 102, 101, 65, 119]));
          }
        });
      });

    _egIK3uJelQoYZgGwO56XgdR = CurvedAnimation(
      parent: _qZByAnXFvwkXbk981tJc,
      curve: const Interval(0.0, 0.4, curve: Curves.easeOut),
      reverseCurve: const Interval(0.0, 1.0, curve: Curves.easeOut),
    ).drive(Tween<double>(begin: 0.0, end: 60.0));

    _gPYIBYONyp2vpB9K9jvp = CurvedAnimation(
      parent: _qZByAnXFvwkXbk981tJc,
      curve: const Interval(0.3, 1.0, curve: Curves.elasticOut),
      reverseCurve: const Interval(0.5, 1.0, curve: Curves.easeOut),
    );

    _lTP2BaBsLQ18XAOoqbE = AnimationController(
      vsync: this,
      duration: const Duration(milliseconds: 1500),
    );

    for (int i = 0; i < 3; i++) {
      _a9y6Z5RcetN6p6P.add(
        AnimationController(
          vsync: this,
          duration: const Duration(milliseconds: 500),
          reverseDuration: const Duration(milliseconds: 500),
        ),
      );
      _gxRXLNxaqcYeO1.add(
        CurvedAnimation(
          parent: _a9y6Z5RcetN6p6P[i],
          curve: Interval((0.2 * i), 0.7, curve: Curves.easeOutSine),
          reverseCurve: Interval((0.2 * i), 0.7, curve: Curves.easeOut),
        ).drive(Tween<double>(begin: 0, end: 10)),
      );
    }

    if (widget.mN4SgLmYkM52z) {
      _vp3U9QTmDCDWp();
    }
  }

  double get mbPYgnzZeiCre => widget.vf07iaxMjq0PYuw6NDu?.ejc4GZB1k03Tc ?? 10;

  @override
  void dispose() {
    _qZByAnXFvwkXbk981tJc.dispose();
    if (false) {
      print(String.fromCharCodes(const <int>[118, 85, 115, 106, 65]));
    }
    _lTP2BaBsLQ18XAOoqbE.dispose();
    for (var element in _a9y6Z5RcetN6p6P) {
      element.dispose();
    }
    super.dispose();
  }

  Color? get o0ZSNVNjIOiXE4H9OqG13NVlI =>
      widget.vf07iaxMjq0PYuw6NDu?.mXgX6iGTqvKMojLMl6QUtaJSW ??
      const Color(0xFFadacb0);

  void _vp3U9QTmDCDWp() {
    _qZByAnXFvwkXbk981tJc
      ..duration = const Duration(milliseconds: 750)
      ..forward();
    _lTP2BaBsLQ18XAOoqbE.repeat();
    for (int i = 0; i < 3; i++) {
      _a9y6Z5RcetN6p6P[i].repeat(reverse: true);
    }
  }

  Widget _buDakcSV60CJb9xhTqs(int value, int index) {
    return AnimatedBuilder(
      animation: _gxRXLNxaqcYeO1[value],
      builder: (context, child) {
        final circleFlashPercent = _iMKNMe3VbvgV[index].transform(
          _lTP2BaBsLQ18XAOoqbE.value,
        );
        final circleColorPercent = sin(pi * circleFlashPercent);
        return Transform.translate(
          offset: Offset(0, _gxRXLNxaqcYeO1[value].value),
          child: Container(
            width: mbPYgnzZeiCre,
            height: mbPYgnzZeiCre,
            margin: EdgeInsets.symmetric(horizontal: zyqG65K7EYIQeIjw),
            decoration: BoxDecoration(
              shape: BoxShape.circle,
              color: Color.lerp(
                qaEACP5M5Cq5k0aorIWxTW7,
                o0ZSNVNjIOiXE4H9OqG13NVlI,
                circleColorPercent,
              ),
            ),
          ),
        );
      },
    );
  }

  void _gyKqYdT9YeJrj() {
    _qZByAnXFvwkXbk981tJc
      ..duration = const Duration(milliseconds: 150)
      ..reverse();
    _lTP2BaBsLQ18XAOoqbE.stop();
    for (int i = 0; i < 3; i++) {
      _a9y6Z5RcetN6p6P[i].stop();
    }
  }

  double get zyqG65K7EYIQeIjw =>
      widget.vf07iaxMjq0PYuw6NDu?.uCcqYMdEKfNA9y79 ?? 4;
}
