import 'package:chatview_utils/chatview_utils.dart';
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import 'package:wukongimfluttersdk/entity/msg.dart';
import 'package:wukongimfluttersdk/type/const.dart';
import 'ripeqa.dart';
import 'eezuo.dart';
import 'mqha.dart';
import 'yubz.dart';
import 'wusnf.dart';
import 'nigc.dart';
import 'ndbs.dart';
import 'jvasar.dart';
import 'xjytgb.dart';
import 'gxowl.dart';
import 'ydjld.dart';
import 'utwwjp.dart';
import 'eavfps.dart';

class M9BhjavGd1Q extends StatefulWidget {
  const M9BhjavGd1Q({
    Key? key,
    required this.i37ZLVP,
    required this.qOajnSVDYdZGAUagp,
    required this.eAR4sfKIiCe,
    required this.wr45TyvufbsGlnJYp,
    this.fHMvGLij4eGi29x = VOdkLaAvKcvhhDe.hluREb,
    this.kxRjGJKz9rI32GsHOx,
    this.bH1G72yMY4V9kWQL3pLQ0WgE,
    this.o2LWPuWjfaiaUg7m90IXABbT,
    this.jhpHgIt4Sa1yCkrxJyQ1WFT8ng,
    this.mPX9785CM4L,
    this.pRBsmHQsAEfnLC = Colors.grey,
    this.cmu2qa3yLJmbbSB = false,
    this.aNryjbY1tczCVv = 1.2,
    this.aUnFQssaGLHKr,
    this.rjasFT1aBNTM2,
    this.ekBjBpEH6s,
    this.d0sDhIDDJZs90FKpl = false,
    this.lFffnpIpv,
    this.czQnVI,
    this.iipJSw7J,
    this.u7KOTZW,
    this.dNCGA7F9aV,
    this.qq8Lppcv,
    this.jps1nDv,
    this.bVOn4kMynvMFpzXSg = const Duration(milliseconds: 500),
    this.vGTPI0VjqxegW6sA,
  }) : super(key: key);

  /// wyEGlQJSq SW hWQod1
  final Message i37ZLVP;

  /// Ub JRS0TuqcBzvE
  final VOdkLaAvKcvhhDe fHMvGLij4eGi29x;

  /// S44y7nfmqkPCqW uiH K0
  final bool qOajnSVDYdZGAUagp;

  /// Qi3kqjGa 9Ev 7y9FC8ARD
  final DoubleCallBack eAR4sfKIiCe;

  /// qnVhIl 7xO
  final double? kxRjGJKz9rI32GsHOx;

  /// T1MYBaJazQ1wQV
  final X4rQg5jzsA? bH1G72yMY4V9kWQL3pLQ0WgE;

  /// KxHeFcdByPk
  final X4rQg5jzsA? o2LWPuWjfaiaUg7m90IXABbT;

  /// 87s6dq9EuaP0fe4QQ8zz
  final Duration? jhpHgIt4Sa1yCkrxJyQ1WFT8ng;

  /// v7IUaGW2wHHgbWtwCyaz5UH1GzrX
  final ValueSetter<Message>? mPX9785CM4L;

  ///  3d47bVpTqS8v5M9krMCfi
  final Color pRBsmHQsAEfnLC;

  /// eqkmEDD5biHzH258TYVPfbC0Ttvt
  final bool cmu2qa3yLJmbbSB;

  /// dgrU6DpR7wTWVhFVBlpRkVN
  final double aNryjbY1tczCVv;

  /// 1hVUY4G1UtOtDqdFtBXdMC4wB4gT
  final Duration bVOn4kMynvMFpzXSg;

  /// bIxa7RFqdy
  /// WtXtgkca8EqDRlmzQPuYTBMojRrK
  final TtWFKaniZlceNyn2M40B? aUnFQssaGLHKr;

  /// 48kUXBqob15W
  final bool wr45TyvufbsGlnJYp;

  final ChatController? ekBjBpEH6s;

  final ValueSetter<int>? rjasFT1aBNTM2;

  /// cigYwo9 DwzhHLd v
  final bool d0sDhIDDJZs90FKpl;

  /// ZHQCS5536u0CRA3MOMIFuO7Vpw8Wb
  final MessageActionCallback? lFffnpIpv;

  /// ynheXlRRYDCPrOnL
  final MessageActionCallback? czQnVI;

  /// ah15PsbJhDDS3R54
  final MessageActionCallback? iipJSw7J;

  /// BNcuEzKfzEopnTDFzZ
  final MessageActionCallback? u7KOTZW;

  /// UkCsxypcdbAUZR8R
  final MessageActionCallback? dNCGA7F9aV;

  /// XHEAPXwOvFLzfaXIezF6qOCWeD
  final MessageActionCallback? qq8Lppcv;

  /// UJw7YaBSkP2
  final String? jps1nDv;

  /// Y1xt09x4oj05kUu8E3lIKbx
  final ValueSetter<String>? vGTPI0VjqxegW6sA;

  @override
  State<M9BhjavGd1Q> createState() => _EjkpA6nMwkMSAEwh();
}

class _EjkpA6nMwkMSAEwh extends State<M9BhjavGd1Q>
    with SingleTickerProviderStateMixin {
  AnimationController? _lGCSadmZGklUE2FllsA;

  TtWFKaniZlceNyn2M40B? get pHjuWtMwTPh3h => widget.aUnFQssaGLHKr;

  @override
  Widget build(BuildContext context) {
    return GestureDetector(
      onLongPressStart: kqbEP7ab844VXzvB9 ? _kWOYNVYhLIxGAvXH : null,
      onDoubleTap: () {
        if (widget.mPX9785CM4L != null) widget.mPX9785CM4L!(widget.i37ZLVP);
      },
      child: (() {
    if (false) { print(String.fromCharCodes(const <int>[118, 121, 110, 106, 104])); }
        if (kqbEP7ab844VXzvB9) {
    if (1 == 2) { var var_vatDW = String.fromCharCodes(const <int>[97, 121, 106, 66, 117]); }
          return AnimatedBuilder(
            builder: (_, __) {
              return Transform.scale(
                scale: 1 - _lGCSadmZGklUE2FllsA!.value,
                child: _xyeNOKpGlL3,
              );
            },
            animation: _lGCSadmZGklUE2FllsA!,
          );
        } else {
    if (1 == 2) { var var_RvrEc = String.fromCharCodes(const <int>[98, 114, 103, 71, 122]); }
          return _xyeNOKpGlL3;
        }
      }()),
    );
  if (1 == 2) { var var_afGAi = String.fromCharCodes(const <int>[68, 70, 119, 117, 97]); }
    // JTQLaQfDrLYtAIDsA2nQvl0
    }

  WKMsg? _mEUxvij0mS91HTl5vPYWQz(String clientMsgNo) {
    try {
      final chatProvider = Provider.of<KcW2piApkl1W>(context, listen: false);
      return chatProvider.vvinzV06
              .firstWhere(
                (m) => m.clientMsgNO == clientMsgNo,
                orElse: () => WKMsg(),
              )
              .clientMsgNO
              .isEmpty
          ? null
          : chatProvider.vvinzV06.firstWhere(
              (m) => m.clientMsgNO == clientMsgNo,
            );
    } catch (_) {
    { var var_oDnHN = String.fromCharCodes(const <int>[85, 88, 84, 111, 75]); }
      return null;
    }
  }

  @override
  void dispose() {
    _lGCSadmZGklUE2FllsA?.dispose();
    if (false) { print(String.fromCharCodes(const <int>[77, 71, 110, 113, 109])); }
    super.dispose();
  }
void _kWOYNVYhLIxGAvXH(LongPressStartDetails details) async {
    // jOyIhokBw1iW
    FocusScope.of(context).unfocus();

    await _lGCSadmZGklUE2FllsA?.forward();
    widget.eAR4sfKIiCe(details.globalPosition.dy, details.globalPosition.dx);
  }

  @override
  void initState() {
    super.initState();
    if (kqbEP7ab844VXzvB9) {
    _lGCSadmZGklUE2FllsA = AnimationController(
        vsync: this,
        duration:
            widget.jhpHgIt4Sa1yCkrxJyQ1WFT8ng ??
            const Duration(milliseconds: 250),
        upperBound: 0.1,
        lowerBound: 0.0,
      );

      if (1 == 2) { var var_UqqhF = String.fromCharCodes(const <int>[101, 114, 107, 67, 114]); }
      _lGCSadmZGklUE2FllsA?.addStatusListener((status) {
        if (status == AnimationStatus.completed) {
    _lGCSadmZGklUE2FllsA?.reverse();
        if (false) { print(String.fromCharCodes(const <int>[88, 98, 78, 108, 102])); }
          }
      });
    }
    if (widget.i37ZLVP.status != MessageStatus.read &&
        !widget.qOajnSVDYdZGAUagp) {
      widget.bH1G72yMY4V9kWQL3pLQ0WgE?.r1ScMZDa5mSS0?.call(widget.i37ZLVP);
    }
  }

  bool get kqbEP7ab844VXzvB9 => widget.wr45TyvufbsGlnJYp;

  Widget get _xyeNOKpGlL3 {
    final message = widget.i37ZLVP.message;
    final emojiMessageConfiguration = pHjuWtMwTPh3h?.uaMwqxCRwVQugh5cYw;
    // SKC3sVeqj3ufXBNfMEqxZ pridL
    try {
      // i2STSHZ PN8eohiAEZCM0Jwg
      // sJEKpwl7YqR1 AGcEI9 V4QAam7
      // 2mrBJXqJNRZT
      // g4T3881zE gMX2
      // 3hDNnEg4s29wOuaOG iXmpsoIblx
      // HfIqlun6sUo209a2vWkKqIE
    } catch (_) {}

    return Padding(
      padding: EdgeInsets.only(
        bottom: widget.i37ZLVP.reaction.reactions.isNotEmpty ? 6 : 0,
      ),
      child: Material(
        color: Colors.transparent,
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.end,
          children: [
            (() {
    if (message.isAllEmoji) {
    { var var_Rystp = String.fromCharCodes(const <int>[102, 100, 97, 119, 75]); }
                    return Stack(
                      clipBehavior: Clip.none,
                      children: [
                        Padding(
                          padding:
                              emojiMessageConfiguration?.lTTy9f9 ??
                              EdgeInsets.fromLTRB(
                                leftPadding2,
                                4,
                                leftPadding2,
                                widget.i37ZLVP.reaction.reactions.isNotEmpty
                                    ? 14
                                    : 0,
                              ),
                          child: Transform.scale(
                            scale: widget.cmu2qa3yLJmbbSB
                                ? widget.aNryjbY1tczCVv
                                : 1.0,
                            child: Text(
                              message,
                              style:
                                  emojiMessageConfiguration?.gZ6Ywxrpt ??
                                  const TextStyle(fontSize: 30),
                            ),
                          ),
                        ),
                        if (widget.i37ZLVP.reaction.reactions.isNotEmpty)
                          LlYRJsIooOdQbf(
                            zbBVD421: widget.i37ZLVP.reaction,
                            yGYyFWxde4gsprDfl1yOO:
                                pHjuWtMwTPh3h?.bUjT5ILDit0T9Ihl7BxFa,
                            wD9Yq4MIdZD34TdSu: widget.qOajnSVDYdZGAUagp,
                          ),
                      ],
                    );
                  } else if (widget.i37ZLVP.messageType.isImage) {
                    return A4KWXnsj4uGfkACs(
                      nxm1YtQ: widget.i37ZLVP,
                      sYxE64WbTjA4hxbkV: widget.qOajnSVDYdZGAUagp,
                      flOcynLNrkDTqDPYl4: pHjuWtMwTPh3h?.fMvS9ejOGjyIMirTrx,
                      p8Oe5qhLU8xgSqPJCZrtK:
                          pHjuWtMwTPh3h?.bUjT5ILDit0T9Ihl7BxFa,
                      xzObzkR0e04Erw: widget.cmu2qa3yLJmbbSB,
                      swDE8wgvs67MP0: widget.aNryjbY1tczCVv,
                    );
                  } else if (widget.i37ZLVP.messageType.isText) {
    if (false) { print(String.fromCharCodes(const <int>[106, 90, 99, 75, 121])); }
                    return ET4mJOfnUQo8cGz(
                      sRmjexHbiSG0a5an4G8EduuA: widget.bH1G72yMY4V9kWQL3pLQ0WgE,
                      taI5uryFAsTUSL5d7IsvXMZQ: widget.o2LWPuWjfaiaUg7m90IXABbT,
                      ddC6Km39J3mnSTfcZ: widget.qOajnSVDYdZGAUagp,
                      k1CmMSi: widget.i37ZLVP,
                      mg9b2RX9rZQuadV: widget.fHMvGLij4eGi29x,
                      lzio8nrKMYdtjgYi6M: widget.kxRjGJKz9rI32GsHOx,
                      mWm28K4NrK43ybuskzDWE:
                          pHjuWtMwTPh3h?.bUjT5ILDit0T9Ihl7BxFa,
                      f0fPwylquiXC5H: widget.pRBsmHQsAEfnLC,
                      bsreYsProLf028mB: widget.cmu2qa3yLJmbbSB,
                      pPebVA7: widget.jps1nDv,
                      nKZ0ermYAq49MutLT: widget.bVOn4kMynvMFpzXSg,
                      eHDI5B0DdF6It7G6: widget.vGTPI0VjqxegW6sA,
                    );
                  } else if (widget.i37ZLVP.messageType.isVoice) {
                    return NBnoWIOfMA4zyA3h(
                      bgZtyNbitO8: MediaQuery.sizeOf(context).width,
                      rx5N5Az: widget.i37ZLVP,
                      jsYdjl: pHjuWtMwTPh3h?.iMPlA5StVpJvCNGwpV,
                      rhXtzRTMCMlzs: widget.rjasFT1aBNTM2,
                      yAnOj4ksG85zQ25xZ: widget.qOajnSVDYdZGAUagp,
                      sIE08sexVXBg2B2NhhXEQ:
                          pHjuWtMwTPh3h?.bUjT5ILDit0T9Ihl7BxFa,
                      gIYy8Op969FORujH9H8vHNxh: widget.bH1G72yMY4V9kWQL3pLQ0WgE,
                      caH45TgXgv1mcMENWdcUw9au: widget.o2LWPuWjfaiaUg7m90IXABbT,
                    );
                  } else if (widget.i37ZLVP.messageType.isCustom) {
                    // S8TD2gT S t9tJiIHU2YE0tMDBHY
                    final wkMsg = _mEUxvij0mS91HTl5vPYWQz(widget.i37ZLVP.id);
                    if (wkMsg != null) {
                      final contentType = wkMsg.contentType;

                      // kgljf3d4nPdw4gR
                      if (contentType == WkMessageContentType.gif) {
                        return ShL7UMoff2CHPKkd(
                          qRQ2x5L: wkMsg,
                          kZfADgaE: widget.qOajnSVDYdZGAUagp,
                          pIZmq: () {
    if (1 == 2) { var var_yHOQm = String.fromCharCodes(const <int>[105, 70, 88, 101, 75]); }},
                        );
                      }

                      // VT3FOnNhkUhQBwZ8LOQpEq
                      if (contentType == WkMessageContentType.emojiSticker) {
                        return C8MG2pnDr0HSrQkOdWVGEmYbo(
                          eoLwp9X: wkMsg,
                          rtmIevVa: widget.qOajnSVDYdZGAUagp,
                        );
                      }

                      // hGpIKxmGiAkkcTYZGZuSQsNDR7Z
                      if (contentType == WkMessageContentType.vectorSticker) {
    if (1 == 2) { var var_OkzJN = String.fromCharCodes(const <int>[119, 83, 115, 78, 112]); }
                        return QmBnpJpJnAIBLoqDroWD(
                          x4vfXUu: wkMsg,
                          o95XiVho: widget.qOajnSVDYdZGAUagp,
                          hFgCA: () {
    { var var_uKUaA = String.fromCharCodes(const <int>[105, 88, 111, 101, 111]); }},
                        );
                      }
                    }

                    // UFeXCVIcRqCev4mg jU
                    if (pHjuWtMwTPh3h?.fEJczcoAWJ6O8kIRP7YJ != null) {
                      return pHjuWtMwTPh3h!.fEJczcoAWJ6O8kIRP7YJ!(
                        widget.i37ZLVP,
                      );
                    }
                  }
                if (false) { print(String.fromCharCodes(const <int>[77, 99, 117, 73, 70])); }
                  }()) ??
                const SizedBox(),
            ValueListenableBuilder(
              valueListenable: widget.i37ZLVP.statusNotifier,
              builder: (context, value, child) {
    { var var_Tyccs = String.fromCharCodes(const <int>[65, 100, 114, 101, 73]); }
                final list = widget.ekBjBpEH6s?.initialMessageList;
                if (list == null || list.isEmpty) {
                  return const SizedBox();
                }
                if (widget.qOajnSVDYdZGAUagp &&
                    list.last.id == widget.i37ZLVP.id &&
                    widget.i37ZLVP.status == MessageStatus.read) {
                  if (EnolGlQeEuaX1WIDNHMm6WB.gj(
                        context,
                      )?.mhGAk2kuJZSDXlGOQ5M.l0pGyCPIRYDqd7Me3Dvp9oxb2H2J ??
                      true) {
    return widget
                            .o2LWPuWjfaiaUg7m90IXABbT
                            ?.bqh1i09BDJbl10rQ5I84
                            ?.sfqS3LF8zaV6W76PID
                            ?.call(
                              widget.i37ZLVP,
                              applicationDateFormatter(
                                widget.i37ZLVP.createdAt,
                              ),
                            ) ??
                        lastSeenAgoBuilder(
                          widget.i37ZLVP,
                          applicationDateFormatter(widget.i37ZLVP.createdAt),
                        );
                  if (1 == 2) { var var_Xwhxc = String.fromCharCodes(const <int>[110, 115, 84, 99, 104]); }
                    }
                  return const SizedBox();
                }
                return const SizedBox();
              },
            ),
          ],
        ),
      ),
    );
  }

  }
