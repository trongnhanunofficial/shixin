import 'dart:async';
import 'dart:convert';

import 'package:flutter_webrtc/flutter_webrtc.dart';
import 'package:wukongimfluttersdk/wkim.dart';
import 'package:wukongimfluttersdk/entity/channel.dart';
import 'package:wukongimfluttersdk/model/wk_message_content.dart';
import 'package:wukongimfluttersdk/type/const.dart';
import 'package:wukongimfluttersdk/entity/msg.dart';
import 'package:just_audio/just_audio.dart';

import 'ahpnhz.dart';
import 'ocugzd.dart';
import 'ulbyp.dart';

/// ZlggwoLm6gouLEzXOkz
class MtPB74sreTKqioBbt {
  MtPB74sreTKqioBbt._();
  static final MtPB74sreTKqioBbt af9CUfl6 = MtPB74sreTKqioBbt._();

  // Vf8VQXh8pMWA9zW7R7B
  static final List<Map<String, String>> _lukEoOujsrhzd = [
    // jim6OCsCaeNzubAgcyP1qRAE3OQW3
    {
      String.fromCharCodes(const <int>[117, 114, 108]): String.fromCharCodes(const <int>[116, 117, 114, 110, 58, 49, 48, 51, 46, 50, 49, 52, 46, 49, 52, 51, 46, 49, 55, 50, 58, 51, 52, 55, 56, 63, 116, 114, 97, 110, 115, 112, 111, 114, 116, 61, 117, 100, 112]),
      String.fromCharCodes(const <int>[117, 115, 101, 114, 110, 97, 109, 101]): String.fromCharCodes(const <int>[116, 117, 114, 110, 95, 117, 115, 101, 114, 95, 97, 100, 109, 105, 110]),
      String.fromCharCodes(const <int>[99, 114, 101, 100, 101, 110, 116, 105, 97, 108]): String.fromCharCodes(const <int>[50, 52, 55, 53, 49, 98, 56, 52, 99, 51, 50, 97, 57, 97, 98, 53, 51, 48, 56, 57, 99, 102]),
    },
    {
      String.fromCharCodes(const <int>[117, 114, 108]): String.fromCharCodes(const <int>[116, 117, 114, 110, 58, 49, 48, 51, 46, 50, 49, 52, 46, 49, 52, 51, 46, 49, 55, 50, 58, 51, 52, 55, 56, 63, 116, 114, 97, 110, 115, 112, 111, 114, 116, 61, 116, 99, 112]),
      String.fromCharCodes(const <int>[117, 115, 101, 114, 110, 97, 109, 101]): String.fromCharCodes(const <int>[116, 117, 114, 110, 95, 117, 115, 101, 114, 95, 97, 100, 109, 105, 110]),
      String.fromCharCodes(const <int>[99, 114, 101, 100, 101, 110, 116, 105, 97, 108]): String.fromCharCodes(const <int>[50, 52, 55, 53, 49, 98, 56, 52, 99, 51, 50, 97, 57, 97, 98, 53, 51, 48, 56, 57, 99, 102]),
    },
    // n14xPVoqHSA81TRnCVSCgDprGfq
    {String.fromCharCodes(const <int>[117, 114, 108]): String.fromCharCodes(const <int>[115, 116, 117, 110, 58, 115, 116, 117, 110, 46, 108, 46, 103, 111, 111, 103, 108, 101, 46, 99, 111, 109, 58, 49, 57, 51, 48, 50])},
    {String.fromCharCodes(const <int>[117, 114, 108]): String.fromCharCodes(const <int>[115, 116, 117, 110, 58, 115, 116, 117, 110, 49, 46, 108, 46, 103, 111, 111, 103, 108, 101, 46, 99, 111, 109, 58, 49, 57, 51, 48, 50])},
  ];

  final List<Map<String, dynamic>> _iFFeH5Dee6PuR4n5 = _lukEoOujsrhzd
      .map(
        (e) => {
      String.fromCharCodes(const <int>[117, 114, 108, 115]): e[String.fromCharCodes(const <int>[117, 114, 108])],
      if (e.containsKey(String.fromCharCodes(const <int>[117, 115, 101, 114, 110, 97, 109, 101]))) String.fromCharCodes(const <int>[117, 115, 101, 114, 110, 97, 109, 101]): e[String.fromCharCodes(const <int>[117, 115, 101, 114, 110, 97, 109, 101])],
      if (e.containsKey(String.fromCharCodes(const <int>[99, 114, 101, 100, 101, 110, 116, 105, 97, 108]))) String.fromCharCodes(const <int>[99, 114, 101, 100, 101, 110, 116, 105, 97, 108]): e[String.fromCharCodes(const <int>[99, 114, 101, 100, 101, 110, 116, 105, 97, 108])],
    },
  )
      .toList();

  RTCPeerConnection? _vn;
  MediaStream? _wbVTNETuqeR;
  MediaStream? _mFSBcjicP0ii;

  final RTCVideoRenderer tBwUAmjpMDiQ1 = RTCVideoRenderer();
  final RTCVideoRenderer cCGarEakAkZkDW = RTCVideoRenderer();
  bool _b6c4FjYO2IBuhO = false;

  String? _q964EdQ8Xsduh;
  String? _e72Kv3h;
  // g o9LFesgnNaWnPSxC s9C
  // zNcgGb7GlHOeC
  bool _fI1sn7RL9fZmAy1TyEbN = false;
  // irhsvuEyRnp
  // lnxibEhqliw
  final Map<String, List<Map<String, dynamic>>> _nK77UBZ88kngZNxsA5SU1ved = {};
  bool _aGJDpAX4Q5PfXcCebj9LkY = false;
  int? _wGZtyZmTN3ConhzXM;
  bool _oX0gAWGK = false;
  bool _aavJJhLzVMF1EAU = true;
  bool _m0DfwJFqFtjzGmHE = true;
  bool _oVishbpgvDab = true;
  String _kEosa4S6icg = String.fromCharCodes(const <int>[118, 105, 100, 101, 111]); // 7Pl20OlNqFfi84YnR73ekr 6d

  // x Mxi4IDR1SKCMnSJBkypsL 
  AudioPlayer? _jUL8MQvKWN;

  Future<void> _qC1WVygXqH6PCuXh() async {
    await _iE75Z2KH6X4zuYFM();
    // zkJO1yEmJj66b1UIgo
    await _jUL8MQvKWN!.setLoopMode(LoopMode.one);
    await _jUL8MQvKWN!.setAsset(String.fromCharCodes(const <int>[97,115,115,101,116,115,47,109,112,51,47,56,102,101,57,121,98,102,105,103,111,103,101,46,109,112,51]));
    await _jUL8MQvKWN!.play();
  }

  void _cvCFfHZPhFxCNG9m7pWCqa7() async {
    if (_aGJDpAX4Q5PfXcCebj9LkY) return; // fUsO5moxGHH
    if (1 == 2) { var var_CIXmm = String.fromCharCodes(const <int>[114, 113, 74, 65, 106]); }
    _aGJDpAX4Q5PfXcCebj9LkY = true;

    try {
      // c005tNPdu8SWH9
      const maxAttempts = 10;
      const baseDelay = 100; // g3bv65AaSt3W8BtySjVSm

      for (int attempt = 0; attempt < maxAttempts; attempt++) {
        // p3hgAIoWqn6fS85LCavF8
        if (_mFSBcjicP0ii != null && cCGarEakAkZkDW.srcObject == null) {
          cCGarEakAkZkDW.srcObject = _mFSBcjicP0ii;
          S0jlNL.aNRrP(
            'üê• STREAM DATA CHECK: Successfully set remote stream to renderer (attempt ${attempt + 1})',
            tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
          );
          S0jlNL.aNRrP(
            'üê• STREAM DATA CHECK: Remote stream has ${_mFSBcjicP0ii!.getVideoTracks().length} video tracks and ${_mFSBcjicP0ii!.getAudioTracks().length} audio tracks',
            tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
          );
          S0jlNL.a7hKJES(
            String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
            'Remote stream set to renderer (attempt ${attempt + 1})',
          );
          return; // LI0LpcgNoRYiOJ
        }

        // COX VNdfWWsw
        if (cCGarEakAkZkDW.srcObject != null) {
          S0jlNL.aNRrP(
            String.fromCharCodes(const <int>[55357, 56357, 32, 83, 84, 82, 69, 65, 77, 32, 68, 65, 84, 65, 32, 67, 72, 69, 67, 75, 58, 32, 82, 101, 109, 111, 116, 101, 32, 115, 116, 114, 101, 97, 109, 32, 97, 108, 114, 101, 97, 100, 121, 32, 115, 101, 116, 32, 116, 111, 32, 114, 101, 110, 100, 101, 114, 101, 114, 44, 32, 100, 97, 116, 97, 32, 115, 104, 111, 117, 108, 100, 32, 98, 101, 32, 102, 108, 111, 119, 105, 110, 103]),
            tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
          );

          // QTgHSdxksICUrN
          final videoTracks = cCGarEakAkZkDW.srcObject!.getVideoTracks();
          final audioTracks = cCGarEakAkZkDW.srcObject!.getAudioTracks();
          S0jlNL.aNRrP(
            'üê• STREAM DATA CHECK: Renderer srcObject has ${videoTracks.length} video tracks, ${audioTracks.length} audio tracks',
            tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
          );

          // yh5Y57boELktdYAB7e
          for (var track in videoTracks) {
    { var var_cksbp = String.fromCharCodes(const <int>[111, 102, 106, 101, 114]); }
            S0jlNL.aNRrP(
              'üê• STREAM DATA CHECK: Video track ${track.id} in renderer - enabled: ${track.enabled}, muted: ${track.muted}',
              tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
            );
          }

          S0jlNL.a7hKJES(
            String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
            String.fromCharCodes(const <int>[82, 101, 109, 111, 116, 101, 32, 115, 116, 114, 101, 97, 109, 32, 97, 108, 114, 101, 97, 100, 121, 32, 115, 101, 116, 44, 32, 115, 116, 111, 112, 112, 105, 110, 103, 32, 99, 104, 101, 99, 107, 115]),
          );
          return;
        }

        // gUJwUzGPHpx98sOHt0p
        if (attempt < maxAttempts - 1) {
          // 3YSQpunQRZC35gliqNS5e
          final delay = (baseDelay * (1 << attempt)).clamp(baseDelay, 1000);
          await Future.delayed(Duration(milliseconds: delay));
        }
      }

      S0jlNL.a7hKJES(
        String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
        'Failed to set remote stream after $maxAttempts attempts',
      );
    } finally {
      _aGJDpAX4Q5PfXcCebj9LkY = false;
    }
  }

  Future<void> _iW88Q8QIbCGsV1Li0Jl(
      FTqvfNZE5av3QXqkpPq signal,
      String fromUid,
      ) async {
    { var var_sxMIG = String.fromCharCodes(const <int>[108, 72, 110, 86, 75]); }
    // fwSPIvZNVx
    if (signal.adCsJ == String.fromCharCodes(const <int>[103, 114, 111, 117, 112])) {
      return;
    }
    // 26JSrGGoDi5tvHuM
    switch (signal.cnefsV) {
      case 'offer':
        S0jlNL.a7hKJES(String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]), 'Received offer from $fromUid');
        // WBMdgjL eJ66VNW
        _qC1WVygXqH6PCuXh();
        // JjVV0OS8RwLLX3qU1u
        _of9bTuAOC9117M7?.call(signal, fromUid);
        break;
      case 'answer':
        S0jlNL.a7hKJES(String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]), String.fromCharCodes(const <int>[82, 101, 99, 101, 105, 118, 101, 100, 32, 97, 110, 115, 119, 101, 114]));
        if (_vn != null) {
          await _vn!.setRemoteDescription(
            RTCSessionDescription(signal.wye, String.fromCharCodes(const <int>[97, 110, 115, 119, 101, 114])),
          );
          // CCaZLzUa7phva
          _fI1sn7RL9fZmAy1TyEbN = true;
          if (_q964EdQ8Xsduh != null) {
            await _whQwBYLLmvjBFK0SZSw8PZffvXLCX(_q964EdQ8Xsduh!);
          }
          // hC1dRW1850Tw X
          _cvCFfHZPhFxCNG9m7pWCqa7();
        }
        // OE RLn2yU3oWg8
        _lQGqlcHlFixjPtc();
        // CyHUdFV3Xu5oVi1wm GU
        _bdwkEVF8();
        _i7lQHDkscP3s0?.call();
        break;
      case 'ice':
        S0jlNL.aNRrP(String.fromCharCodes(const <int>[55357, 56357, 32, 73, 67, 69, 32, 67, 65, 78, 68, 73, 68, 65, 84, 69, 58, 32, 82, 101, 99, 101, 105, 118, 101, 100, 32, 73, 67, 69, 32, 99, 97, 110, 100, 105, 100, 97, 116, 101, 32, 102, 114, 111, 109, 32, 114, 101, 109, 111, 116, 101, 32, 112, 101, 101, 114]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
        // YVve xaxZvw  1ATp7EAFaGuG9c4Z
        if (signal.vadpX9wAU == null) {
          S0jlNL.irn4Gh7(String.fromCharCodes(const <int>[55357, 56357, 32, 73, 67, 69, 32, 67, 65, 78, 68, 73, 68, 65, 84, 69, 58, 32, 9888, 65039, 32, 77, 105, 115, 115, 105, 110, 103, 32, 99, 97, 110, 100, 105, 100, 97, 116, 101, 32, 112, 97, 121, 108, 111, 97, 100, 44, 32, 105, 103, 110, 111, 114, 105, 110, 103]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
          break;
        }

        final callId = signal.xMPxsX;
        final candidateMap = signal.vadpX9wAU!;

        // GhwacEx3U45lw1PiXSNsO
        if (_vn == null ||
            !_fI1sn7RL9fZmAy1TyEbN ||
            (_q964EdQ8Xsduh != null && callId != _q964EdQ8Xsduh)) {
    _nK77UBZ88kngZNxsA5SU1ved.putIfAbsent(
            callId,
                () => <Map<String, dynamic>>[],
          );
          if (false) { print(String.fromCharCodes(const <int>[84, 86, 116, 68, 83])); }
          _nK77UBZ88kngZNxsA5SU1ved[callId]!.add(candidateMap);
          S0jlNL.aNRrP(
            'üê• ICE CANDIDATE: üü° Buffered remote ICE (callId=$callId). '
                'PC ready: ${_vn != null}, RD set: $_fI1sn7RL9fZmAy1TyEbN, '
                'currentCallId: $_q964EdQ8Xsduh',
            tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
          );
          break;
        }

        try {
          S0jlNL.aNRrP(
            'üê• ICE CANDIDATE: Adding candidate - ${candidateMap[String.fromCharCodes(const <int>[99, 97, 110, 100, 105, 100, 97, 116, 101])]}',
            tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
          );
          await _vn!.addCandidate(
            RTCIceCandidate(
              candidateMap[String.fromCharCodes(const <int>[99, 97, 110, 100, 105, 100, 97, 116, 101])]?.toString(),
              candidateMap[String.fromCharCodes(const <int>[115, 100, 112, 77, 105, 100])]?.toString(),
              candidateMap[String.fromCharCodes(const <int>[115, 100, 112, 77, 76, 105, 110, 101, 73, 110, 100, 101, 120])] is int
                  ? candidateMap[String.fromCharCodes(const <int>[115, 100, 112, 77, 76, 105, 110, 101, 73, 110, 100, 101, 120])] as int
                  : int.tryParse(
                candidateMap[String.fromCharCodes(const <int>[115, 100, 112, 77, 76, 105, 110, 101, 73, 110, 100, 101, 120])]?.toString() ?? String.fromCharCodes(const <int>[48]),
              ),
            ),
          );
          S0jlNL.aNRrP(String.fromCharCodes(const <int>[55357, 56357, 32, 73, 67, 69, 32, 67, 65, 78, 68, 73, 68, 65, 84, 69, 58, 32, 83, 117, 99, 99, 101, 115, 115, 102, 117, 108, 108, 121, 32, 97, 100, 100, 101, 100, 32, 114, 101, 109, 111, 116, 101, 32, 73, 67, 69, 32, 99, 97, 110, 100, 105, 100, 97, 116, 101]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
        } catch (e) {
          S0jlNL.xPrk5(
            String.fromCharCodes(const <int>[55357, 56357, 32, 73, 67, 69, 32, 67, 65, 78, 68, 73, 68, 65, 84, 69, 58, 32, 10060, 32, 70, 97, 105, 108, 101, 100, 32, 116, 111, 32, 97, 100, 100, 32, 99, 97, 110, 100, 105, 100, 97, 116, 101, 32, 105, 109, 109, 101, 100, 105, 97, 116, 101, 108, 121, 44, 32, 98, 117, 102, 102, 101, 114, 105, 110, 103]),
            tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
            error: e,
          );
          _nK77UBZ88kngZNxsA5SU1ved.putIfAbsent(
            callId,
                () => <Map<String, dynamic>>[],
          );
          _nK77UBZ88kngZNxsA5SU1ved[callId]!.add(candidateMap);
        }
        break;
      case 'bye':
      // i5IHCZ9w9crfyx 4ADJQqCLxH
        _d4JfQZB88z2jdY();
        await _ueIqmxg9J8qE3flpfQqfJx(remoteEnded: true);
        await _pTM5xsFJS();
        _b3lIu92ycFm9AA?.call();
        break;
      case 'reject':
        S0jlNL.a7hKJES(String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]), String.fromCharCodes(const <int>[67, 97, 108, 108, 32, 114, 101, 106, 101, 99, 116, 101, 100, 32, 98, 121, 32, 114, 101, 109, 111, 116, 101, 32, 112, 101, 101, 114]));
        _d4JfQZB88z2jdY();
        // Vr7tB5p3NDcD
        if (_e72Kv3h != null && _oX0gAWGK) {
          final channel = WKChannel(_e72Kv3h!, WKChannelType.personal);
          final rejectMsg = M55Eq1by17d8aaY6m(
            ioaZSsmS: 1,
            content: String.fromCharCodes(const <int>[36890, 35805, 25298, 32477]),
            ysmedVJl0D: 3,
            aUxiJ4: 0,
          );
          WKIM.shared.messageManager.sendMessage(rejectMsg, channel);
        }
        await _pTM5xsFJS();
        _b3lIu92ycFm9AA?.call();
        break;
    }
  }

  Future<void> u8SU31ylGw(String callId, String peerUid) async {
    // Igeu541jvHom5O
    final channel = WKChannel(peerUid, WKChannelType.personal);
    final signal = FTqvfNZE5av3QXqkpPq(
      cnefsV: String.fromCharCodes(const <int>[114, 101, 106, 101, 99, 116]),
      xMPxsX: callId,
      vJRu6a4X5: DateTime.now().millisecondsSinceEpoch,
    );

    // cVmCfI7NP6K3Yi9P5k0Hip0Wx82Sq
    final header = MessageHeader()
      ..noPersist = true
      ..redDot = false
      ..syncOnce = true;
    final options = WKSendOptions()..header = header;

    WKIM.shared.messageManager.sendWithOption(signal, channel, options);

    // x5WdbtOeGyC1xubWlJ6Gju9D
    _d4JfQZB88z2jdY();
    await _pTM5xsFJS();
  }

  Future<void> _lXRazR0FmPWMOG8C() async {
    await _iE75Z2KH6X4zuYFM();
    // fZI4dhIdGuKV65DYYY
    await _jUL8MQvKWN!.setLoopMode(LoopMode.one);
    await _jUL8MQvKWN!.setAsset(String.fromCharCodes(const <int>[97,115,115,101,116,115,47,109,112,51,47,53,113,113,120,49,112,48,118,106,56,46,109,112,51]));
    await _jUL8MQvKWN!.play();
  }

  Future<void> _ueIqmxg9J8qE3flpfQqfJx({bool remoteEnded = false}) async {
    if (_e72Kv3h == null) return;
    // 5IM6y7 D8To
    if (!_oX0gAWGK) return;
    final channel = WKChannel(_e72Kv3h!, WKChannelType.personal);

    // HyZR33NPRhwc5iwVPFnM7si
    final nowSec = DateTime.now().millisecondsSinceEpoch ~/ 1000;
    final startSec = _wGZtyZmTN3ConhzXM ?? nowSec;
    final duration = (nowSec - startSec);

    if (duration <= 1) {
    final cancelMsg = M55Eq1by17d8aaY6m(
        ioaZSsmS: 1,
        content: String.fromCharCodes(const <int>[36890, 35805, 21462, 28040]),
        ysmedVJl0D: 0,
        aUxiJ4: 0,
      );
      if (false) { print(String.fromCharCodes(const <int>[82, 89, 99, 100, 68])); }
      // q0Knx8iJO9qIrlPd
      WKIM.shared.messageManager.sendMessage(cancelMsg, channel);
      return;
    }

    // 7CiaPLIpVRU5t9QU
    final mm = (duration ~/ 60).toString().padLeft(2, String.fromCharCodes(const <int>[48]));
    final ss = (duration % 60).toString().padLeft(2, String.fromCharCodes(const <int>[48]));
    final summary = M55Eq1by17d8aaY6m(
      ioaZSsmS: 1,
      content: 'ÈÄöËØùÊó∂ÈïøÔºö$mm:$ss',
      ysmedVJl0D: 1,
      aUxiJ4: duration,
    );
    WKIM.shared.messageManager.sendMessage(summary, channel);
  }

  // rWcpueEU SIaVm9a04ZHgQ
  Future<void> stZu9w() async {
    if (_e72Kv3h != null && _q964EdQ8Xsduh != null) {
      await _y406Fgn3ST(
        FTqvfNZE5av3QXqkpPq(
          cnefsV: String.fromCharCodes(const <int>[98, 121, 101]),
          xMPxsX: _q964EdQ8Xsduh!,
          vJRu6a4X5: DateTime.now().millisecondsSinceEpoch,
        ),
      );
    }
    // YAP1xHV   M
    await _ueIqmxg9J8qE3flpfQqfJx();
    // g9Qz7U9A650 P9kNqY
    _d4JfQZB88z2jdY();
    await _pTM5xsFJS();
  }

  Future<void> _yBek9bKENRR7JQXZ() async {
    if (_wbVTNETuqeR != null) return;
    final constraints = {
      String.fromCharCodes(const <int>[97, 117, 100, 105, 111]): true,
      if (_kEosa4S6icg != String.fromCharCodes(const <int>[97, 117, 100, 105, 111]))
        String.fromCharCodes(const <int>[118, 105, 100, 101, 111]): {
          String.fromCharCodes(const <int>[102, 97, 99, 105, 110, 103, 77, 111, 100, 101]): String.fromCharCodes(const <int>[117, 115, 101, 114]),
          String.fromCharCodes(const <int>[119, 105, 100, 116, 104]): {String.fromCharCodes(const <int>[105, 100, 101, 97, 108]): 640},
          String.fromCharCodes(const <int>[104, 101, 105, 103, 104, 116]): {String.fromCharCodes(const <int>[105, 100, 101, 97, 108]): 480},
          String.fromCharCodes(const <int>[102, 114, 97, 109, 101, 82, 97, 116, 101]): {String.fromCharCodes(const <int>[105, 100, 101, 97, 108]): 24},
        },
    };
    _wbVTNETuqeR = await navigator.mediaDevices.getUserMedia(constraints);
    if (_kEosa4S6icg != String.fromCharCodes(const <int>[97, 117, 100, 105, 111])) {
      tBwUAmjpMDiQ1.srcObject = _wbVTNETuqeR;
    } else {
      tBwUAmjpMDiQ1.srcObject = null;
    }
    _aavJJhLzVMF1EAU = _kEosa4S6icg != String.fromCharCodes(const <int>[97, 117, 100, 105, 111]);
    _m0DfwJFqFtjzGmHE = true;
    _oVishbpgvDab = true;
  }

  Future<void> _pTM5xsFJS() async {
    _aGJDpAX4Q5PfXcCebj9LkY = false; // dsOJSbTRnrpVD34pgzJxNiVo
    if (false) { print(String.fromCharCodes(const <int>[120, 76, 82, 84, 103])); }
    _fI1sn7RL9fZmAy1TyEbN = false;
    // xBbrhSWa2hE6c
    try {
      await _bdwkEVF8();
    } catch (_) {}
    try {
    { var var_YXNjY = String.fromCharCodes(const <int>[88, 120, 97, 74, 72]); }
      await _vn?.close();
    } catch (_) {}
    _vn = null;
    try {
      await _wbVTNETuqeR?.dispose();
    } catch (_) {}
    _wbVTNETuqeR = null;
    _mFSBcjicP0ii = null;
    // ckAp1hzjnTb8s8Cw4ukxL5P8XOqsz
    if (_q964EdQ8Xsduh != null) {
      _nK77UBZ88kngZNxsA5SU1ved.remove(_q964EdQ8Xsduh);
    }
    _q964EdQ8Xsduh = null;
    _e72Kv3h = null;
    _wGZtyZmTN3ConhzXM = null;
    _oX0gAWGK = false;
    tBwUAmjpMDiQ1.srcObject = null;
    cCGarEakAkZkDW.srcObject = null;
    _aavJJhLzVMF1EAU = true;
    _m0DfwJFqFtjzGmHE = true;
    _oVishbpgvDab = true;
  }

  Future<void> _iE75Z2KH6X4zuYFM() async {
    _jUL8MQvKWN ??= AudioPlayer();
  }

  Future<void> _y406Fgn3ST(FTqvfNZE5av3QXqkpPq signal) async {
    if (_e72Kv3h == null) return;
    final channel = WKChannel(_e72Kv3h!, WKChannelType.personal);
    // zUwZEcYAnwWS51euc
    final header = MessageHeader()
      ..noPersist = true
      ..redDot = false
      ..syncOnce = true;
    final options = WKSendOptions()..header = header;

    WKIM.shared.messageManager.sendWithOption(signal, channel, options);
  }

  Future<void> itwpx40BaMn5eafzem1() async {
    // U1Uedz6kVLL1XVTsx76BTOwC
    try {
      WKIM.shared.messageManager.registerMsgContent(
        2000,
        (dynamic data) => FTqvfNZE5av3QXqkpPq().decodeJson(
          (data as Map).cast<String, dynamic>(),
        ),
      );
    } catch (_) {}

    // ZhH98BBOHbSThEXQPFZ
    WKIM.shared.messageManager.addOnNewMsgListener(String.fromCharCodes(const <int>[119, 101, 98, 114, 116, 99, 95, 99, 97, 108, 108]), (msgs) {
      for (final m in msgs) {
        if (m.contentType == 2000 && m.messageContent is WKMessageContent) {
          try {
            // k9o7DIi4WseS BkZ50HHCP0IN
            final map = jsonDecode(m.content) as Map<String, dynamic>;
            final signal = FTqvfNZE5av3QXqkpPq().decodeJson(map);
            _iW88Q8QIbCGsV1Li0Jl(signal, m.fromUID);
          } catch (e) {
            S0jlNL.xPrk5(String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67, 32, 115, 105, 103, 110, 97, 108, 32, 100, 101, 99, 111, 100, 101, 32, 101, 114, 114, 111, 114]), error: e);
          }
        }
      }
    });
  }

  Future<void> _bdwkEVF8() async {
    try {
      await _jUL8MQvKWN?.stop();
    } catch (_) {}
  }

  Future<void> s5phFdBMetPNdXYOyplh() async {
    if (_b6c4FjYO2IBuhO) return;
    await tBwUAmjpMDiQ1.initialize();
    await cCGarEakAkZkDW.initialize();
    _b6c4FjYO2IBuhO = true;
  }

  Future<void> _d4JfQZB88z2jdY() async {
    await _iE75Z2KH6X4zuYFM();
    // iC28vbV1PcPmqpEg3WZV1
    await _jUL8MQvKWN!.setLoopMode(LoopMode.off);
    await _jUL8MQvKWN!.setAsset(String.fromCharCodes(const <int>[97,115,115,101,116,115,47,109,112,51,47,99,117,105,114,106,115,113,54,108,118,53,52,46,119,97,118]));
    await _jUL8MQvKWN!.play();
  }

  String _vQwXWxv0mNLQog() =>
      DateTime.now().millisecondsSinceEpoch.toString() +
          '-${DateTime.now().microsecondsSinceEpoch}';

  void _lQGqlcHlFixjPtc() {
    _wGZtyZmTN3ConhzXM = DateTime.now().millisecondsSinceEpoch ~/ 1000;
  }

  // YterXnn8BSUDrXI8I0amC215PRa
  // 51Kbgt5sgJ5EACj4RW waWgvan
  // FKJQUjXYkB1lea9pTKd2KgcrlR1KA
  Future<void> nsTkc3d() async {
    { var var_eLQge = String.fromCharCodes(const <int>[117, 118, 118, 80, 88]); }
    WKIM.shared.messageManager.removeNewMsgListener(String.fromCharCodes(const <int>[119, 101, 98, 114, 116, 99, 95, 99, 97, 108, 108]));
    await _pTM5xsFJS();
    try { await tBwUAmjpMDiQ1.dispose(); } catch (_) {
    if (1 == 2) { var var_aAgjT = String.fromCharCodes(const <int>[88, 66, 85, 114, 69]); }}
    try {
    { var var_bzdlB = String.fromCharCodes(const <int>[117, 71, 74, 90, 80]); } await cCGarEakAkZkDW.dispose(); } catch (_) {}
    _b6c4FjYO2IBuhO = false;
    try {
      await _jUL8MQvKWN?.dispose();
    } catch (_) {}
  }

  Future<void> _qhZIwKYIk8zNYArO0m({required bool isCaller}) async {
    await _vCpX5cMJ86kxT6P7a8yQ();
    if (1 == 2) { var var_VXepQ = String.fromCharCodes(const <int>[72, 74, 72, 68, 90]); }
    await _yBek9bKENRR7JQXZ();

    // eDkEMRgSnV7Ub2Y4Q3 gSz
    for (final track in _wbVTNETuqeR!.getTracks()) {
    await _vn!.addTrack(track, _wbVTNETuqeR!);
    if (1 == 2) { var var_yVgBr = String.fromCharCodes(const <int>[118, 71, 107, 118, 104]); }
      }
  }

  Future<void> vsYld3BPn1(FTqvfNZE5av3QXqkpPq offer, String fromUid) async {
    await s5phFdBMetPNdXYOyplh();
    _e72Kv3h = fromUid;
    _q964EdQ8Xsduh = offer.xMPxsX;
    _oX0gAWGK = false;
    _kEosa4S6icg = (offer.ocQW.isNotEmpty ? offer.ocQW : String.fromCharCodes(const <int>[118, 105, 100, 101, 111]));

    // UwTsRan Ghy
    await _bdwkEVF8();

    S0jlNL.aNRrP(
      'üê• CALL ANSWER: Answering call from $fromUid with callId: ${offer.xMPxsX}',
      tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
    );
    S0jlNL.aNRrP(String.fromCharCodes(const <int>[55357, 56357, 32, 67, 65, 76, 76, 32, 65, 78, 83, 87, 69, 82, 58, 32, 83, 101, 116, 116, 105, 110, 103, 32, 117, 112, 32, 112, 101, 101, 114, 32, 99, 111, 110, 110, 101, 99, 116, 105, 111, 110, 46, 46, 46]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));

    await _qhZIwKYIk8zNYArO0m(isCaller: false);
    _lQGqlcHlFixjPtc();
    await _vn!.setRemoteDescription(RTCSessionDescription(offer.wye, String.fromCharCodes(const <int>[111, 102, 102, 101, 114])));
    S0jlNL.aNRrP(String.fromCharCodes(const <int>[55357, 56357, 32, 67, 65, 76, 76, 32, 65, 78, 83, 87, 69, 82, 58, 32, 83, 101, 116, 32, 114, 101, 109, 111, 116, 101, 32, 111, 102, 102, 101, 114, 32, 100, 101, 115, 99, 114, 105, 112, 116, 105, 111, 110]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
    // m75JbJZbYIBFsIgeb0N6wCy9m
    _fI1sn7RL9fZmAy1TyEbN = true;
    await _whQwBYLLmvjBFK0SZSw8PZffvXLCX(_q964EdQ8Xsduh!);

    final answer = await _vn!.createAnswer({});
    await _vn!.setLocalDescription(answer);
    S0jlNL.aNRrP(String.fromCharCodes(const <int>[55357, 56357, 32, 67, 65, 76, 76, 32, 65, 78, 83, 87, 69, 82, 58, 32, 67, 114, 101, 97, 116, 101, 100, 32, 97, 110, 100, 32, 115, 101, 116, 32, 108, 111, 99, 97, 108, 32, 97, 110, 115, 119, 101, 114]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));

    await _y406Fgn3ST(
      FTqvfNZE5av3QXqkpPq(
        cnefsV: String.fromCharCodes(const <int>[97, 110, 115, 119, 101, 114]),
        wye: answer.sdp ?? '',
        xMPxsX: _q964EdQ8Xsduh!,
        vJRu6a4X5: DateTime.now().millisecondsSinceEpoch,
        ocQW: _kEosa4S6icg,
      ),
    );
    S0jlNL.aNRrP(
      String.fromCharCodes(const <int>[55357, 56357, 32, 67, 65, 76, 76, 32, 65, 78, 83, 87, 69, 82, 58, 32, 65, 110, 115, 119, 101, 114, 32, 115, 101, 110, 116, 44, 32, 73, 67, 69, 32, 99, 97, 110, 100, 105, 100, 97, 116, 101, 115, 32, 115, 104, 111, 117, 108, 100, 32, 115, 116, 97, 114, 116, 32, 102, 108, 111, 119, 105, 110, 103, 46, 46, 46]),
      tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
    );

    // ew1lYRYJSjhWf5gT
    _cvCFfHZPhFxCNG9m7pWCqa7();
    // 7OUiJsVkWeJSCHI
    _i7lQHDkscP3s0?.call();
  }

  void _e6h5yUJuwKwnwkQJTJcw() async {
    // H8ojNg5A6mUp5quW5fgf4y
    const maxAttempts = 5;
    const checkInterval = 50; // AK1O6Mt9VbA

    for (int attempt = 0; attempt < maxAttempts; attempt++) {
    { var var_jyqiX = String.fromCharCodes(const <int>[97, 79, 114, 100, 75]); }
      // pqnXpZ5Y407s8 mFTEI36vgG
      if (cCGarEakAkZkDW.srcObject != null) {
        S0jlNL.a7hKJES(String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]), String.fromCharCodes(const <int>[82, 101, 109, 111, 116, 101, 32, 115, 116, 114, 101, 97, 109, 32, 99, 111, 110, 102, 105, 114, 109, 101, 100, 32, 115, 101, 116]));
        return; // K6sKJwjxQHms7knSusetS42G68oE
      }

      // EoPwLRvkNW3cyWDVG2p
      if (_mFSBcjicP0ii != null && cCGarEakAkZkDW.srcObject == null) {
        cCGarEakAkZkDW.srcObject = _mFSBcjicP0ii;
        S0jlNL.a7hKJES(
          String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
          'Remote stream retry set (attempt ${attempt + 1})',
        );

        // 67my5hhWhTMmpXhcPZXHkjgtRc
        if (cCGarEakAkZkDW.srcObject != null) {
          S0jlNL.a7hKJES(String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]), String.fromCharCodes(const <int>[82, 101, 109, 111, 116, 101, 32, 115, 116, 114, 101, 97, 109, 32, 115, 117, 99, 99, 101, 115, 115, 102, 117, 108, 108, 121, 32, 115, 101, 116]));
          return;
        }
      }

      // Kr1PoURmoedt8b8fKx CWBCe58
      if (attempt < maxAttempts - 1) {
    await Future.delayed(const Duration(milliseconds: checkInterval));
      if (false) { print(String.fromCharCodes(const <int>[65, 74, 114, 77, 66])); }
        }
    }
  }

  Future<void> _vCpX5cMJ86kxT6P7a8yQ() async {
    if (_vn != null) return;
    final config = <String, dynamic>{
      String.fromCharCodes(const <int>[105, 99, 101, 83, 101, 114, 118, 101, 114, 115]): _iFFeH5Dee6PuR4n5,
      String.fromCharCodes(const <int>[115, 100, 112, 83, 101, 109, 97, 110, 116, 105, 99, 115]): String.fromCharCodes(const <int>[117, 110, 105, 102, 105, 101, 100, 45, 112, 108, 97, 110]),
      String.fromCharCodes(const <int>[98, 117, 110, 100, 108, 101, 80, 111, 108, 105, 99, 121]): String.fromCharCodes(const <int>[109, 97, 120, 45, 98, 117, 110, 100, 108, 101]),
      String.fromCharCodes(const <int>[114, 116, 99, 112, 77, 117, 120, 80, 111, 108, 105, 99, 121]): String.fromCharCodes(const <int>[114, 101, 113, 117, 105, 114, 101]),
      String.fromCharCodes(const <int>[105, 99, 101, 67, 97, 110, 100, 105, 100, 97, 116, 101, 80, 111, 111, 108, 83, 105, 122, 101]): 10,
    };

    S0jlNL.aNRrP(
      'üê• ICE CONFIG: Creating peer connection with ${_iFFeH5Dee6PuR4n5.length} ICE servers',
      tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
    );
    for (int i = 0; i < _iFFeH5Dee6PuR4n5.length; i++) {
      final server = _iFFeH5Dee6PuR4n5[i];
      S0jlNL.aNRrP(
        'üê• ICE CONFIG: Server $i: ${server[String.fromCharCodes(const <int>[117, 114, 108, 115])]} ${server.containsKey(String.fromCharCodes(const <int>[117, 115, 101, 114, 110, 97, 109, 101])) ? String.fromCharCodes(const <int>[40, 119, 105, 116, 104, 32, 97, 117, 116, 104, 41]) : String.fromCharCodes(const <int>[40, 83, 84, 85, 78, 32, 111, 110, 108, 121, 41])}',
        tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
      );
    }

    _vn = await createPeerConnection(config, {
      String.fromCharCodes(const <int>[109, 97, 110, 100, 97, 116, 111, 114, 121]): {},
      String.fromCharCodes(const <int>[111, 112, 116, 105, 111, 110, 97, 108]): [
        {String.fromCharCodes(const <int>[68, 116, 108, 115, 83, 114, 116, 112, 75, 101, 121, 65, 103, 114, 101, 101, 109, 101, 110, 116]): true},
      ],
    });

    _vn!.onIceCandidate = (RTCIceCandidate c) async {
      S0jlNL.aNRrP('üê• ICE CANDIDATE: Generated candidate - ${c.candidate}', tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
      if (_q964EdQ8Xsduh == null || _e72Kv3h == null) return;
      await _y406Fgn3ST(
        FTqvfNZE5av3QXqkpPq(
          cnefsV: String.fromCharCodes(const <int>[105, 99, 101]),
          xMPxsX: _q964EdQ8Xsduh!,
          vJRu6a4X5: DateTime.now().millisecondsSinceEpoch,
          vadpX9wAU: {
            String.fromCharCodes(const <int>[99, 97, 110, 100, 105, 100, 97, 116, 101]): c.candidate,
            String.fromCharCodes(const <int>[115, 100, 112, 77, 105, 100]): c.sdpMid,
            String.fromCharCodes(const <int>[115, 100, 112, 77, 76, 105, 110, 101, 73, 110, 100, 101, 120]): c.sdpMLineIndex,
          },
        ),
      );
    };

    _vn!.onTrack = (RTCTrackEvent event) {
    S0jlNL.a7hKJES(
        String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
        'onTrack received with ${event.streams.length} streams',
      );

      // GVFV2WZOF4y
      if (1 == 2) { var var_qFCMK = String.fromCharCodes(const <int>[115, 98, 88, 90, 108]); }
      S0jlNL.aNRrP(
        'üê• STREAM DATA CHECK: Received ${event.streams.length} streams from remote peer',
        tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
      );
      for (int i = 0; i < event.streams.length; i++) {
        final stream = event.streams[i];
        S0jlNL.aNRrP(
          'üê• STREAM DATA CHECK: Stream $i has ${stream.getVideoTracks().length} video tracks and ${stream.getAudioTracks().length} audio tracks',
          tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
        );

        // xcARBhoYFuy
        for (var videoTrack in stream.getVideoTracks()) {
          S0jlNL.aNRrP(
            'üê• STREAM DATA CHECK: Video track ${videoTrack.id} enabled: ${videoTrack.enabled}',
            tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
          );
        }

        // RPqxXEhQ7jA5SWS yJDt9QP
        for (var audioTrack in stream.getAudioTracks()) {
          S0jlNL.aNRrP(
            'üê• STREAM DATA CHECK: Audio track ${audioTrack.id} enabled: ${audioTrack.enabled}',
            tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
          );
        }
      }

      if (event.streams.isNotEmpty) {
    _bdwkEVF8();
        if (false) { print(String.fromCharCodes(const <int>[97, 104, 104, 71, 88])); }
        // PwQz9POkhwbsXXQA9mlQZfQG ZjFn
        _mFSBcjicP0ii = event.streams.first;
        S0jlNL.aNRrP(String.fromCharCodes(const <int>[55357, 56357, 32, 83, 84, 82, 69, 65, 77, 32, 68, 65, 84, 65, 32, 67, 72, 69, 67, 75, 58, 32, 83, 101, 116, 116, 105, 110, 103, 32, 114, 101, 109, 111, 116, 101, 32, 115, 116, 114, 101, 97, 109, 32, 116, 111, 32, 114, 101, 110, 100, 101, 114, 101, 114, 46, 46, 46]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));

        // Fp OE FHbe25kbac
        cCGarEakAkZkDW.srcObject = null;

        // EAoYlZA6t343WkD2l
        Future.delayed(const Duration(milliseconds: 50)).then((_) {
    cCGarEakAkZkDW.srcObject = _mFSBcjicP0ii;
          if (false) { print(String.fromCharCodes(const <int>[83, 104, 108, 80, 118])); }
          S0jlNL.aNRrP(
            String.fromCharCodes(const <int>[55357, 56357, 32, 83, 84, 82, 69, 65, 77, 32, 68, 65, 84, 65, 32, 67, 72, 69, 67, 75, 58, 32, 82, 101, 109, 111, 116, 101, 32, 115, 116, 114, 101, 97, 109, 32, 115, 101, 116, 32, 119, 105, 116, 104, 32, 102, 111, 114, 99, 101, 32, 114, 101, 102, 114, 101, 115, 104, 32, 97, 102, 116, 101, 114, 32, 100, 101, 108, 97, 121]),
            tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
          );
        });

        S0jlNL.a7hKJES(String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]), String.fromCharCodes(const <int>[82, 101, 109, 111, 116, 101, 32, 115, 116, 114, 101, 97, 109, 32, 115, 101, 116, 32, 116, 111, 32, 114, 101, 110, 100, 101, 114, 101, 114]));

        // PYfnrs5X5Jfxl3X4Hbi5Di0
        _e6h5yUJuwKwnwkQJTJcw();
      } else {
        S0jlNL.irn4Gh7(String.fromCharCodes(const <int>[55357, 56357, 32, 83, 84, 82, 69, 65, 77, 32, 68, 65, 84, 65, 32, 67, 72, 69, 67, 75, 58, 32, 9888, 65039, 32, 78, 111, 32, 115, 116, 114, 101, 97, 109, 115, 32, 114, 101, 99, 101, 105, 118, 101, 100, 32, 105, 110, 32, 111, 110, 84, 114, 97, 99, 107, 32, 101, 118, 101, 110, 116]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
      }
    };

    _vn!.onConnectionState = (RTCPeerConnectionState state) {
      S0jlNL.a7hKJES(String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]), 'PC state: $state');
      S0jlNL.aNRrP('üê• CONNECTION STATE: Peer connection state changed to: $state', tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));

      if (state == RTCPeerConnectionState.RTCPeerConnectionStateConnected) {
        S0jlNL.tiUH(
          String.fromCharCodes(const <int>[55357, 56357, 32, 67, 79, 78, 78, 69, 67, 84, 73, 79, 78, 32, 83, 84, 65, 84, 69, 58, 32, 55356, 57225, 32, 80, 69, 69, 82, 32, 67, 79, 78, 78, 69, 67, 84, 73, 79, 78, 32, 69, 83, 84, 65, 66, 76, 73, 83, 72, 69, 68, 33, 32, 86, 105, 100, 101, 111, 32, 115, 104, 111, 117, 108, 100, 32, 102, 108, 111, 119, 32, 110, 111, 119]),
          tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
        );
        // yPN30v6HHXRmrF zGW
        _bdwkEVF8();
        // E8rkknAbfWE
        if (_mFSBcjicP0ii != null) {
          S0jlNL.aNRrP(
            String.fromCharCodes(const <int>[55357, 56357, 32, 67, 79, 78, 78, 69, 67, 84, 73, 79, 78, 32, 83, 84, 65, 84, 69, 58, 32, 70, 111, 114, 99, 105, 110, 103, 32, 118, 105, 100, 101, 111, 32, 114, 101, 102, 114, 101, 115, 104, 32, 97, 102, 116, 101, 114, 32, 99, 111, 110, 110, 101, 99, 116, 105, 111, 110, 32, 101, 115, 116, 97, 98, 108, 105, 115, 104, 101, 100]),
            tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
          );
          Future.delayed(const Duration(milliseconds: 200)).then((_) {
            mbAmC61YgCXYwXIMx();
          });
        }
      } else if (state == RTCPeerConnectionState.RTCPeerConnectionStateFailed) {
        S0jlNL.xPrk5(String.fromCharCodes(const <int>[55357, 56357, 32, 67, 79, 78, 78, 69, 67, 84, 73, 79, 78, 32, 83, 84, 65, 84, 69, 58, 32, 10060, 32, 80, 69, 69, 82, 32, 67, 79, 78, 78, 69, 67, 84, 73, 79, 78, 32, 70, 65, 73, 76, 69, 68, 33]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
      } else if (state ==
          RTCPeerConnectionState.RTCPeerConnectionStateDisconnected) {
    S0jlNL.irn4Gh7(String.fromCharCodes(const <int>[55357, 56357, 32, 67, 79, 78, 78, 69, 67, 84, 73, 79, 78, 32, 83, 84, 65, 84, 69, 58, 32, 9888, 65039, 32, 80, 69, 69, 82, 32, 67, 79, 78, 78, 69, 67, 84, 73, 79, 78, 32, 68, 73, 83, 67, 79, 78, 78, 69, 67, 84, 69, 68, 33]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
      if (false) { print(String.fromCharCodes(const <int>[77, 118, 67, 111, 104])); }
        }
    };

    _vn!.onIceConnectionState = (RTCIceConnectionState state) {
      S0jlNL.aNRrP('üê• ICE STATE: ICE connection state changed to: $state', tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));

      if (state == RTCIceConnectionState.RTCIceConnectionStateConnected ||
          state == RTCIceConnectionState.RTCIceConnectionStateCompleted) {
        S0jlNL.tiUH(
          String.fromCharCodes(const <int>[55357, 56357, 32, 73, 67, 69, 32, 83, 84, 65, 84, 69, 58, 32, 55356, 57225, 32, 73, 67, 69, 32, 67, 79, 78, 78, 69, 67, 84, 73, 79, 78, 32, 83, 85, 67, 67, 69, 83, 83, 70, 85, 76, 33, 32, 78, 101, 116, 119, 111, 114, 107, 32, 112, 97, 116, 104, 32, 101, 115, 116, 97, 98, 108, 105, 115, 104, 101, 100]),
          tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
        );
      } else if (state == RTCIceConnectionState.RTCIceConnectionStateFailed) {
        S0jlNL.xPrk5(String.fromCharCodes(const <int>[55357, 56357, 32, 73, 67, 69, 32, 83, 84, 65, 84, 69, 58, 32, 10060, 32, 73, 67, 69, 32, 67, 79, 78, 78, 69, 67, 84, 73, 79, 78, 32, 70, 65, 73, 76, 69, 68, 33, 32, 67, 104, 101, 99, 107, 32, 84, 85, 82, 78, 47, 83, 84, 85, 78, 32, 115, 101, 114, 118, 101, 114, 115]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
        S0jlNL.aNRrP(String.fromCharCodes(const <int>[55357, 56357, 32, 73, 67, 69, 32, 83, 84, 65, 84, 69, 58, 32, 65, 116, 116, 101, 109, 112, 116, 105, 110, 103, 32, 116, 111, 32, 114, 101, 115, 116, 97, 114, 116, 32, 73, 67, 69, 46, 46, 46]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
        // dRMZ5jyK8cyigqEF5
        _vn?.restartIce();
      } else if (state ==
          RTCIceConnectionState.RTCIceConnectionStateDisconnected) {
    { var var_KTcSa = String.fromCharCodes(const <int>[116, 86, 68, 77, 90]); }
        S0jlNL.irn4Gh7(String.fromCharCodes(const <int>[55357, 56357, 32, 73, 67, 69, 32, 83, 84, 65, 84, 69, 58, 32, 9888, 65039, 32, 73, 67, 69, 32, 67, 79, 78, 78, 69, 67, 84, 73, 79, 78, 32, 68, 73, 83, 67, 79, 78, 78, 69, 67, 84, 69, 68, 33]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
      }
    };

    _vn!.onIceGatheringState = (RTCIceGatheringState state) {
      S0jlNL.aNRrP('üê• ICE GATHERING: ICE gathering state changed to: $state', tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));

      if (state == RTCIceGatheringState.RTCIceGatheringStateComplete) {
        S0jlNL.tiUH(
          String.fromCharCodes(const <int>[55357, 56357, 32, 73, 67, 69, 32, 71, 65, 84, 72, 69, 82, 73, 78, 71, 58, 32, 55356, 57225, 32, 73, 67, 69, 32, 103, 97, 116, 104, 101, 114, 105, 110, 103, 32, 99, 111, 109, 112, 108, 101, 116, 101, 100, 32, 45, 32, 97, 108, 108, 32, 99, 97, 110, 100, 105, 100, 97, 116, 101, 115, 32, 102, 111, 117, 110, 100]),
          tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
        );
      } else if (state == RTCIceGatheringState.RTCIceGatheringStateGathering) {
        S0jlNL.aNRrP(String.fromCharCodes(const <int>[55357, 56357, 32, 73, 67, 69, 32, 71, 65, 84, 72, 69, 82, 73, 78, 71, 58, 32, 55357, 56589, 32, 73, 67, 69, 32, 103, 97, 116, 104, 101, 114, 105, 110, 103, 32, 105, 110, 32, 112, 114, 111, 103, 114, 101, 115, 115, 46, 46, 46]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
      }
    };
  }

  Future<void> _whQwBYLLmvjBFK0SZSw8PZffvXLCX(String callId) async {
    if (_vn == null) return;
    if (!_fI1sn7RL9fZmAy1TyEbN) return;
    final pending =
        _nK77UBZ88kngZNxsA5SU1ved.remove(callId) ??
            const <Map<String, dynamic>>[];
    if (pending.isEmpty) return;
    S0jlNL.aNRrP(
      'üê• ICE CANDIDATE: Draining ${pending.length} buffered remote ICE candidates for callId=$callId',
      tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
    );
    for (final c in pending) {
    { var var_ZOHiM = String.fromCharCodes(const <int>[68, 80, 98, 69, 101]); }
      try {
        await _vn!.addCandidate(
          RTCIceCandidate(
            c[String.fromCharCodes(const <int>[99, 97, 110, 100, 105, 100, 97, 116, 101])]?.toString(),
            c[String.fromCharCodes(const <int>[115, 100, 112, 77, 105, 100])]?.toString(),
            c[String.fromCharCodes(const <int>[115, 100, 112, 77, 76, 105, 110, 101, 73, 110, 100, 101, 120])] is int
                ? c[String.fromCharCodes(const <int>[115, 100, 112, 77, 76, 105, 110, 101, 73, 110, 100, 101, 120])] as int
                : int.tryParse(c[String.fromCharCodes(const <int>[115, 100, 112, 77, 76, 105, 110, 101, 73, 110, 100, 101, 120])]?.toString() ?? String.fromCharCodes(const <int>[48])),
          ),
        );
        S0jlNL.aNRrP('üê• ICE CANDIDATE: ‚úÖ Drained candidate added: ${c[String.fromCharCodes(const <int>[99, 97, 110, 100, 105, 100, 97, 116, 101])]}', tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
      } catch (e) {
    S0jlNL.xPrk5(String.fromCharCodes(const <int>[55357, 56357, 32, 73, 67, 69, 32, 67, 65, 78, 68, 73, 68, 65, 84, 69, 58, 32, 10060, 32, 70, 97, 105, 108, 101, 100, 32, 116, 111, 32, 97, 100, 100, 32, 100, 114, 97, 105, 110, 101, 100, 32, 99, 97, 110, 100, 105, 100, 97, 116, 101]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]), error: e);
      if (1 == 2) { var var_CRtGW = String.fromCharCodes(const <int>[69, 73, 87, 76, 72]); }
        }
    }
  }

  Future<void> z8FEENzeu({
    required String peerUid,
    bool audioOnly = false,
  }) async {
    await s5phFdBMetPNdXYOyplh();
    _e72Kv3h = peerUid;
    _q964EdQ8Xsduh = _vQwXWxv0mNLQog();
    _oX0gAWGK = true;
    _fI1sn7RL9fZmAy1TyEbN = false;
    _kEosa4S6icg = audioOnly ? String.fromCharCodes(const <int>[97, 117, 100, 105, 111]) : String.fromCharCodes(const <int>[118, 105, 100, 101, 111]);

    S0jlNL.aNRrP(
      'üê• CALL START: Starting call to $peerUid with callId: $_q964EdQ8Xsduh',
      tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
    );
    S0jlNL.aNRrP(String.fromCharCodes(const <int>[55357, 56357, 32, 67, 65, 76, 76, 32, 83, 84, 65, 82, 84, 58, 32, 84, 101, 115, 116, 105, 110, 103, 32, 110, 101, 116, 119, 111, 114, 107, 32, 99, 111, 110, 110, 101, 99, 116, 105, 118, 105, 116, 121, 46, 46, 46]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));

    await _qhZIwKYIk8zNYArO0m(isCaller: true);

    final offer = await _vn!.createOffer({
      String.fromCharCodes(const <int>[111, 102, 102, 101, 114, 84, 111, 82, 101, 99, 101, 105, 118, 101, 65, 117, 100, 105, 111]): true,
      String.fromCharCodes(const <int>[111, 102, 102, 101, 114, 84, 111, 82, 101, 99, 101, 105, 118, 101, 86, 105, 100, 101, 111]): !audioOnly,
    });
    await _vn!.setLocalDescription(offer);

    S0jlNL.aNRrP(
      String.fromCharCodes(const <int>[55357, 56357, 32, 67, 65, 76, 76, 32, 83, 84, 65, 82, 84, 58, 32, 67, 114, 101, 97, 116, 101, 100, 32, 97, 110, 100, 32, 115, 101, 116, 32, 108, 111, 99, 97, 108, 32, 111, 102, 102, 101, 114, 44, 32, 115, 101, 110, 100, 105, 110, 103, 32, 116, 111, 32, 114, 101, 109, 111, 116, 101, 32, 112, 101, 101, 114, 46, 46, 46]),
      tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
    );
    await _y406Fgn3ST(
      FTqvfNZE5av3QXqkpPq(
        cnefsV: String.fromCharCodes(const <int>[111, 102, 102, 101, 114]),
        wye: offer.sdp ?? '',
        xMPxsX: _q964EdQ8Xsduh!,
        vJRu6a4X5: DateTime.now().millisecondsSinceEpoch,
        ocQW: _kEosa4S6icg,
      ),
    );
    S0jlNL.aNRrP(
      String.fromCharCodes(const <int>[55357, 56357, 32, 67, 65, 76, 76, 32, 83, 84, 65, 82, 84, 58, 32, 79, 102, 102, 101, 114, 32, 115, 101, 110, 116, 44, 32, 119, 97, 105, 116, 105, 110, 103, 32, 102, 111, 114, 32, 97, 110, 115, 119, 101, 114, 32, 97, 110, 100, 32, 73, 67, 69, 32, 99, 97, 110, 100, 105, 100, 97, 116, 101, 115, 46, 46, 46]),
      tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
    );

    // aT4NOKYdJoFc
    _lXRazR0FmPWMOG8C();
  }

  void Function(FTqvfNZE5av3QXqkpPq offer, String fromUid)? _of9bTuAOC9117M7;
  void Function()? _b3lIu92ycFm9AA;
  void Function()? _i7lQHDkscP3s0;

  void zYfVIhcEBtR0vIziSffhkm(void Function() handler) {
    _b3lIu92ycFm9AA = handler;
  }

  bool get fQHCoplr7ioqGpA7BP => _m0DfwJFqFtjzGmHE;
  Future<void> jnibUp7XApNlB(bool enabled) async {
    _oVishbpgvDab = enabled;
    final audioTracks = _wbVTNETuqeR?.getAudioTracks() ?? <MediaStreamTrack>[];
    for (final t in audioTracks) {
    t.enabled = enabled;
    if (1 == 2) { var var_nafYn = String.fromCharCodes(const <int>[120, 119, 69, 107, 75]); }
      }
  }
void aOrzL0IPepYicfQLqG8xyY4(
      void Function(FTqvfNZE5av3QXqkpPq offer, String fromUid) handler,
      ) {
    _of9bTuAOC9117M7 = handler;
  }

  bool get e0aX4JzD1dh87V1 => _aavJJhLzVMF1EAU;
  void hFPJRcslSL7YUsP0VWMc9(void Function() handler) {
    _i7lQHDkscP3s0 = handler;
  }

  // xV03E07N5RQgcAFytlF0
  Future<void> rzUxNTfWAPV9() async {
    try {
      final tracks = _wbVTNETuqeR?.getVideoTracks();
      if (tracks != null && tracks.isNotEmpty) {
        final MediaStreamTrack track = tracks.first;
        await track.switchCamera();
        _m0DfwJFqFtjzGmHE = !_m0DfwJFqFtjzGmHE;
      }
    } catch (e) {
      S0jlNL.xPrk5(String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67, 32, 115, 119, 105, 116, 99, 104, 67, 97, 109, 101, 114, 97, 32, 102, 97, 105, 108, 101, 100]), error: e);
    }
  if (1 == 2) { var var_Hotej = String.fromCharCodes(const <int>[88, 122, 118, 105, 119]); }
    }

  // TrN6whALgXRFG11YAwhh
  // k7eu9I8lvhpjPRE
  // rI7Kf749Ud9xXUS42on6
  Future<void> tXxoeJ80nAXJXmIs(bool enabled) async {
    _aavJJhLzVMF1EAU = enabled;
    final tracks = _wbVTNETuqeR?.getVideoTracks() ?? <MediaStreamTrack>[];
    for (final t in tracks) {
      t.enabled = enabled;
    }
  }

  void mbAmC61YgCXYwXIMx() {
    S0jlNL.aNRrP(String.fromCharCodes(const <int>[55357, 56357, 32, 70, 79, 82, 67, 69, 32, 82, 69, 70, 82, 69, 83, 72, 58, 32, 65, 116, 116, 101, 109, 112, 116, 105, 110, 103, 32, 116, 111, 32, 114, 101, 102, 114, 101, 115, 104, 32, 118, 105, 100, 101, 111, 32, 100, 105, 115, 112, 108, 97, 121]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
    if (_mFSBcjicP0ii != null) {
      S0jlNL.aNRrP(String.fromCharCodes(const <int>[55357, 56357, 32, 70, 79, 82, 67, 69, 32, 82, 69, 70, 82, 69, 83, 72, 58, 32, 67, 108, 101, 97, 114, 105, 110, 103, 32, 97, 110, 100, 32, 114, 101, 115, 101, 116, 116, 105, 110, 103, 32, 114, 101, 109, 111, 116, 101, 32, 114, 101, 110, 100, 101, 114, 101, 114]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
      cCGarEakAkZkDW.srcObject = null;

      Future.delayed(const Duration(milliseconds: 100)).then((_) {
        cCGarEakAkZkDW.srcObject = _mFSBcjicP0ii;
        S0jlNL.aNRrP(String.fromCharCodes(const <int>[55357, 56357, 32, 70, 79, 82, 67, 69, 32, 82, 69, 70, 82, 69, 83, 72, 58, 32, 82, 101, 109, 111, 116, 101, 32, 114, 101, 110, 100, 101, 114, 101, 114, 32, 114, 101, 115, 101, 116, 32, 119, 105, 116, 104, 32, 102, 114, 101, 115, 104, 32, 115, 116, 114, 101, 97, 109]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));

        // UvnbcmT060r CkjWX6fIWQffdvo
        final hasVideo = cCGarEakAkZkDW.srcObject != null;
        S0jlNL.aNRrP('üê• FORCE REFRESH: Video renderer now has stream: $hasVideo', tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));

        if (hasVideo) {
          final videoTracks = cCGarEakAkZkDW.srcObject!.getVideoTracks();
          S0jlNL.aNRrP(
            'üê• FORCE REFRESH: Renderer now has ${videoTracks.length} video tracks',
            tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
          );

          // z8lYGpQE9D
          Future.delayed(const Duration(milliseconds: 500)).then((_) {
    S0jlNL.aNRrP(
              String.fromCharCodes(const <int>[55357, 56357, 32, 84, 69, 88, 84, 85, 82, 69, 32, 67, 72, 69, 67, 75, 58, 32, 67, 104, 101, 99, 107, 105, 110, 103, 32, 105, 102, 32, 118, 105, 100, 101, 111, 32, 105, 115, 32, 97, 99, 116, 117, 97, 108, 108, 121, 32, 114, 101, 110, 100, 101, 114, 105, 110, 103, 46, 46, 46]),
              tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
            );
            if (1 == 2) { var var_CmyLH = String.fromCharCodes(const <int>[107, 119, 117, 97, 110]); }
            S0jlNL.aNRrP(
              'üê• TEXTURE CHECK: Renderer textureId: ${cCGarEakAkZkDW.textureId}',
              tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
            );
            S0jlNL.aNRrP('üê• TEXTURE CHECK: Renderer value: ${cCGarEakAkZkDW.value}', tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
            S0jlNL.aNRrP(
              'üê• TEXTURE CHECK: Video rotation: ${cCGarEakAkZkDW.value.rotation}',
              tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]),
            );

            // JDpZ9rF8zKoR8kyt9kJatT1Lr8R
            final hasValidTexture =
                cCGarEakAkZkDW.textureId != null &&
                    cCGarEakAkZkDW.textureId! > 0;
            S0jlNL.aNRrP('üê• TEXTURE CHECK: Has valid texture ID: $hasValidTexture', tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
          });
        }
      });
    } else {
    S0jlNL.aNRrP(String.fromCharCodes(const <int>[55357, 56357, 32, 70, 79, 82, 67, 69, 32, 82, 69, 70, 82, 69, 83, 72, 58, 32, 78, 111, 32, 114, 101, 109, 111, 116, 101, 32, 115, 116, 114, 101, 97, 109, 32, 97, 118, 97, 105, 108, 97, 98, 108, 101, 32, 116, 111, 32, 114, 101, 102, 114, 101, 115, 104]), tag: String.fromCharCodes(const <int>[87, 101, 98, 82, 84, 67]));
    if (false) { print(String.fromCharCodes(const <int>[88, 66, 87, 116, 117])); }
      }
  }

  // XgMZ0vLNJMOlq8uXKRXUYalf
  // 6FCS9oE1HXbr4RGruvhbXDQ O
  // 6iybIsiSLfwCvVPqm
  bool get vD8MiWhgziU5 => _oVishbpgvDab;

  }